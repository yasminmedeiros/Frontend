{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar Lib = require('../../lib');\nvar Axes = require('../../plots/cartesian/axes');\nvar constants = require('./constants');\nvar helpers = require('./helpers');\nmodule.exports = function calcAutorange(gd) {\n  var fullLayout = gd._fullLayout;\n  var shapeList = Lib.filterVisible(fullLayout.shapes);\n  if (!shapeList.length || !gd._fullData.length) return;\n  for (var i = 0; i < shapeList.length; i++) {\n    var shape = shapeList[i];\n    shape._extremes = {};\n    var ax, bounds;\n    if (shape.xref !== 'paper') {\n      var vx0 = shape.xsizemode === 'pixel' ? shape.xanchor : shape.x0;\n      var vx1 = shape.xsizemode === 'pixel' ? shape.xanchor : shape.x1;\n      ax = Axes.getFromId(gd, shape.xref);\n      bounds = shapeBounds(ax, vx0, vx1, shape.path, constants.paramIsX);\n      if (bounds) {\n        shape._extremes[ax._id] = Axes.findExtremes(ax, bounds, calcXPaddingOptions(shape));\n      }\n    }\n    if (shape.yref !== 'paper') {\n      var vy0 = shape.ysizemode === 'pixel' ? shape.yanchor : shape.y0;\n      var vy1 = shape.ysizemode === 'pixel' ? shape.yanchor : shape.y1;\n      ax = Axes.getFromId(gd, shape.yref);\n      bounds = shapeBounds(ax, vy0, vy1, shape.path, constants.paramIsY);\n      if (bounds) {\n        shape._extremes[ax._id] = Axes.findExtremes(ax, bounds, calcYPaddingOptions(shape));\n      }\n    }\n  }\n};\nfunction calcXPaddingOptions(shape) {\n  return calcPaddingOptions(shape.line.width, shape.xsizemode, shape.x0, shape.x1, shape.path, false);\n}\nfunction calcYPaddingOptions(shape) {\n  return calcPaddingOptions(shape.line.width, shape.ysizemode, shape.y0, shape.y1, shape.path, true);\n}\nfunction calcPaddingOptions(lineWidth, sizeMode, v0, v1, path, isYAxis) {\n  var ppad = lineWidth / 2;\n  var axisDirectionReverted = isYAxis;\n  if (sizeMode === 'pixel') {\n    var coords = path ? helpers.extractPathCoords(path, isYAxis ? constants.paramIsY : constants.paramIsX) : [v0, v1];\n    var maxValue = Lib.aggNums(Math.max, null, coords);\n    var minValue = Lib.aggNums(Math.min, null, coords);\n    var beforePad = minValue < 0 ? Math.abs(minValue) + ppad : ppad;\n    var afterPad = maxValue > 0 ? maxValue + ppad : ppad;\n    return {\n      ppad: ppad,\n      ppadplus: axisDirectionReverted ? beforePad : afterPad,\n      ppadminus: axisDirectionReverted ? afterPad : beforePad\n    };\n  } else {\n    return {\n      ppad: ppad\n    };\n  }\n}\nfunction shapeBounds(ax, v0, v1, path, paramsToUse) {\n  var convertVal = ax.type === 'category' || ax.type === 'multicategory' ? ax.r2c : ax.d2c;\n  if (v0 !== undefined) return [convertVal(v0), convertVal(v1)];\n  if (!path) return;\n  var min = Infinity;\n  var max = -Infinity;\n  var segments = path.match(constants.segmentRE);\n  var i;\n  var segment;\n  var drawnParam;\n  var params;\n  var val;\n  if (ax.type === 'date') convertVal = helpers.decodeDate(convertVal);\n  for (i = 0; i < segments.length; i++) {\n    segment = segments[i];\n    drawnParam = paramsToUse[segment.charAt(0)].drawn;\n    if (drawnParam === undefined) continue;\n    params = segments[i].substr(1).match(constants.paramRE);\n    if (!params || params.length < drawnParam) continue;\n    val = convertVal(params[drawnParam]);\n    if (val < min) min = val;\n    if (val > max) max = val;\n  }\n  if (max >= min) return [min, max];\n}","map":{"version":3,"names":["Lib","require","Axes","constants","helpers","module","exports","calcAutorange","gd","fullLayout","_fullLayout","shapeList","filterVisible","shapes","length","_fullData","i","shape","_extremes","ax","bounds","xref","vx0","xsizemode","xanchor","x0","vx1","x1","getFromId","shapeBounds","path","paramIsX","_id","findExtremes","calcXPaddingOptions","yref","vy0","ysizemode","yanchor","y0","vy1","y1","paramIsY","calcYPaddingOptions","calcPaddingOptions","line","width","lineWidth","sizeMode","v0","v1","isYAxis","ppad","axisDirectionReverted","coords","extractPathCoords","maxValue","aggNums","Math","max","minValue","min","beforePad","abs","afterPad","ppadplus","ppadminus","paramsToUse","convertVal","type","r2c","d2c","undefined","Infinity","segments","match","segmentRE","segment","drawnParam","params","val","decodeDate","charAt","drawn","substr","paramRE"],"sources":["/home/yasmin/√Årea de Trabalho/Frontend/node_modules/plotly.js/src/components/shapes/calc_autorange.js"],"sourcesContent":["/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar Lib = require('../../lib');\nvar Axes = require('../../plots/cartesian/axes');\n\nvar constants = require('./constants');\nvar helpers = require('./helpers');\n\n\nmodule.exports = function calcAutorange(gd) {\n    var fullLayout = gd._fullLayout;\n    var shapeList = Lib.filterVisible(fullLayout.shapes);\n\n    if(!shapeList.length || !gd._fullData.length) return;\n\n    for(var i = 0; i < shapeList.length; i++) {\n        var shape = shapeList[i];\n        shape._extremes = {};\n\n        var ax, bounds;\n\n        if(shape.xref !== 'paper') {\n            var vx0 = shape.xsizemode === 'pixel' ? shape.xanchor : shape.x0;\n            var vx1 = shape.xsizemode === 'pixel' ? shape.xanchor : shape.x1;\n            ax = Axes.getFromId(gd, shape.xref);\n\n            bounds = shapeBounds(ax, vx0, vx1, shape.path, constants.paramIsX);\n            if(bounds) {\n                shape._extremes[ax._id] = Axes.findExtremes(ax, bounds, calcXPaddingOptions(shape));\n            }\n        }\n\n        if(shape.yref !== 'paper') {\n            var vy0 = shape.ysizemode === 'pixel' ? shape.yanchor : shape.y0;\n            var vy1 = shape.ysizemode === 'pixel' ? shape.yanchor : shape.y1;\n            ax = Axes.getFromId(gd, shape.yref);\n\n            bounds = shapeBounds(ax, vy0, vy1, shape.path, constants.paramIsY);\n            if(bounds) {\n                shape._extremes[ax._id] = Axes.findExtremes(ax, bounds, calcYPaddingOptions(shape));\n            }\n        }\n    }\n};\n\nfunction calcXPaddingOptions(shape) {\n    return calcPaddingOptions(shape.line.width, shape.xsizemode, shape.x0, shape.x1, shape.path, false);\n}\n\nfunction calcYPaddingOptions(shape) {\n    return calcPaddingOptions(shape.line.width, shape.ysizemode, shape.y0, shape.y1, shape.path, true);\n}\n\nfunction calcPaddingOptions(lineWidth, sizeMode, v0, v1, path, isYAxis) {\n    var ppad = lineWidth / 2;\n    var axisDirectionReverted = isYAxis;\n\n    if(sizeMode === 'pixel') {\n        var coords = path ?\n            helpers.extractPathCoords(path, isYAxis ? constants.paramIsY : constants.paramIsX) :\n            [v0, v1];\n        var maxValue = Lib.aggNums(Math.max, null, coords);\n        var minValue = Lib.aggNums(Math.min, null, coords);\n        var beforePad = minValue < 0 ? Math.abs(minValue) + ppad : ppad;\n        var afterPad = maxValue > 0 ? maxValue + ppad : ppad;\n\n        return {\n            ppad: ppad,\n            ppadplus: axisDirectionReverted ? beforePad : afterPad,\n            ppadminus: axisDirectionReverted ? afterPad : beforePad\n        };\n    } else {\n        return {ppad: ppad};\n    }\n}\n\nfunction shapeBounds(ax, v0, v1, path, paramsToUse) {\n    var convertVal = (ax.type === 'category' || ax.type === 'multicategory') ? ax.r2c : ax.d2c;\n\n    if(v0 !== undefined) return [convertVal(v0), convertVal(v1)];\n    if(!path) return;\n\n    var min = Infinity;\n    var max = -Infinity;\n    var segments = path.match(constants.segmentRE);\n    var i;\n    var segment;\n    var drawnParam;\n    var params;\n    var val;\n\n    if(ax.type === 'date') convertVal = helpers.decodeDate(convertVal);\n\n    for(i = 0; i < segments.length; i++) {\n        segment = segments[i];\n        drawnParam = paramsToUse[segment.charAt(0)].drawn;\n        if(drawnParam === undefined) continue;\n\n        params = segments[i].substr(1).match(constants.paramRE);\n        if(!params || params.length < drawnParam) continue;\n\n        val = convertVal(params[drawnParam]);\n        if(val < min) min = val;\n        if(val > max) max = val;\n    }\n    if(max >= min) return [min, max];\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}