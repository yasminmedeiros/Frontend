{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar Fx = require('../../components/fx');\nvar Lib = require('../../lib');\nvar getTraceColor = require('../bar/hover').getTraceColor;\nvar fillHoverText = require('../scatter/fill_hover_text');\nvar makeHoverPointText = require('../scatterpolar/hover').makeHoverPointText;\nvar isPtInsidePolygon = require('../../plots/polar/helpers').isPtInsidePolygon;\nmodule.exports = function hoverPoints(pointData, xval, yval) {\n  var cd = pointData.cd;\n  var trace = cd[0].trace;\n  var subplot = pointData.subplot;\n  var radialAxis = subplot.radialAxis;\n  var angularAxis = subplot.angularAxis;\n  var vangles = subplot.vangles;\n  var inboxFn = vangles ? isPtInsidePolygon : Lib.isPtInsideSector;\n  var maxHoverDistance = pointData.maxHoverDistance;\n  var period = angularAxis._period || 2 * Math.PI;\n  var rVal = Math.abs(radialAxis.g2p(Math.sqrt(xval * xval + yval * yval)));\n  var thetaVal = Math.atan2(yval, xval);\n\n  // polar.(x|y)axis.p2c doesn't get the reversed radial axis range case right\n  if (radialAxis.range[0] > radialAxis.range[1]) {\n    thetaVal += Math.PI;\n  }\n  var distFn = function distFn(di) {\n    if (inboxFn(rVal, thetaVal, [di.rp0, di.rp1], [di.thetag0, di.thetag1], vangles)) {\n      return maxHoverDistance +\n      // add a little to the pseudo-distance for wider bars, so that like scatter,\n      // if you are over two overlapping bars, the narrower one wins.\n      Math.min(1, Math.abs(di.thetag1 - di.thetag0) / period) - 1 +\n      // add a gradient so hovering near the end of a\n      // bar makes it a little closer match\n      (di.rp1 - rVal) / (di.rp1 - di.rp0) - 1;\n    } else {\n      return Infinity;\n    }\n  };\n  Fx.getClosest(cd, distFn, pointData);\n  if (pointData.index === false) return;\n  var index = pointData.index;\n  var cdi = cd[index];\n  pointData.x0 = pointData.x1 = cdi.ct[0];\n  pointData.y0 = pointData.y1 = cdi.ct[1];\n  var _cdi = Lib.extendFlat({}, cdi, {\n    r: cdi.s,\n    theta: cdi.p\n  });\n  fillHoverText(cdi, trace, pointData);\n  makeHoverPointText(_cdi, trace, subplot, pointData);\n  pointData.hovertemplate = trace.hovertemplate;\n  pointData.color = getTraceColor(trace, cdi);\n  pointData.xLabelVal = pointData.yLabelVal = undefined;\n  if (cdi.s < 0) {\n    pointData.idealAlign = 'left';\n  }\n  return [pointData];\n};","map":{"version":3,"names":["Fx","require","Lib","getTraceColor","fillHoverText","makeHoverPointText","isPtInsidePolygon","module","exports","hoverPoints","pointData","xval","yval","cd","trace","subplot","radialAxis","angularAxis","vangles","inboxFn","isPtInsideSector","maxHoverDistance","period","_period","Math","PI","rVal","abs","g2p","sqrt","thetaVal","atan2","range","distFn","di","rp0","rp1","thetag0","thetag1","min","Infinity","getClosest","index","cdi","x0","x1","ct","y0","y1","_cdi","extendFlat","r","s","theta","p","hovertemplate","color","xLabelVal","yLabelVal","undefined","idealAlign"],"sources":["/home/yasmin/Ãrea de Trabalho/Frontend/node_modules/plotly.js/src/traces/barpolar/hover.js"],"sourcesContent":["/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar Fx = require('../../components/fx');\nvar Lib = require('../../lib');\nvar getTraceColor = require('../bar/hover').getTraceColor;\nvar fillHoverText = require('../scatter/fill_hover_text');\nvar makeHoverPointText = require('../scatterpolar/hover').makeHoverPointText;\nvar isPtInsidePolygon = require('../../plots/polar/helpers').isPtInsidePolygon;\n\nmodule.exports = function hoverPoints(pointData, xval, yval) {\n    var cd = pointData.cd;\n    var trace = cd[0].trace;\n\n    var subplot = pointData.subplot;\n    var radialAxis = subplot.radialAxis;\n    var angularAxis = subplot.angularAxis;\n    var vangles = subplot.vangles;\n    var inboxFn = vangles ? isPtInsidePolygon : Lib.isPtInsideSector;\n    var maxHoverDistance = pointData.maxHoverDistance;\n    var period = angularAxis._period || 2 * Math.PI;\n\n    var rVal = Math.abs(radialAxis.g2p(Math.sqrt(xval * xval + yval * yval)));\n    var thetaVal = Math.atan2(yval, xval);\n\n    // polar.(x|y)axis.p2c doesn't get the reversed radial axis range case right\n    if(radialAxis.range[0] > radialAxis.range[1]) {\n        thetaVal += Math.PI;\n    }\n\n    var distFn = function(di) {\n        if(inboxFn(rVal, thetaVal, [di.rp0, di.rp1], [di.thetag0, di.thetag1], vangles)) {\n            return maxHoverDistance +\n                // add a little to the pseudo-distance for wider bars, so that like scatter,\n                // if you are over two overlapping bars, the narrower one wins.\n                Math.min(1, Math.abs(di.thetag1 - di.thetag0) / period) - 1 +\n                // add a gradient so hovering near the end of a\n                // bar makes it a little closer match\n                (di.rp1 - rVal) / (di.rp1 - di.rp0) - 1;\n        } else {\n            return Infinity;\n        }\n    };\n\n    Fx.getClosest(cd, distFn, pointData);\n    if(pointData.index === false) return;\n\n    var index = pointData.index;\n    var cdi = cd[index];\n\n    pointData.x0 = pointData.x1 = cdi.ct[0];\n    pointData.y0 = pointData.y1 = cdi.ct[1];\n\n    var _cdi = Lib.extendFlat({}, cdi, {r: cdi.s, theta: cdi.p});\n    fillHoverText(cdi, trace, pointData);\n    makeHoverPointText(_cdi, trace, subplot, pointData);\n    pointData.hovertemplate = trace.hovertemplate;\n    pointData.color = getTraceColor(trace, cdi);\n    pointData.xLabelVal = pointData.yLabelVal = undefined;\n\n    if(cdi.s < 0) {\n        pointData.idealAlign = 'left';\n    }\n\n    return [pointData];\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ,IAAIA,EAAE,GAAGC,OAAO,CAAC,qBAAqB,CAAC;AACvC,IAAIC,GAAG,GAAGD,OAAO,CAAC,WAAW,CAAC;AAC9B,IAAIE,aAAa,GAAGF,OAAO,CAAC,cAAc,CAAC,CAACE,aAAa;AACzD,IAAIC,aAAa,GAAGH,OAAO,CAAC,4BAA4B,CAAC;AACzD,IAAII,kBAAkB,GAAGJ,OAAO,CAAC,uBAAuB,CAAC,CAACI,kBAAkB;AAC5E,IAAIC,iBAAiB,GAAGL,OAAO,CAAC,2BAA2B,CAAC,CAACK,iBAAiB;AAE9EC,MAAM,CAACC,OAAO,GAAG,SAASC,WAAW,CAACC,SAAS,EAAEC,IAAI,EAAEC,IAAI,EAAE;EACzD,IAAIC,EAAE,GAAGH,SAAS,CAACG,EAAE;EACrB,IAAIC,KAAK,GAAGD,EAAE,CAAC,CAAC,CAAC,CAACC,KAAK;EAEvB,IAAIC,OAAO,GAAGL,SAAS,CAACK,OAAO;EAC/B,IAAIC,UAAU,GAAGD,OAAO,CAACC,UAAU;EACnC,IAAIC,WAAW,GAAGF,OAAO,CAACE,WAAW;EACrC,IAAIC,OAAO,GAAGH,OAAO,CAACG,OAAO;EAC7B,IAAIC,OAAO,GAAGD,OAAO,GAAGZ,iBAAiB,GAAGJ,GAAG,CAACkB,gBAAgB;EAChE,IAAIC,gBAAgB,GAAGX,SAAS,CAACW,gBAAgB;EACjD,IAAIC,MAAM,GAAGL,WAAW,CAACM,OAAO,IAAI,CAAC,GAAGC,IAAI,CAACC,EAAE;EAE/C,IAAIC,IAAI,GAAGF,IAAI,CAACG,GAAG,CAACX,UAAU,CAACY,GAAG,CAACJ,IAAI,CAACK,IAAI,CAAClB,IAAI,GAAGA,IAAI,GAAGC,IAAI,GAAGA,IAAI,CAAC,CAAC,CAAC;EACzE,IAAIkB,QAAQ,GAAGN,IAAI,CAACO,KAAK,CAACnB,IAAI,EAAED,IAAI,CAAC;;EAErC;EACA,IAAGK,UAAU,CAACgB,KAAK,CAAC,CAAC,CAAC,GAAGhB,UAAU,CAACgB,KAAK,CAAC,CAAC,CAAC,EAAE;IAC1CF,QAAQ,IAAIN,IAAI,CAACC,EAAE;EACvB;EAEA,IAAIQ,MAAM,GAAG,SAATA,MAAM,CAAYC,EAAE,EAAE;IACtB,IAAGf,OAAO,CAACO,IAAI,EAAEI,QAAQ,EAAE,CAACI,EAAE,CAACC,GAAG,EAAED,EAAE,CAACE,GAAG,CAAC,EAAE,CAACF,EAAE,CAACG,OAAO,EAAEH,EAAE,CAACI,OAAO,CAAC,EAAEpB,OAAO,CAAC,EAAE;MAC7E,OAAOG,gBAAgB;MACnB;MACA;MACAG,IAAI,CAACe,GAAG,CAAC,CAAC,EAAEf,IAAI,CAACG,GAAG,CAACO,EAAE,CAACI,OAAO,GAAGJ,EAAE,CAACG,OAAO,CAAC,GAAGf,MAAM,CAAC,GAAG,CAAC;MAC3D;MACA;MACA,CAACY,EAAE,CAACE,GAAG,GAAGV,IAAI,KAAKQ,EAAE,CAACE,GAAG,GAAGF,EAAE,CAACC,GAAG,CAAC,GAAG,CAAC;IAC/C,CAAC,MAAM;MACH,OAAOK,QAAQ;IACnB;EACJ,CAAC;EAEDxC,EAAE,CAACyC,UAAU,CAAC5B,EAAE,EAAEoB,MAAM,EAAEvB,SAAS,CAAC;EACpC,IAAGA,SAAS,CAACgC,KAAK,KAAK,KAAK,EAAE;EAE9B,IAAIA,KAAK,GAAGhC,SAAS,CAACgC,KAAK;EAC3B,IAAIC,GAAG,GAAG9B,EAAE,CAAC6B,KAAK,CAAC;EAEnBhC,SAAS,CAACkC,EAAE,GAAGlC,SAAS,CAACmC,EAAE,GAAGF,GAAG,CAACG,EAAE,CAAC,CAAC,CAAC;EACvCpC,SAAS,CAACqC,EAAE,GAAGrC,SAAS,CAACsC,EAAE,GAAGL,GAAG,CAACG,EAAE,CAAC,CAAC,CAAC;EAEvC,IAAIG,IAAI,GAAG/C,GAAG,CAACgD,UAAU,CAAC,CAAC,CAAC,EAAEP,GAAG,EAAE;IAACQ,CAAC,EAAER,GAAG,CAACS,CAAC;IAAEC,KAAK,EAAEV,GAAG,CAACW;EAAC,CAAC,CAAC;EAC5DlD,aAAa,CAACuC,GAAG,EAAE7B,KAAK,EAAEJ,SAAS,CAAC;EACpCL,kBAAkB,CAAC4C,IAAI,EAAEnC,KAAK,EAAEC,OAAO,EAAEL,SAAS,CAAC;EACnDA,SAAS,CAAC6C,aAAa,GAAGzC,KAAK,CAACyC,aAAa;EAC7C7C,SAAS,CAAC8C,KAAK,GAAGrD,aAAa,CAACW,KAAK,EAAE6B,GAAG,CAAC;EAC3CjC,SAAS,CAAC+C,SAAS,GAAG/C,SAAS,CAACgD,SAAS,GAAGC,SAAS;EAErD,IAAGhB,GAAG,CAACS,CAAC,GAAG,CAAC,EAAE;IACV1C,SAAS,CAACkD,UAAU,GAAG,MAAM;EACjC;EAEA,OAAO,CAAClD,SAAS,CAAC;AACtB,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}