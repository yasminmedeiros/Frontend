{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar d3 = require('d3');\nvar isNumeric = require('fast-isnumeric');\nvar Drawing = require('../drawing');\nvar subTypes = require('../../traces/scatter/subtypes');\nmodule.exports = function plot(gd, traces, plotinfo, transitionOpts) {\n  var isNew;\n  var xa = plotinfo.xaxis;\n  var ya = plotinfo.yaxis;\n  var hasAnimation = transitionOpts && transitionOpts.duration > 0;\n  traces.each(function (d) {\n    var trace = d[0].trace;\n    // || {} is in case the trace (specifically scatterternary)\n    // doesn't support error bars at all, but does go through\n    // the scatter.plot mechanics, which calls ErrorBars.plot\n    // internally\n    var xObj = trace.error_x || {};\n    var yObj = trace.error_y || {};\n    var keyFunc;\n    if (trace.ids) {\n      keyFunc = function keyFunc(d) {\n        return d.id;\n      };\n    }\n    var sparse = subTypes.hasMarkers(trace) && trace.marker.maxdisplayed > 0;\n    if (!yObj.visible && !xObj.visible) d = [];\n    var errorbars = d3.select(this).selectAll('g.errorbar').data(d, keyFunc);\n    errorbars.exit().remove();\n    if (!d.length) return;\n    if (!xObj.visible) errorbars.selectAll('path.xerror').remove();\n    if (!yObj.visible) errorbars.selectAll('path.yerror').remove();\n    errorbars.style('opacity', 1);\n    var enter = errorbars.enter().append('g').classed('errorbar', true);\n    if (hasAnimation) {\n      enter.style('opacity', 0).transition().duration(transitionOpts.duration).style('opacity', 1);\n    }\n    Drawing.setClipUrl(errorbars, plotinfo.layerClipId, gd);\n    errorbars.each(function (d) {\n      var errorbar = d3.select(this);\n      var coords = errorCoords(d, xa, ya);\n      if (sparse && !d.vis) return;\n      var path;\n      var yerror = errorbar.select('path.yerror');\n      if (yObj.visible && isNumeric(coords.x) && isNumeric(coords.yh) && isNumeric(coords.ys)) {\n        var yw = yObj.width;\n        path = 'M' + (coords.x - yw) + ',' + coords.yh + 'h' + 2 * yw +\n        // hat\n        'm-' + yw + ',0V' + coords.ys; // bar\n\n        if (!coords.noYS) path += 'm-' + yw + ',0h' + 2 * yw; // shoe\n\n        isNew = !yerror.size();\n        if (isNew) {\n          yerror = errorbar.append('path').style('vector-effect', 'non-scaling-stroke').classed('yerror', true);\n        } else if (hasAnimation) {\n          yerror = yerror.transition().duration(transitionOpts.duration).ease(transitionOpts.easing);\n        }\n        yerror.attr('d', path);\n      } else yerror.remove();\n      var xerror = errorbar.select('path.xerror');\n      if (xObj.visible && isNumeric(coords.y) && isNumeric(coords.xh) && isNumeric(coords.xs)) {\n        var xw = (xObj.copy_ystyle ? yObj : xObj).width;\n        path = 'M' + coords.xh + ',' + (coords.y - xw) + 'v' + 2 * xw +\n        // hat\n        'm0,-' + xw + 'H' + coords.xs; // bar\n\n        if (!coords.noXS) path += 'm0,-' + xw + 'v' + 2 * xw; // shoe\n\n        isNew = !xerror.size();\n        if (isNew) {\n          xerror = errorbar.append('path').style('vector-effect', 'non-scaling-stroke').classed('xerror', true);\n        } else if (hasAnimation) {\n          xerror = xerror.transition().duration(transitionOpts.duration).ease(transitionOpts.easing);\n        }\n        xerror.attr('d', path);\n      } else xerror.remove();\n    });\n  });\n};\n\n// compute the coordinates of the error-bar objects\nfunction errorCoords(d, xa, ya) {\n  var out = {\n    x: xa.c2p(d.x),\n    y: ya.c2p(d.y)\n  };\n\n  // calculate the error bar size and hat and shoe locations\n  if (d.yh !== undefined) {\n    out.yh = ya.c2p(d.yh);\n    out.ys = ya.c2p(d.ys);\n\n    // if the shoes go off-scale (ie log scale, error bars past zero)\n    // clip the bar and hide the shoes\n    if (!isNumeric(out.ys)) {\n      out.noYS = true;\n      out.ys = ya.c2p(d.ys, true);\n    }\n  }\n  if (d.xh !== undefined) {\n    out.xh = xa.c2p(d.xh);\n    out.xs = xa.c2p(d.xs);\n    if (!isNumeric(out.xs)) {\n      out.noXS = true;\n      out.xs = xa.c2p(d.xs, true);\n    }\n  }\n  return out;\n}","map":{"version":3,"names":["d3","require","isNumeric","Drawing","subTypes","module","exports","plot","gd","traces","plotinfo","transitionOpts","isNew","xa","xaxis","ya","yaxis","hasAnimation","duration","each","d","trace","xObj","error_x","yObj","error_y","keyFunc","ids","id","sparse","hasMarkers","marker","maxdisplayed","visible","errorbars","select","selectAll","data","exit","remove","length","style","enter","append","classed","transition","setClipUrl","layerClipId","errorbar","coords","errorCoords","vis","path","yerror","x","yh","ys","yw","width","noYS","size","ease","easing","attr","xerror","y","xh","xs","xw","copy_ystyle","noXS","out","c2p","undefined"],"sources":["/home/yasmin/Ãrea de Trabalho/Frontend/node_modules/plotly.js/src/components/errorbars/plot.js"],"sourcesContent":["/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n\n'use strict';\n\nvar d3 = require('d3');\nvar isNumeric = require('fast-isnumeric');\n\nvar Drawing = require('../drawing');\nvar subTypes = require('../../traces/scatter/subtypes');\n\nmodule.exports = function plot(gd, traces, plotinfo, transitionOpts) {\n    var isNew;\n\n    var xa = plotinfo.xaxis;\n    var ya = plotinfo.yaxis;\n\n    var hasAnimation = transitionOpts && transitionOpts.duration > 0;\n\n    traces.each(function(d) {\n        var trace = d[0].trace;\n        // || {} is in case the trace (specifically scatterternary)\n        // doesn't support error bars at all, but does go through\n        // the scatter.plot mechanics, which calls ErrorBars.plot\n        // internally\n        var xObj = trace.error_x || {};\n        var yObj = trace.error_y || {};\n\n        var keyFunc;\n\n        if(trace.ids) {\n            keyFunc = function(d) {return d.id;};\n        }\n\n        var sparse = (\n            subTypes.hasMarkers(trace) &&\n            trace.marker.maxdisplayed > 0\n        );\n\n        if(!yObj.visible && !xObj.visible) d = [];\n\n        var errorbars = d3.select(this).selectAll('g.errorbar')\n            .data(d, keyFunc);\n\n        errorbars.exit().remove();\n\n        if(!d.length) return;\n\n        if(!xObj.visible) errorbars.selectAll('path.xerror').remove();\n        if(!yObj.visible) errorbars.selectAll('path.yerror').remove();\n\n        errorbars.style('opacity', 1);\n\n        var enter = errorbars.enter().append('g')\n            .classed('errorbar', true);\n\n        if(hasAnimation) {\n            enter.style('opacity', 0).transition()\n                .duration(transitionOpts.duration)\n                .style('opacity', 1);\n        }\n\n        Drawing.setClipUrl(errorbars, plotinfo.layerClipId, gd);\n\n        errorbars.each(function(d) {\n            var errorbar = d3.select(this);\n            var coords = errorCoords(d, xa, ya);\n\n            if(sparse && !d.vis) return;\n\n            var path;\n\n            var yerror = errorbar.select('path.yerror');\n            if(yObj.visible && isNumeric(coords.x) &&\n                    isNumeric(coords.yh) &&\n                    isNumeric(coords.ys)) {\n                var yw = yObj.width;\n\n                path = 'M' + (coords.x - yw) + ',' +\n                    coords.yh + 'h' + (2 * yw) + // hat\n                    'm-' + yw + ',0V' + coords.ys; // bar\n\n\n                if(!coords.noYS) path += 'm-' + yw + ',0h' + (2 * yw); // shoe\n\n                isNew = !yerror.size();\n\n                if(isNew) {\n                    yerror = errorbar.append('path')\n                        .style('vector-effect', 'non-scaling-stroke')\n                        .classed('yerror', true);\n                } else if(hasAnimation) {\n                    yerror = yerror\n                        .transition()\n                            .duration(transitionOpts.duration)\n                            .ease(transitionOpts.easing);\n                }\n\n                yerror.attr('d', path);\n            }\n            else yerror.remove();\n\n            var xerror = errorbar.select('path.xerror');\n            if(xObj.visible && isNumeric(coords.y) &&\n                    isNumeric(coords.xh) &&\n                    isNumeric(coords.xs)) {\n                var xw = (xObj.copy_ystyle ? yObj : xObj).width;\n\n                path = 'M' + coords.xh + ',' +\n                    (coords.y - xw) + 'v' + (2 * xw) + // hat\n                    'm0,-' + xw + 'H' + coords.xs; // bar\n\n                if(!coords.noXS) path += 'm0,-' + xw + 'v' + (2 * xw); // shoe\n\n                isNew = !xerror.size();\n\n                if(isNew) {\n                    xerror = errorbar.append('path')\n                        .style('vector-effect', 'non-scaling-stroke')\n                        .classed('xerror', true);\n                } else if(hasAnimation) {\n                    xerror = xerror\n                        .transition()\n                            .duration(transitionOpts.duration)\n                            .ease(transitionOpts.easing);\n                }\n\n                xerror.attr('d', path);\n            }\n            else xerror.remove();\n        });\n    });\n};\n\n// compute the coordinates of the error-bar objects\nfunction errorCoords(d, xa, ya) {\n    var out = {\n        x: xa.c2p(d.x),\n        y: ya.c2p(d.y)\n    };\n\n    // calculate the error bar size and hat and shoe locations\n    if(d.yh !== undefined) {\n        out.yh = ya.c2p(d.yh);\n        out.ys = ya.c2p(d.ys);\n\n        // if the shoes go off-scale (ie log scale, error bars past zero)\n        // clip the bar and hide the shoes\n        if(!isNumeric(out.ys)) {\n            out.noYS = true;\n            out.ys = ya.c2p(d.ys, true);\n        }\n    }\n\n    if(d.xh !== undefined) {\n        out.xh = xa.c2p(d.xh);\n        out.xs = xa.c2p(d.xs);\n\n        if(!isNumeric(out.xs)) {\n            out.noXS = true;\n            out.xs = xa.c2p(d.xs, true);\n        }\n    }\n\n    return out;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}