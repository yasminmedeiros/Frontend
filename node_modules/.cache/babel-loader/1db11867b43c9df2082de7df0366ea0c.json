{"ast":null,"code":"import _objectSpread from\"/home/yasmin/\\xC1rea de Trabalho/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _createForOfIteratorHelper from\"/home/yasmin/\\xC1rea de Trabalho/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/home/yasmin/\\xC1rea de Trabalho/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{useEffect}from\"react\";import{useState}from\"react\";import{Spinner}from'../../components/Spinner';import Select,{createFilter}from'react-select';import CustomOption from\"../Options/CustomOption\";import Chart from'react-apexcharts';import'./styles.css';import apisaber from\"../../services/apisaber\";import{NoDataMessage}from\"../NoDataMessage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var LineChartBySchool=function LineChartBySchool(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState({value:'',label:''}),_useState4=_slicedToArray(_useState3,2),selected=_useState4[0],setSelected=_useState4[1];var _useState5=useState([{name:props.name,data:props.y}]),_useState6=_slicedToArray(_useState5,2),series=_useState6[0],setSeries=_useState6[1];var _useState7=useState({chart:{height:350,type:'line',//props.type,\nzoom:{enabled:false}},dataLabels:{enabled:false},stroke:{curve:'straight'},colors:['#A0D995'],title:{text:props.title,align:'center'},markers:{size:8},grid:{row:{colors:['#f3f3f3','transparent'],// takes an array which will be repeated on columns\nopacity:0.5}},xaxis:{categories:['2014','2015','2016','2017','2018','2019','2020','2021']}}),_useState8=_slicedToArray(_useState7,2),options=_useState8[0],setOptions=_useState8[1];function handleSelectChange(item){if(!item){props.onChange(props.id,data[0].value);setSelected({value:data[0].value,label:data[0].label});return;}props.onChange(props.id,item.value);setSelected(item);};function verifyEmptyData(data){var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;if(item>0||item!=\"0\")return true;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return false;}useEffect(function(){if(data.length===0&&props.useSelect){switch(props.by){case'school':apisaber.get(\"/enrollments/get-schools/?name=\".concat(selected.value)).then(function(response){setData(response.data);setSelected({value:response.data[0].value,label:response.data[0].label});console.log(response.data[0].value,response.data[0].label);}).catch(function(error){return console.log(error);});break;case'gre':apisaber.get(\"/enrollments/get-gres\").then(function(response){setData(response.data);setSelected({value:response.data[0].value,label:response.data[0].label});}).catch(function(error){return console.log(error);});break;case'size':apisaber.get(\"/enrollments/get-sizes\").then(function(response){setData(response.data);setSelected({value:response.data[0].value,label:response.data[0].label});}).catch(function(error){return console.log(error);});break;default:break;}}setSeries(function(prevSeries){return[_objectSpread(_objectSpread({},prevSeries[0]),{},{data:props.y})];});setOptions(function(prevOptions){return _objectSpread(_objectSpread({},prevOptions),{},{xaxis:{categories:props.x}});});},[props.x,props.y,data.length,options.xaxis.categories,props.useSelect,selected.value]);useEffect(function(){if(data.length!=0&&props.by=='school'){apisaber.get(\"/enrollments/get-schools/?name=\".concat(\"&type=\",props.administrationType)).then(function(response){setData(response.data);console.log(response.data);setSelected({value:response.data[0].value,label:response.data[0].label});}).catch(function(error){return console.log(error);});}},[props.administrationType]);return/*#__PURE__*/_jsx(\"div\",{id:props.id,className:\"container-line-chart\",children:!props.loading?/*#__PURE__*/_jsxs(\"div\",{className:\"container-select-chart\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"select\",children:[props.useSelect&&/*#__PURE__*/_jsx(Select,{className:\"basic-single\",classNamePrefix:\"custom-select\",isClearable:true,isSearchable:true,value:selected,options:data,components:{Option:CustomOption},filterOption:createFilter({ignoreAccents:false}),onChange:function onChange(value){return handleSelectChange(value);}}),/*#__PURE__*/_jsx(\"div\",{})]}),verifyEmptyData(props.y)?/*#__PURE__*/_jsx(Chart,{className:\"chart\",options:options,series:series,type:props.type,height:350}):/*#__PURE__*/_jsx(NoDataMessage,{})]}):/*#__PURE__*/_jsx(\"div\",{className:\"box-spinner-line-chart\",children:/*#__PURE__*/_jsx(Spinner,{})})});};","map":{"version":3,"sources":["/home/yasmin/√Årea de Trabalho/Frontend/src/components/LineChartBySchool/LineChartBySchool.jsx"],"names":["React","useEffect","useState","Spinner","Select","createFilter","CustomOption","Chart","apisaber","NoDataMessage","LineChartBySchool","props","data","setData","value","label","selected","setSelected","name","y","series","setSeries","chart","height","type","zoom","enabled","dataLabels","stroke","curve","colors","title","text","align","markers","size","grid","row","opacity","xaxis","categories","options","setOptions","handleSelectChange","item","onChange","id","verifyEmptyData","length","useSelect","by","get","then","response","console","log","catch","error","prevSeries","prevOptions","x","administrationType","loading","Option","ignoreAccents"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { Spinner } from '../../components/Spinner';\nimport Select, { createFilter } from 'react-select';\nimport CustomOption from \"../Options/CustomOption\";\nimport Chart from 'react-apexcharts';\nimport './styles.css';\nimport apisaber from \"../../services/apisaber\";\nimport { NoDataMessage } from \"../NoDataMessage\";\n\nexport const LineChartBySchool = (props) => {\n    const [data, setData] = useState([]);\n    const [selected, setSelected] = useState({\n        value: '',\n        label: '',\n    });\n\n    const [series, setSeries] = useState([{\n        name: props.name,\n        data: props.y,\n    }]);\n\n    const [options, setOptions] = useState({\n        chart: {\n            height: 350,\n            type: 'line', //props.type,\n            zoom: {\n                enabled: false\n            },\n        },\n        dataLabels: {\n            enabled: false\n        },\n        stroke: {\n            curve: 'straight'\n        },\n        colors: ['#A0D995'],\n        title: {\n            text: props.title,\n            align: 'center',\n        },\n        markers: {\n            size: 8,\n        },\n        grid: {\n            row: {\n                colors: ['#f3f3f3', 'transparent'], // takes an array which will be repeated on columns\n                opacity: 0.5,\n            },\n        },\n        xaxis: {\n            categories: ['2014', '2015', '2016', '2017', '2018', '2019', '2020', '2021'],\n        }\n    });\n\n    function handleSelectChange(item) {\n        if (!item) {\n            props.onChange(props.id, data[0].value);\n            setSelected({\n                value: data[0].value,\n                label: data[0].label,\n            });\n\n            return;\n        }\n        props.onChange(props.id, item.value);\n        setSelected(item);\n    };\n\n    function verifyEmptyData(data) {\n        for (const item of data) {\n            if (item > 0 || item != \"0\") return true;\n        }\n\n        return false;\n    }\n\n    useEffect(() => {\n        if (data.length === 0 && props.useSelect) {\n            switch (props.by) {\n                case 'school':\n                    apisaber.get(`/enrollments/get-schools/?name=${selected.value}`).then(response => {\n                        setData(response.data);\n                        setSelected({\n                            value: response.data[0].value,\n                            label: response.data[0].label,\n                        });\n                        console.log(response.data[0].value, response.data[0].label);\n                    }).catch(error => console.log(error));\n\n                    break;\n                case 'gre':\n                    apisaber.get(\"/enrollments/get-gres\").then(response => {\n                        setData(response.data);\n                        setSelected({\n                            value: response.data[0].value,\n                            label: response.data[0].label,\n                        });\n                    }).catch(error => console.log(error));\n\n                    break;\n                case 'size':\n                    apisaber.get(\"/enrollments/get-sizes\").then(response => {\n                        setData(response.data);\n                        setSelected({\n                            value: response.data[0].value,\n                            label: response.data[0].label,\n                        });\n                    }).catch(error => console.log(error));\n\n                    break;\n                default:\n                    break;\n            }\n        }\n        setSeries(prevSeries => {\n            return [{\n                ...prevSeries[0],\n                data: props.y,\n            }];\n        });\n\n        setOptions(prevOptions => {\n            return {\n                ...prevOptions,\n                xaxis: {\n                    categories: props.x,\n                },\n            };\n        });\n    }, [\n        props.x,\n        props.y,\n        data.length,\n        options.xaxis.categories,\n        props.useSelect,\n        selected.value\n    ]);\n\n    useEffect(() => {\n        if (data.length != 0 && props.by == 'school') {\n            apisaber.get(`/enrollments/get-schools/?name=${''}&type=${props.administrationType}`).then(response => {\n                setData(response.data);\n                console.log(response.data)\n                setSelected({\n                    value: response.data[0].value,\n                    label: response.data[0].label,\n                });\n            }).catch(error => console.log(error));\n        }\n    }, [props.administrationType])\n\n    return (\n        <div id={props.id} className=\"container-line-chart\">\n            {!props.loading  ? (\n                <div className=\"container-select-chart\">\n                    <div className=\"select\">\n                        {props.useSelect && (\n                            <Select\n                                className=\"basic-single\"\n                                classNamePrefix=\"custom-select\"\n                                isClearable={true}\n                                isSearchable={true}\n                                value={selected}\n                                options={data}\n                                components={{ Option: CustomOption }}\n                                filterOption={createFilter({ ignoreAccents: false })}\n                                onChange={value => handleSelectChange(value)}\n                            />\n                        )}\n                        <div />\n                    </div>\n                    {verifyEmptyData(props.y) ? (\n                        <Chart\n                        className=\"chart\"\n                        options={options}\n                        series={series}\n                        type={props.type}\n                        height={350}\n                    />\n                    ) : (\n                        <NoDataMessage />\n                    )}\n                </div>\n            ) : (\n                <div className=\"box-spinner-line-chart\">\n                    <Spinner />\n                </div>\n            )}\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}