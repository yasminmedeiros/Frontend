{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar d3 = require('d3');\nvar Lib = require('../../lib');\nvar Drawing = require('../../components/drawing');\nvar Colorscale = require('../../components/colorscale');\nvar gup = require('../../lib/gup');\nvar keyFun = gup.keyFun;\nvar repeat = gup.repeat;\nvar unwrap = gup.unwrap;\nvar c = require('./constants');\nvar brush = require('./axisbrush');\nvar lineLayerMaker = require('./lines');\nfunction visible(dimension) {\n  return !('visible' in dimension) || dimension.visible;\n}\nfunction dimensionExtent(dimension) {\n  var lo = dimension.range ? dimension.range[0] : Lib.aggNums(Math.min, null, dimension.values, dimension._length);\n  var hi = dimension.range ? dimension.range[1] : Lib.aggNums(Math.max, null, dimension.values, dimension._length);\n  if (isNaN(lo) || !isFinite(lo)) {\n    lo = 0;\n  }\n  if (isNaN(hi) || !isFinite(hi)) {\n    hi = 0;\n  }\n\n  // avoid a degenerate (zero-width) domain\n  if (lo === hi) {\n    if (lo === 0) {\n      // no use to multiplying zero, so add/subtract in this case\n      lo -= 1;\n      hi += 1;\n    } else {\n      // this keeps the range in the order of magnitude of the data\n      lo *= 0.9;\n      hi *= 1.1;\n    }\n  }\n  return [lo, hi];\n}\nfunction toText(formatter, texts) {\n  if (texts) {\n    return function (v, i) {\n      var text = texts[i];\n      if (text === null || text === undefined) return formatter(v);\n      return text;\n    };\n  }\n  return formatter;\n}\nfunction domainScale(height, padding, dimension, tickvals, ticktext) {\n  var extent = dimensionExtent(dimension);\n  if (tickvals) {\n    return d3.scale.ordinal().domain(tickvals.map(toText(d3.format(dimension.tickformat), ticktext))).range(tickvals.map(function (d) {\n      var unitVal = (d - extent[0]) / (extent[1] - extent[0]);\n      return height - padding + unitVal * (2 * padding - height);\n    }));\n  }\n  return d3.scale.linear().domain(extent).range([height - padding, padding]);\n}\nfunction unitToPaddedPx(height, padding) {\n  return d3.scale.linear().range([padding, height - padding]);\n}\nfunction domainToPaddedUnitScale(dimension, padFraction) {\n  return d3.scale.linear().domain(dimensionExtent(dimension)).range([padFraction, 1 - padFraction]);\n}\nfunction ordinalScale(dimension) {\n  if (!dimension.tickvals) return;\n  var extent = dimensionExtent(dimension);\n  return d3.scale.ordinal().domain(dimension.tickvals).range(dimension.tickvals.map(function (d) {\n    return (d - extent[0]) / (extent[1] - extent[0]);\n  }));\n}\nfunction unitToColorScale(cscale) {\n  var colorStops = cscale.map(function (d) {\n    return d[0];\n  });\n  var colorTuples = cscale.map(function (d) {\n    return d3.rgb(d[1]);\n  });\n  var prop = function prop(n) {\n    return function (o) {\n      return o[n];\n    };\n  };\n\n  // We can't use d3 color interpolation as we may have non-uniform color palette raster\n  // (various color stop distances).\n  var polylinearUnitScales = 'rgb'.split('').map(function (key) {\n    return d3.scale.linear().clamp(true).domain(colorStops).range(colorTuples.map(prop(key)));\n  });\n  return function (d) {\n    return polylinearUnitScales.map(function (s) {\n      return s(d);\n    });\n  };\n}\nfunction someFiltersActive(view) {\n  return view.dimensions.some(function (p) {\n    return p.brush.filterSpecified;\n  });\n}\nfunction model(layout, d, i) {\n  var cd0 = unwrap(d);\n  var trace = cd0.trace;\n  var lineColor = cd0.lineColor;\n  var line = trace.line;\n  var cscale = line.reversescale ? Colorscale.flipScale(cd0.cscale) : cd0.cscale;\n  var domain = trace.domain;\n  var dimensions = trace.dimensions;\n  var width = layout.width;\n  var labelFont = trace.labelfont;\n  var tickFont = trace.tickfont;\n  var rangeFont = trace.rangefont;\n  var lines = Lib.extendDeepNoArrays({}, line, {\n    color: lineColor.map(d3.scale.linear().domain(dimensionExtent({\n      values: lineColor,\n      range: [line.cmin, line.cmax],\n      _length: trace._length\n    }))),\n    blockLineCount: c.blockLineCount,\n    canvasOverdrag: c.overdrag * c.canvasPixelRatio\n  });\n  var groupWidth = Math.floor(width * (domain.x[1] - domain.x[0]));\n  var groupHeight = Math.floor(layout.height * (domain.y[1] - domain.y[0]));\n  var pad = layout.margin || {\n    l: 80,\n    r: 80,\n    t: 100,\n    b: 80\n  };\n  var rowContentWidth = groupWidth;\n  var rowHeight = groupHeight;\n  return {\n    key: i,\n    colCount: dimensions.filter(visible).length,\n    dimensions: dimensions,\n    tickDistance: c.tickDistance,\n    unitToColor: unitToColorScale(cscale),\n    lines: lines,\n    labelFont: labelFont,\n    tickFont: tickFont,\n    rangeFont: rangeFont,\n    layoutWidth: width,\n    layoutHeight: layout.height,\n    domain: domain,\n    translateX: domain.x[0] * width,\n    translateY: layout.height - domain.y[1] * layout.height,\n    pad: pad,\n    canvasWidth: rowContentWidth * c.canvasPixelRatio + 2 * lines.canvasOverdrag,\n    canvasHeight: rowHeight * c.canvasPixelRatio,\n    width: rowContentWidth,\n    height: rowHeight,\n    canvasPixelRatio: c.canvasPixelRatio\n  };\n}\nfunction viewModel(state, callbacks, model) {\n  var width = model.width;\n  var height = model.height;\n  var dimensions = model.dimensions;\n  var canvasPixelRatio = model.canvasPixelRatio;\n  var xScale = function xScale(d) {\n    return width * d / Math.max(1, model.colCount - 1);\n  };\n  var unitPad = c.verticalPadding / height;\n  var _unitToPaddedPx = unitToPaddedPx(height, c.verticalPadding);\n  var viewModel = {\n    key: model.key,\n    xScale: xScale,\n    model: model,\n    inBrushDrag: false // consider factoring it out and putting it in a centralized global-ish gesture state object\n  };\n\n  var uniqueKeys = {};\n  viewModel.dimensions = dimensions.filter(visible).map(function (dimension, i) {\n    var domainToPaddedUnit = domainToPaddedUnitScale(dimension, unitPad);\n    var foundKey = uniqueKeys[dimension.label];\n    uniqueKeys[dimension.label] = (foundKey || 0) + 1;\n    var key = dimension.label + (foundKey ? '__' + foundKey : '');\n    var specifiedConstraint = dimension.constraintrange;\n    var filterRangeSpecified = specifiedConstraint && specifiedConstraint.length;\n    if (filterRangeSpecified && !Array.isArray(specifiedConstraint[0])) {\n      specifiedConstraint = [specifiedConstraint];\n    }\n    var filterRange = filterRangeSpecified ? specifiedConstraint.map(function (d) {\n      return d.map(domainToPaddedUnit);\n    }) : [[0, 1]];\n    var brushMove = function brushMove() {\n      var p = viewModel;\n      p.focusLayer && p.focusLayer.render(p.panels, true);\n      var filtersActive = someFiltersActive(p);\n      if (!state.contextShown() && filtersActive) {\n        p.contextLayer && p.contextLayer.render(p.panels, true);\n        state.contextShown(true);\n      } else if (state.contextShown() && !filtersActive) {\n        p.contextLayer && p.contextLayer.render(p.panels, true, true);\n        state.contextShown(false);\n      }\n    };\n    var truncatedValues = dimension.values;\n    if (truncatedValues.length > dimension._length) {\n      truncatedValues = truncatedValues.slice(0, dimension._length);\n    }\n    var tickvals = dimension.tickvals;\n    var ticktext;\n    function makeTickItem(v, i) {\n      return {\n        val: v,\n        text: ticktext[i]\n      };\n    }\n    function sortTickItem(a, b) {\n      return a.val - b.val;\n    }\n    if (Array.isArray(tickvals) && tickvals.length) {\n      ticktext = dimension.ticktext;\n\n      // ensure ticktext and tickvals have same length\n      if (!Array.isArray(ticktext) || !ticktext.length) {\n        ticktext = tickvals.map(d3.format(dimension.tickformat));\n      } else if (ticktext.length > tickvals.length) {\n        ticktext = ticktext.slice(0, tickvals.length);\n      } else if (tickvals.length > ticktext.length) {\n        tickvals = tickvals.slice(0, ticktext.length);\n      }\n\n      // check if we need to sort tickvals/ticktext\n      for (var j = 1; j < tickvals.length; j++) {\n        if (tickvals[j] < tickvals[j - 1]) {\n          var tickItems = tickvals.map(makeTickItem).sort(sortTickItem);\n          for (var k = 0; k < tickvals.length; k++) {\n            tickvals[k] = tickItems[k].val;\n            ticktext[k] = tickItems[k].text;\n          }\n          break;\n        }\n      }\n    } else tickvals = undefined;\n    return {\n      key: key,\n      label: dimension.label,\n      tickFormat: dimension.tickformat,\n      tickvals: tickvals,\n      ticktext: ticktext,\n      ordinal: !!tickvals,\n      multiselect: dimension.multiselect,\n      xIndex: i,\n      crossfilterDimensionIndex: i,\n      visibleIndex: dimension._index,\n      height: height,\n      values: truncatedValues,\n      paddedUnitValues: truncatedValues.map(domainToPaddedUnit),\n      unitTickvals: tickvals && tickvals.map(domainToPaddedUnit),\n      xScale: xScale,\n      x: xScale(i),\n      canvasX: xScale(i) * canvasPixelRatio,\n      unitToPaddedPx: _unitToPaddedPx,\n      domainScale: domainScale(height, c.verticalPadding, dimension, tickvals, ticktext),\n      ordinalScale: ordinalScale(dimension),\n      parent: viewModel,\n      model: model,\n      brush: brush.makeBrush(state, filterRangeSpecified, filterRange, function () {\n        state.linePickActive(false);\n      }, brushMove, function (f) {\n        var p = viewModel;\n        p.focusLayer.render(p.panels, true);\n        p.pickLayer && p.pickLayer.render(p.panels, true);\n        state.linePickActive(true);\n        if (callbacks && callbacks.filterChanged) {\n          var invScale = domainToPaddedUnit.invert;\n\n          // update gd.data as if a Plotly.restyle were fired\n          var newRanges = f.map(function (r) {\n            return r.map(invScale).sort(Lib.sorterAsc);\n          }).sort(function (a, b) {\n            return a[0] - b[0];\n          });\n          callbacks.filterChanged(p.key, dimension._index, newRanges);\n        }\n      })\n    };\n  });\n  return viewModel;\n}\nfunction styleExtentTexts(selection) {\n  selection.classed(c.cn.axisExtentText, true).attr('text-anchor', 'middle').style('cursor', 'default').style('user-select', 'none');\n}\nfunction parcoordsInteractionState() {\n  var _linePickActive = true;\n  var _contextShown = false;\n  return {\n    linePickActive: function linePickActive(val) {\n      return arguments.length ? _linePickActive = !!val : _linePickActive;\n    },\n    contextShown: function contextShown(val) {\n      return arguments.length ? _contextShown = !!val : _contextShown;\n    }\n  };\n}\nmodule.exports = function (root, svg, parcoordsLineLayers, styledData, layout, callbacks) {\n  var state = parcoordsInteractionState();\n  var vm = styledData.filter(function (d) {\n    return unwrap(d).trace.visible;\n  }).map(model.bind(0, layout)).map(viewModel.bind(0, state, callbacks));\n  parcoordsLineLayers.each(function (d, i) {\n    return Lib.extendFlat(d, vm[i]);\n  });\n  var parcoordsLineLayer = parcoordsLineLayers.selectAll('.gl-canvas').each(function (d) {\n    // FIXME: figure out how to handle multiple instances\n    d.viewModel = vm[0];\n    d.model = d.viewModel ? d.viewModel.model : null;\n  });\n  var lastHovered = null;\n  var pickLayer = parcoordsLineLayer.filter(function (d) {\n    return d.pick;\n  });\n\n  // emit hover / unhover event\n  pickLayer.style('pointer-events', 'auto').on('mousemove', function (d) {\n    if (state.linePickActive() && d.lineLayer && callbacks && callbacks.hover) {\n      var event = d3.event;\n      var cw = this.width;\n      var ch = this.height;\n      var pointer = d3.mouse(this);\n      var x = pointer[0];\n      var y = pointer[1];\n      if (x < 0 || y < 0 || x >= cw || y >= ch) {\n        return;\n      }\n      var pixel = d.lineLayer.readPixel(x, ch - 1 - y);\n      var found = pixel[3] !== 0;\n      // inverse of the calcPickColor in `lines.js`; detailed comment there\n      var curveNumber = found ? pixel[2] + 256 * (pixel[1] + 256 * pixel[0]) : null;\n      var eventData = {\n        x: x,\n        y: y,\n        clientX: event.clientX,\n        clientY: event.clientY,\n        dataIndex: d.model.key,\n        curveNumber: curveNumber\n      };\n      if (curveNumber !== lastHovered) {\n        // don't unnecessarily repeat the same hit (or miss)\n        if (found) {\n          callbacks.hover(eventData);\n        } else if (callbacks.unhover) {\n          callbacks.unhover(eventData);\n        }\n        lastHovered = curveNumber;\n      }\n    }\n  });\n  parcoordsLineLayer.style('opacity', function (d) {\n    return d.pick ? 0.01 : 1;\n  });\n  svg.style('background', 'rgba(255, 255, 255, 0)');\n  var parcoordsControlOverlay = svg.selectAll('.' + c.cn.parcoords).data(vm, keyFun);\n  parcoordsControlOverlay.exit().remove();\n  parcoordsControlOverlay.enter().append('g').classed(c.cn.parcoords, true).style('shape-rendering', 'crispEdges').style('pointer-events', 'none');\n  parcoordsControlOverlay.attr('transform', function (d) {\n    return 'translate(' + d.model.translateX + ',' + d.model.translateY + ')';\n  });\n  var parcoordsControlView = parcoordsControlOverlay.selectAll('.' + c.cn.parcoordsControlView).data(repeat, keyFun);\n  parcoordsControlView.enter().append('g').classed(c.cn.parcoordsControlView, true);\n  parcoordsControlView.attr('transform', function (d) {\n    return 'translate(' + d.model.pad.l + ',' + d.model.pad.t + ')';\n  });\n  var yAxis = parcoordsControlView.selectAll('.' + c.cn.yAxis).data(function (vm) {\n    return vm.dimensions;\n  }, keyFun);\n  function updatePanelLayout(yAxis, vm) {\n    var panels = vm.panels || (vm.panels = []);\n    var dimData = yAxis.data();\n    var panelCount = dimData.length - 1;\n    for (var p = 0; p < panelCount; p++) {\n      var panel = panels[p] || (panels[p] = {});\n      var dim1 = dimData[p];\n      var dim2 = dimData[p + 1];\n      panel.dim1 = dim1;\n      panel.dim2 = dim2;\n      panel.canvasX = dim1.canvasX;\n      panel.panelSizeX = dim2.canvasX - dim1.canvasX;\n      panel.panelSizeY = vm.model.canvasHeight;\n      panel.y = 0;\n      panel.canvasY = 0;\n    }\n  }\n  yAxis.enter().append('g').classed(c.cn.yAxis, true);\n  parcoordsControlView.each(function (vm) {\n    updatePanelLayout(yAxis, vm);\n  });\n  parcoordsLineLayer.each(function (d) {\n    if (d.viewModel) {\n      if (!d.lineLayer || callbacks) {\n        // recreate in case of having callbacks e.g. restyle. Should we test for callback to be a restyle?\n        d.lineLayer = lineLayerMaker(this, d);\n      } else d.lineLayer.update(d);\n      if (d.key || d.key === 0) d.viewModel[d.key] = d.lineLayer;\n      var setChanged = !d.context ||\n      // don't update background\n      callbacks; // unless there is a callback on the context layer. Should we test the callback?\n\n      d.lineLayer.render(d.viewModel.panels, setChanged);\n    }\n  });\n  yAxis.attr('transform', function (d) {\n    return 'translate(' + d.xScale(d.xIndex) + ', 0)';\n  });\n\n  // drag column for reordering columns\n  yAxis.call(d3.behavior.drag().origin(function (d) {\n    return d;\n  }).on('drag', function (d) {\n    var p = d.parent;\n    state.linePickActive(false);\n    d.x = Math.max(-c.overdrag, Math.min(d.model.width + c.overdrag, d3.event.x));\n    d.canvasX = d.x * d.model.canvasPixelRatio;\n    yAxis.sort(function (a, b) {\n      return a.x - b.x;\n    }).each(function (dd, i) {\n      dd.xIndex = i;\n      dd.x = d === dd ? dd.x : dd.xScale(dd.xIndex);\n      dd.canvasX = dd.x * dd.model.canvasPixelRatio;\n    });\n    updatePanelLayout(yAxis, p);\n    yAxis.filter(function (dd) {\n      return Math.abs(d.xIndex - dd.xIndex) !== 0;\n    }).attr('transform', function (d) {\n      return 'translate(' + d.xScale(d.xIndex) + ', 0)';\n    });\n    d3.select(this).attr('transform', 'translate(' + d.x + ', 0)');\n    yAxis.each(function (dd, i, ii) {\n      if (ii === d.parent.key) p.dimensions[i] = dd;\n    });\n    p.contextLayer && p.contextLayer.render(p.panels, false, !someFiltersActive(p));\n    p.focusLayer.render && p.focusLayer.render(p.panels);\n  }).on('dragend', function (d) {\n    var p = d.parent;\n    d.x = d.xScale(d.xIndex);\n    d.canvasX = d.x * d.model.canvasPixelRatio;\n    updatePanelLayout(yAxis, p);\n    d3.select(this).attr('transform', function (d) {\n      return 'translate(' + d.x + ', 0)';\n    });\n    p.contextLayer && p.contextLayer.render(p.panels, false, !someFiltersActive(p));\n    p.focusLayer && p.focusLayer.render(p.panels);\n    p.pickLayer && p.pickLayer.render(p.panels, true);\n    state.linePickActive(true);\n    if (callbacks && callbacks.axesMoved) {\n      callbacks.axesMoved(p.key, p.dimensions.map(function (dd) {\n        return dd.crossfilterDimensionIndex;\n      }));\n    }\n  }));\n  yAxis.exit().remove();\n  var axisOverlays = yAxis.selectAll('.' + c.cn.axisOverlays).data(repeat, keyFun);\n  axisOverlays.enter().append('g').classed(c.cn.axisOverlays, true);\n  axisOverlays.selectAll('.' + c.cn.axis).remove();\n  var axis = axisOverlays.selectAll('.' + c.cn.axis).data(repeat, keyFun);\n  axis.enter().append('g').classed(c.cn.axis, true);\n  axis.each(function (d) {\n    var wantedTickCount = d.model.height / d.model.tickDistance;\n    var scale = d.domainScale;\n    var sdom = scale.domain();\n    d3.select(this).call(d3.svg.axis().orient('left').tickSize(4).outerTickSize(2).ticks(wantedTickCount, d.tickFormat) // works for continuous scales only...\n    .tickValues(d.ordinal ?\n    // and this works for ordinal scales\n    sdom : null).tickFormat(d.ordinal ? function (d) {\n      return d;\n    } : null).scale(scale));\n    Drawing.font(axis.selectAll('text'), d.model.tickFont);\n  });\n  axis.selectAll('.domain, .tick>line').attr('fill', 'none').attr('stroke', 'black').attr('stroke-opacity', 0.25).attr('stroke-width', '1px');\n  axis.selectAll('text').style('text-shadow', '1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff').style('cursor', 'default').style('user-select', 'none');\n  var axisHeading = axisOverlays.selectAll('.' + c.cn.axisHeading).data(repeat, keyFun);\n  axisHeading.enter().append('g').classed(c.cn.axisHeading, true);\n  var axisTitle = axisHeading.selectAll('.' + c.cn.axisTitle).data(repeat, keyFun);\n  axisTitle.enter().append('text').classed(c.cn.axisTitle, true).attr('text-anchor', 'middle').style('cursor', 'ew-resize').style('user-select', 'none').style('pointer-events', 'auto');\n  axisTitle.attr('transform', 'translate(0,' + -c.axisTitleOffset + ')').text(function (d) {\n    return d.label;\n  }).each(function (d) {\n    Drawing.font(d3.select(this), d.model.labelFont);\n  });\n  var axisExtent = axisOverlays.selectAll('.' + c.cn.axisExtent).data(repeat, keyFun);\n  axisExtent.enter().append('g').classed(c.cn.axisExtent, true);\n  var axisExtentTop = axisExtent.selectAll('.' + c.cn.axisExtentTop).data(repeat, keyFun);\n  axisExtentTop.enter().append('g').classed(c.cn.axisExtentTop, true);\n  axisExtentTop.attr('transform', 'translate(' + 0 + ',' + -c.axisExtentOffset + ')');\n  var axisExtentTopText = axisExtentTop.selectAll('.' + c.cn.axisExtentTopText).data(repeat, keyFun);\n  function extremeText(d, isTop) {\n    if (d.ordinal) return '';\n    var domain = d.domainScale.domain();\n    return d3.format(d.tickFormat)(domain[isTop ? domain.length - 1 : 0]);\n  }\n  axisExtentTopText.enter().append('text').classed(c.cn.axisExtentTopText, true).call(styleExtentTexts);\n  axisExtentTopText.text(function (d) {\n    return extremeText(d, true);\n  }).each(function (d) {\n    Drawing.font(d3.select(this), d.model.rangeFont);\n  });\n  var axisExtentBottom = axisExtent.selectAll('.' + c.cn.axisExtentBottom).data(repeat, keyFun);\n  axisExtentBottom.enter().append('g').classed(c.cn.axisExtentBottom, true);\n  axisExtentBottom.attr('transform', function (d) {\n    return 'translate(' + 0 + ',' + (d.model.height + c.axisExtentOffset) + ')';\n  });\n  var axisExtentBottomText = axisExtentBottom.selectAll('.' + c.cn.axisExtentBottomText).data(repeat, keyFun);\n  axisExtentBottomText.enter().append('text').classed(c.cn.axisExtentBottomText, true).attr('dy', '0.75em').call(styleExtentTexts);\n  axisExtentBottomText.text(function (d) {\n    return extremeText(d);\n  }).each(function (d) {\n    Drawing.font(d3.select(this), d.model.rangeFont);\n  });\n  brush.ensureAxisBrush(axisOverlays);\n};","map":{"version":3,"names":["d3","require","Lib","Drawing","Colorscale","gup","keyFun","repeat","unwrap","c","brush","lineLayerMaker","visible","dimension","dimensionExtent","lo","range","aggNums","Math","min","values","_length","hi","max","isNaN","isFinite","toText","formatter","texts","v","i","text","undefined","domainScale","height","padding","tickvals","ticktext","extent","scale","ordinal","domain","map","format","tickformat","d","unitVal","linear","unitToPaddedPx","domainToPaddedUnitScale","padFraction","ordinalScale","unitToColorScale","cscale","colorStops","colorTuples","rgb","prop","n","o","polylinearUnitScales","split","key","clamp","s","someFiltersActive","view","dimensions","some","p","filterSpecified","model","layout","cd0","trace","lineColor","line","reversescale","flipScale","width","labelFont","labelfont","tickFont","tickfont","rangeFont","rangefont","lines","extendDeepNoArrays","color","cmin","cmax","blockLineCount","canvasOverdrag","overdrag","canvasPixelRatio","groupWidth","floor","x","groupHeight","y","pad","margin","l","r","t","b","rowContentWidth","rowHeight","colCount","filter","length","tickDistance","unitToColor","layoutWidth","layoutHeight","translateX","translateY","canvasWidth","canvasHeight","viewModel","state","callbacks","xScale","unitPad","verticalPadding","_unitToPaddedPx","inBrushDrag","uniqueKeys","domainToPaddedUnit","foundKey","label","specifiedConstraint","constraintrange","filterRangeSpecified","Array","isArray","filterRange","brushMove","focusLayer","render","panels","filtersActive","contextShown","contextLayer","truncatedValues","slice","makeTickItem","val","sortTickItem","a","j","tickItems","sort","k","tickFormat","multiselect","xIndex","crossfilterDimensionIndex","visibleIndex","_index","paddedUnitValues","unitTickvals","canvasX","parent","makeBrush","linePickActive","f","pickLayer","filterChanged","invScale","invert","newRanges","sorterAsc","styleExtentTexts","selection","classed","cn","axisExtentText","attr","style","parcoordsInteractionState","arguments","module","exports","root","svg","parcoordsLineLayers","styledData","vm","bind","each","extendFlat","parcoordsLineLayer","selectAll","lastHovered","pick","on","lineLayer","hover","event","cw","ch","pointer","mouse","pixel","readPixel","found","curveNumber","eventData","clientX","clientY","dataIndex","unhover","parcoordsControlOverlay","parcoords","data","exit","remove","enter","append","parcoordsControlView","yAxis","updatePanelLayout","dimData","panelCount","panel","dim1","dim2","panelSizeX","panelSizeY","canvasY","update","setChanged","context","call","behavior","drag","origin","dd","abs","select","ii","axesMoved","axisOverlays","axis","wantedTickCount","sdom","orient","tickSize","outerTickSize","ticks","tickValues","font","axisHeading","axisTitle","axisTitleOffset","axisExtent","axisExtentTop","axisExtentOffset","axisExtentTopText","extremeText","isTop","axisExtentBottom","axisExtentBottomText","ensureAxisBrush"],"sources":["/home/yasmin/Área de Trabalho/Frontend/node_modules/plotly.js/src/traces/parcoords/parcoords.js"],"sourcesContent":["/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar d3 = require('d3');\n\nvar Lib = require('../../lib');\nvar Drawing = require('../../components/drawing');\nvar Colorscale = require('../../components/colorscale');\n\nvar gup = require('../../lib/gup');\nvar keyFun = gup.keyFun;\nvar repeat = gup.repeat;\nvar unwrap = gup.unwrap;\n\nvar c = require('./constants');\nvar brush = require('./axisbrush');\nvar lineLayerMaker = require('./lines');\n\nfunction visible(dimension) { return !('visible' in dimension) || dimension.visible; }\n\nfunction dimensionExtent(dimension) {\n\n    var lo = dimension.range ? dimension.range[0] : Lib.aggNums(Math.min, null, dimension.values, dimension._length);\n    var hi = dimension.range ? dimension.range[1] : Lib.aggNums(Math.max, null, dimension.values, dimension._length);\n\n    if(isNaN(lo) || !isFinite(lo)) {\n        lo = 0;\n    }\n\n    if(isNaN(hi) || !isFinite(hi)) {\n        hi = 0;\n    }\n\n    // avoid a degenerate (zero-width) domain\n    if(lo === hi) {\n        if(lo === 0) {\n            // no use to multiplying zero, so add/subtract in this case\n            lo -= 1;\n            hi += 1;\n        } else {\n            // this keeps the range in the order of magnitude of the data\n            lo *= 0.9;\n            hi *= 1.1;\n        }\n    }\n\n    return [lo, hi];\n}\n\nfunction toText(formatter, texts) {\n    if(texts) {\n        return function(v, i) {\n            var text = texts[i];\n            if(text === null || text === undefined) return formatter(v);\n            return text;\n        };\n    }\n    return formatter;\n}\n\nfunction domainScale(height, padding, dimension, tickvals, ticktext) {\n    var extent = dimensionExtent(dimension);\n    if(tickvals) {\n        return d3.scale.ordinal()\n            .domain(tickvals.map(toText(d3.format(dimension.tickformat), ticktext)))\n            .range(tickvals\n                .map(function(d) {\n                    var unitVal = (d - extent[0]) / (extent[1] - extent[0]);\n                    return (height - padding + unitVal * (2 * padding - height));\n                })\n            );\n    }\n    return d3.scale.linear()\n        .domain(extent)\n        .range([height - padding, padding]);\n}\n\nfunction unitToPaddedPx(height, padding) { return d3.scale.linear().range([padding, height - padding]); }\n\nfunction domainToPaddedUnitScale(dimension, padFraction) {\n    return d3.scale.linear()\n        .domain(dimensionExtent(dimension))\n        .range([padFraction, 1 - padFraction]);\n}\n\nfunction ordinalScale(dimension) {\n    if(!dimension.tickvals) return;\n\n    var extent = dimensionExtent(dimension);\n    return d3.scale.ordinal()\n        .domain(dimension.tickvals)\n        .range(dimension.tickvals.map(function(d) {\n            return (d - extent[0]) / (extent[1] - extent[0]);\n        }));\n}\n\nfunction unitToColorScale(cscale) {\n\n    var colorStops = cscale.map(function(d) { return d[0]; });\n    var colorTuples = cscale.map(function(d) { return d3.rgb(d[1]); });\n    var prop = function(n) { return function(o) { return o[n]; }; };\n\n    // We can't use d3 color interpolation as we may have non-uniform color palette raster\n    // (various color stop distances).\n    var polylinearUnitScales = 'rgb'.split('').map(function(key) {\n        return d3.scale.linear()\n            .clamp(true)\n            .domain(colorStops)\n            .range(colorTuples.map(prop(key)));\n    });\n\n    return function(d) {\n        return polylinearUnitScales.map(function(s) {\n            return s(d);\n        });\n    };\n}\n\nfunction someFiltersActive(view) {\n    return view.dimensions.some(function(p) {\n        return p.brush.filterSpecified;\n    });\n}\n\nfunction model(layout, d, i) {\n    var cd0 = unwrap(d);\n    var trace = cd0.trace;\n    var lineColor = cd0.lineColor;\n    var line = trace.line;\n    var cscale = line.reversescale ? Colorscale.flipScale(cd0.cscale) : cd0.cscale;\n    var domain = trace.domain;\n    var dimensions = trace.dimensions;\n    var width = layout.width;\n    var labelFont = trace.labelfont;\n    var tickFont = trace.tickfont;\n    var rangeFont = trace.rangefont;\n\n    var lines = Lib.extendDeepNoArrays({}, line, {\n        color: lineColor.map(d3.scale.linear().domain(dimensionExtent({\n            values: lineColor,\n            range: [line.cmin, line.cmax],\n            _length: trace._length\n        }))),\n        blockLineCount: c.blockLineCount,\n        canvasOverdrag: c.overdrag * c.canvasPixelRatio\n    });\n\n    var groupWidth = Math.floor(width * (domain.x[1] - domain.x[0]));\n    var groupHeight = Math.floor(layout.height * (domain.y[1] - domain.y[0]));\n\n    var pad = layout.margin || {l: 80, r: 80, t: 100, b: 80};\n    var rowContentWidth = groupWidth;\n    var rowHeight = groupHeight;\n\n    return {\n        key: i,\n        colCount: dimensions.filter(visible).length,\n        dimensions: dimensions,\n        tickDistance: c.tickDistance,\n        unitToColor: unitToColorScale(cscale),\n        lines: lines,\n        labelFont: labelFont,\n        tickFont: tickFont,\n        rangeFont: rangeFont,\n        layoutWidth: width,\n        layoutHeight: layout.height,\n        domain: domain,\n        translateX: domain.x[0] * width,\n        translateY: layout.height - domain.y[1] * layout.height,\n        pad: pad,\n        canvasWidth: rowContentWidth * c.canvasPixelRatio + 2 * lines.canvasOverdrag,\n        canvasHeight: rowHeight * c.canvasPixelRatio,\n        width: rowContentWidth,\n        height: rowHeight,\n        canvasPixelRatio: c.canvasPixelRatio\n    };\n}\n\nfunction viewModel(state, callbacks, model) {\n\n    var width = model.width;\n    var height = model.height;\n    var dimensions = model.dimensions;\n    var canvasPixelRatio = model.canvasPixelRatio;\n\n    var xScale = function(d) {return width * d / Math.max(1, model.colCount - 1);};\n\n    var unitPad = c.verticalPadding / height;\n    var _unitToPaddedPx = unitToPaddedPx(height, c.verticalPadding);\n\n    var viewModel = {\n        key: model.key,\n        xScale: xScale,\n        model: model,\n        inBrushDrag: false // consider factoring it out and putting it in a centralized global-ish gesture state object\n    };\n\n    var uniqueKeys = {};\n\n    viewModel.dimensions = dimensions.filter(visible).map(function(dimension, i) {\n        var domainToPaddedUnit = domainToPaddedUnitScale(dimension, unitPad);\n        var foundKey = uniqueKeys[dimension.label];\n        uniqueKeys[dimension.label] = (foundKey || 0) + 1;\n        var key = dimension.label + (foundKey ? '__' + foundKey : '');\n        var specifiedConstraint = dimension.constraintrange;\n        var filterRangeSpecified = specifiedConstraint && specifiedConstraint.length;\n        if(filterRangeSpecified && !Array.isArray(specifiedConstraint[0])) {\n            specifiedConstraint = [specifiedConstraint];\n        }\n        var filterRange = filterRangeSpecified ?\n            specifiedConstraint.map(function(d) { return d.map(domainToPaddedUnit); }) :\n            [[0, 1]];\n        var brushMove = function() {\n            var p = viewModel;\n            p.focusLayer && p.focusLayer.render(p.panels, true);\n            var filtersActive = someFiltersActive(p);\n            if(!state.contextShown() && filtersActive) {\n                p.contextLayer && p.contextLayer.render(p.panels, true);\n                state.contextShown(true);\n            } else if(state.contextShown() && !filtersActive) {\n                p.contextLayer && p.contextLayer.render(p.panels, true, true);\n                state.contextShown(false);\n            }\n        };\n\n        var truncatedValues = dimension.values;\n        if(truncatedValues.length > dimension._length) {\n            truncatedValues = truncatedValues.slice(0, dimension._length);\n        }\n\n        var tickvals = dimension.tickvals;\n        var ticktext;\n        function makeTickItem(v, i) { return {val: v, text: ticktext[i]}; }\n        function sortTickItem(a, b) { return a.val - b.val; }\n        if(Array.isArray(tickvals) && tickvals.length) {\n            ticktext = dimension.ticktext;\n\n            // ensure ticktext and tickvals have same length\n            if(!Array.isArray(ticktext) || !ticktext.length) {\n                ticktext = tickvals.map(d3.format(dimension.tickformat));\n            }\n            else if(ticktext.length > tickvals.length) {\n                ticktext = ticktext.slice(0, tickvals.length);\n            }\n            else if(tickvals.length > ticktext.length) {\n                tickvals = tickvals.slice(0, ticktext.length);\n            }\n\n            // check if we need to sort tickvals/ticktext\n            for(var j = 1; j < tickvals.length; j++) {\n                if(tickvals[j] < tickvals[j - 1]) {\n                    var tickItems = tickvals.map(makeTickItem).sort(sortTickItem);\n                    for(var k = 0; k < tickvals.length; k++) {\n                        tickvals[k] = tickItems[k].val;\n                        ticktext[k] = tickItems[k].text;\n                    }\n                    break;\n                }\n            }\n        }\n        else tickvals = undefined;\n\n        return {\n            key: key,\n            label: dimension.label,\n            tickFormat: dimension.tickformat,\n            tickvals: tickvals,\n            ticktext: ticktext,\n            ordinal: !!tickvals,\n            multiselect: dimension.multiselect,\n            xIndex: i,\n            crossfilterDimensionIndex: i,\n            visibleIndex: dimension._index,\n            height: height,\n            values: truncatedValues,\n            paddedUnitValues: truncatedValues.map(domainToPaddedUnit),\n            unitTickvals: tickvals && tickvals.map(domainToPaddedUnit),\n            xScale: xScale,\n            x: xScale(i),\n            canvasX: xScale(i) * canvasPixelRatio,\n            unitToPaddedPx: _unitToPaddedPx,\n            domainScale: domainScale(height, c.verticalPadding, dimension, tickvals, ticktext),\n            ordinalScale: ordinalScale(dimension),\n            parent: viewModel,\n            model: model,\n            brush: brush.makeBrush(\n                state,\n                filterRangeSpecified,\n                filterRange,\n                function() {\n                    state.linePickActive(false);\n                },\n                brushMove,\n                function(f) {\n                    var p = viewModel;\n                    p.focusLayer.render(p.panels, true);\n                    p.pickLayer && p.pickLayer.render(p.panels, true);\n                    state.linePickActive(true);\n                    if(callbacks && callbacks.filterChanged) {\n                        var invScale = domainToPaddedUnit.invert;\n\n                        // update gd.data as if a Plotly.restyle were fired\n                        var newRanges = f.map(function(r) {\n                            return r.map(invScale).sort(Lib.sorterAsc);\n                        }).sort(function(a, b) { return a[0] - b[0]; });\n                        callbacks.filterChanged(p.key, dimension._index, newRanges);\n                    }\n                }\n            )\n        };\n    });\n\n    return viewModel;\n}\n\nfunction styleExtentTexts(selection) {\n    selection\n        .classed(c.cn.axisExtentText, true)\n        .attr('text-anchor', 'middle')\n        .style('cursor', 'default')\n        .style('user-select', 'none');\n}\n\nfunction parcoordsInteractionState() {\n    var linePickActive = true;\n    var contextShown = false;\n    return {\n        linePickActive: function(val) {return arguments.length ? linePickActive = !!val : linePickActive;},\n        contextShown: function(val) {return arguments.length ? contextShown = !!val : contextShown;}\n    };\n}\n\nmodule.exports = function(root, svg, parcoordsLineLayers, styledData, layout, callbacks) {\n\n    var state = parcoordsInteractionState();\n\n    var vm = styledData\n        .filter(function(d) { return unwrap(d).trace.visible; })\n        .map(model.bind(0, layout))\n        .map(viewModel.bind(0, state, callbacks));\n\n    parcoordsLineLayers.each(function(d, i) {\n        return Lib.extendFlat(d, vm[i]);\n    });\n\n    var parcoordsLineLayer = parcoordsLineLayers.selectAll('.gl-canvas')\n        .each(function(d) {\n            // FIXME: figure out how to handle multiple instances\n            d.viewModel = vm[0];\n            d.model = d.viewModel ? d.viewModel.model : null;\n        });\n\n    var lastHovered = null;\n\n    var pickLayer = parcoordsLineLayer.filter(function(d) {return d.pick;});\n\n    // emit hover / unhover event\n    pickLayer\n        .style('pointer-events', 'auto')\n        .on('mousemove', function(d) {\n            if(state.linePickActive() && d.lineLayer && callbacks && callbacks.hover) {\n                var event = d3.event;\n                var cw = this.width;\n                var ch = this.height;\n                var pointer = d3.mouse(this);\n                var x = pointer[0];\n                var y = pointer[1];\n\n                if(x < 0 || y < 0 || x >= cw || y >= ch) {\n                    return;\n                }\n                var pixel = d.lineLayer.readPixel(x, ch - 1 - y);\n                var found = pixel[3] !== 0;\n                // inverse of the calcPickColor in `lines.js`; detailed comment there\n                var curveNumber = found ? pixel[2] + 256 * (pixel[1] + 256 * pixel[0]) : null;\n                var eventData = {\n                    x: x,\n                    y: y,\n                    clientX: event.clientX,\n                    clientY: event.clientY,\n                    dataIndex: d.model.key,\n                    curveNumber: curveNumber\n                };\n                if(curveNumber !== lastHovered) { // don't unnecessarily repeat the same hit (or miss)\n                    if(found) {\n                        callbacks.hover(eventData);\n                    } else if(callbacks.unhover) {\n                        callbacks.unhover(eventData);\n                    }\n                    lastHovered = curveNumber;\n                }\n            }\n        });\n\n    parcoordsLineLayer\n        .style('opacity', function(d) {return d.pick ? 0.01 : 1;});\n\n    svg.style('background', 'rgba(255, 255, 255, 0)');\n    var parcoordsControlOverlay = svg.selectAll('.' + c.cn.parcoords)\n        .data(vm, keyFun);\n\n    parcoordsControlOverlay.exit().remove();\n\n    parcoordsControlOverlay.enter()\n        .append('g')\n        .classed(c.cn.parcoords, true)\n        .style('shape-rendering', 'crispEdges')\n        .style('pointer-events', 'none');\n\n    parcoordsControlOverlay.attr('transform', function(d) {\n        return 'translate(' + d.model.translateX + ',' + d.model.translateY + ')';\n    });\n\n    var parcoordsControlView = parcoordsControlOverlay.selectAll('.' + c.cn.parcoordsControlView)\n        .data(repeat, keyFun);\n\n    parcoordsControlView.enter()\n        .append('g')\n        .classed(c.cn.parcoordsControlView, true);\n\n    parcoordsControlView.attr('transform', function(d) {\n        return 'translate(' + d.model.pad.l + ',' + d.model.pad.t + ')';\n    });\n\n    var yAxis = parcoordsControlView.selectAll('.' + c.cn.yAxis)\n        .data(function(vm) { return vm.dimensions; }, keyFun);\n\n    function updatePanelLayout(yAxis, vm) {\n        var panels = vm.panels || (vm.panels = []);\n        var dimData = yAxis.data();\n        var panelCount = dimData.length - 1;\n        for(var p = 0; p < panelCount; p++) {\n            var panel = panels[p] || (panels[p] = {});\n            var dim1 = dimData[p];\n            var dim2 = dimData[p + 1];\n            panel.dim1 = dim1;\n            panel.dim2 = dim2;\n            panel.canvasX = dim1.canvasX;\n            panel.panelSizeX = dim2.canvasX - dim1.canvasX;\n            panel.panelSizeY = vm.model.canvasHeight;\n            panel.y = 0;\n            panel.canvasY = 0;\n        }\n    }\n\n    yAxis.enter()\n        .append('g')\n        .classed(c.cn.yAxis, true);\n\n    parcoordsControlView.each(function(vm) {\n        updatePanelLayout(yAxis, vm);\n    });\n\n    parcoordsLineLayer\n        .each(function(d) {\n            if(d.viewModel) {\n                if(!d.lineLayer || callbacks) { // recreate in case of having callbacks e.g. restyle. Should we test for callback to be a restyle?\n                    d.lineLayer = lineLayerMaker(this, d);\n                } else d.lineLayer.update(d);\n\n                if(d.key || d.key === 0) d.viewModel[d.key] = d.lineLayer;\n\n                var setChanged = (!d.context || // don't update background\n                                  callbacks);   // unless there is a callback on the context layer. Should we test the callback?\n\n                d.lineLayer.render(d.viewModel.panels, setChanged);\n            }\n        });\n\n    yAxis.attr('transform', function(d) {\n        return 'translate(' + d.xScale(d.xIndex) + ', 0)';\n    });\n\n    // drag column for reordering columns\n    yAxis.call(d3.behavior.drag()\n        .origin(function(d) { return d; })\n        .on('drag', function(d) {\n            var p = d.parent;\n            state.linePickActive(false);\n            d.x = Math.max(-c.overdrag, Math.min(d.model.width + c.overdrag, d3.event.x));\n            d.canvasX = d.x * d.model.canvasPixelRatio;\n            yAxis\n                .sort(function(a, b) { return a.x - b.x; })\n                .each(function(dd, i) {\n                    dd.xIndex = i;\n                    dd.x = d === dd ? dd.x : dd.xScale(dd.xIndex);\n                    dd.canvasX = dd.x * dd.model.canvasPixelRatio;\n                });\n\n            updatePanelLayout(yAxis, p);\n\n            yAxis.filter(function(dd) { return Math.abs(d.xIndex - dd.xIndex) !== 0; })\n                .attr('transform', function(d) { return 'translate(' + d.xScale(d.xIndex) + ', 0)'; });\n            d3.select(this).attr('transform', 'translate(' + d.x + ', 0)');\n            yAxis.each(function(dd, i, ii) { if(ii === d.parent.key) p.dimensions[i] = dd; });\n            p.contextLayer && p.contextLayer.render(p.panels, false, !someFiltersActive(p));\n            p.focusLayer.render && p.focusLayer.render(p.panels);\n        })\n        .on('dragend', function(d) {\n            var p = d.parent;\n            d.x = d.xScale(d.xIndex);\n            d.canvasX = d.x * d.model.canvasPixelRatio;\n            updatePanelLayout(yAxis, p);\n            d3.select(this)\n                .attr('transform', function(d) { return 'translate(' + d.x + ', 0)'; });\n            p.contextLayer && p.contextLayer.render(p.panels, false, !someFiltersActive(p));\n            p.focusLayer && p.focusLayer.render(p.panels);\n            p.pickLayer && p.pickLayer.render(p.panels, true);\n            state.linePickActive(true);\n\n            if(callbacks && callbacks.axesMoved) {\n                callbacks.axesMoved(p.key, p.dimensions.map(function(dd) {return dd.crossfilterDimensionIndex;}));\n            }\n        })\n    );\n\n    yAxis.exit()\n        .remove();\n\n    var axisOverlays = yAxis.selectAll('.' + c.cn.axisOverlays)\n        .data(repeat, keyFun);\n\n    axisOverlays.enter()\n        .append('g')\n        .classed(c.cn.axisOverlays, true);\n\n    axisOverlays.selectAll('.' + c.cn.axis).remove();\n\n    var axis = axisOverlays.selectAll('.' + c.cn.axis)\n        .data(repeat, keyFun);\n\n    axis.enter()\n        .append('g')\n        .classed(c.cn.axis, true);\n\n    axis\n        .each(function(d) {\n            var wantedTickCount = d.model.height / d.model.tickDistance;\n            var scale = d.domainScale;\n            var sdom = scale.domain();\n            d3.select(this)\n                .call(d3.svg.axis()\n                    .orient('left')\n                    .tickSize(4)\n                    .outerTickSize(2)\n                    .ticks(wantedTickCount, d.tickFormat) // works for continuous scales only...\n                    .tickValues(d.ordinal ? // and this works for ordinal scales\n                        sdom :\n                        null)\n                    .tickFormat(d.ordinal ? function(d) { return d; } : null)\n                    .scale(scale));\n            Drawing.font(axis.selectAll('text'), d.model.tickFont);\n        });\n\n    axis.selectAll('.domain, .tick>line')\n        .attr('fill', 'none')\n        .attr('stroke', 'black')\n        .attr('stroke-opacity', 0.25)\n        .attr('stroke-width', '1px');\n\n    axis.selectAll('text')\n        .style('text-shadow', '1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff')\n        .style('cursor', 'default')\n        .style('user-select', 'none');\n\n    var axisHeading = axisOverlays.selectAll('.' + c.cn.axisHeading)\n        .data(repeat, keyFun);\n\n    axisHeading.enter()\n        .append('g')\n        .classed(c.cn.axisHeading, true);\n\n    var axisTitle = axisHeading.selectAll('.' + c.cn.axisTitle)\n        .data(repeat, keyFun);\n\n    axisTitle.enter()\n        .append('text')\n        .classed(c.cn.axisTitle, true)\n        .attr('text-anchor', 'middle')\n        .style('cursor', 'ew-resize')\n        .style('user-select', 'none')\n        .style('pointer-events', 'auto');\n\n    axisTitle\n        .attr('transform', 'translate(0,' + -c.axisTitleOffset + ')')\n        .text(function(d) { return d.label; })\n        .each(function(d) { Drawing.font(d3.select(this), d.model.labelFont); });\n\n    var axisExtent = axisOverlays.selectAll('.' + c.cn.axisExtent)\n        .data(repeat, keyFun);\n\n    axisExtent.enter()\n        .append('g')\n        .classed(c.cn.axisExtent, true);\n\n    var axisExtentTop = axisExtent.selectAll('.' + c.cn.axisExtentTop)\n        .data(repeat, keyFun);\n\n    axisExtentTop.enter()\n        .append('g')\n        .classed(c.cn.axisExtentTop, true);\n\n    axisExtentTop\n        .attr('transform', 'translate(' + 0 + ',' + -c.axisExtentOffset + ')');\n\n    var axisExtentTopText = axisExtentTop.selectAll('.' + c.cn.axisExtentTopText)\n        .data(repeat, keyFun);\n\n    function extremeText(d, isTop) {\n        if(d.ordinal) return '';\n        var domain = d.domainScale.domain();\n        return d3.format(d.tickFormat)(domain[isTop ? domain.length - 1 : 0]);\n    }\n\n    axisExtentTopText.enter()\n        .append('text')\n        .classed(c.cn.axisExtentTopText, true)\n        .call(styleExtentTexts);\n\n    axisExtentTopText\n        .text(function(d) { return extremeText(d, true); })\n        .each(function(d) { Drawing.font(d3.select(this), d.model.rangeFont); });\n\n    var axisExtentBottom = axisExtent.selectAll('.' + c.cn.axisExtentBottom)\n        .data(repeat, keyFun);\n\n    axisExtentBottom.enter()\n        .append('g')\n        .classed(c.cn.axisExtentBottom, true);\n\n    axisExtentBottom\n        .attr('transform', function(d) {\n            return 'translate(' + 0 + ',' + (d.model.height + c.axisExtentOffset) + ')';\n        });\n\n    var axisExtentBottomText = axisExtentBottom.selectAll('.' + c.cn.axisExtentBottomText)\n        .data(repeat, keyFun);\n\n    axisExtentBottomText.enter()\n        .append('text')\n        .classed(c.cn.axisExtentBottomText, true)\n        .attr('dy', '0.75em')\n        .call(styleExtentTexts);\n\n    axisExtentBottomText\n        .text(function(d) { return extremeText(d); })\n        .each(function(d) { Drawing.font(d3.select(this), d.model.rangeFont); });\n\n    brush.ensureAxisBrush(axisOverlays);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}