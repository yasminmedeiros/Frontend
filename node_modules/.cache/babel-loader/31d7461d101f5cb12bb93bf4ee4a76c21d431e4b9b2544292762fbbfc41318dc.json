{"ast":null,"code":"'use strict';\n\nmodule.exports = createOrbitController;\nvar filterVector = require('filtered-vector');\nvar lookAt = require('gl-mat4/lookAt');\nvar mat4FromQuat = require('gl-mat4/fromQuat');\nvar invert44 = require('gl-mat4/invert');\nvar quatFromFrame = require('./lib/quatFromFrame');\nfunction len3(x, y, z) {\n  return Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2) + Math.pow(z, 2));\n}\nfunction len4(w, x, y, z) {\n  return Math.sqrt(Math.pow(w, 2) + Math.pow(x, 2) + Math.pow(y, 2) + Math.pow(z, 2));\n}\nfunction normalize4(out, a) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  var al = len4(ax, ay, az, aw);\n  if (al > 1e-6) {\n    out[0] = ax / al;\n    out[1] = ay / al;\n    out[2] = az / al;\n    out[3] = aw / al;\n  } else {\n    out[0] = out[1] = out[2] = 0.0;\n    out[3] = 1.0;\n  }\n}\nfunction OrbitCameraController(initQuat, initCenter, initRadius) {\n  this.radius = filterVector([initRadius]);\n  this.center = filterVector(initCenter);\n  this.rotation = filterVector(initQuat);\n  this.computedRadius = this.radius.curve(0);\n  this.computedCenter = this.center.curve(0);\n  this.computedRotation = this.rotation.curve(0);\n  this.computedUp = [0.1, 0, 0];\n  this.computedEye = [0.1, 0, 0];\n  this.computedMatrix = [0.1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n  this.recalcMatrix(0);\n}\nvar proto = OrbitCameraController.prototype;\nproto.lastT = function () {\n  return Math.max(this.radius.lastT(), this.center.lastT(), this.rotation.lastT());\n};\nproto.recalcMatrix = function (t) {\n  this.radius.curve(t);\n  this.center.curve(t);\n  this.rotation.curve(t);\n  var quat = this.computedRotation;\n  normalize4(quat, quat);\n  var mat = this.computedMatrix;\n  mat4FromQuat(mat, quat);\n  var center = this.computedCenter;\n  var eye = this.computedEye;\n  var up = this.computedUp;\n  var radius = Math.exp(this.computedRadius[0]);\n  eye[0] = center[0] + radius * mat[2];\n  eye[1] = center[1] + radius * mat[6];\n  eye[2] = center[2] + radius * mat[10];\n  up[0] = mat[1];\n  up[1] = mat[5];\n  up[2] = mat[9];\n  for (var i = 0; i < 3; ++i) {\n    var rr = 0.0;\n    for (var j = 0; j < 3; ++j) {\n      rr += mat[i + 4 * j] * eye[j];\n    }\n    mat[12 + i] = -rr;\n  }\n};\nproto.getMatrix = function (t, result) {\n  this.recalcMatrix(t);\n  var m = this.computedMatrix;\n  if (result) {\n    for (var i = 0; i < 16; ++i) {\n      result[i] = m[i];\n    }\n    return result;\n  }\n  return m;\n};\nproto.idle = function (t) {\n  this.center.idle(t);\n  this.radius.idle(t);\n  this.rotation.idle(t);\n};\nproto.flush = function (t) {\n  this.center.flush(t);\n  this.radius.flush(t);\n  this.rotation.flush(t);\n};\nproto.pan = function (t, dx, dy, dz) {\n  dx = dx || 0.0;\n  dy = dy || 0.0;\n  dz = dz || 0.0;\n  this.recalcMatrix(t);\n  var mat = this.computedMatrix;\n  var ux = mat[1];\n  var uy = mat[5];\n  var uz = mat[9];\n  var ul = len3(ux, uy, uz);\n  ux /= ul;\n  uy /= ul;\n  uz /= ul;\n  var rx = mat[0];\n  var ry = mat[4];\n  var rz = mat[8];\n  var ru = rx * ux + ry * uy + rz * uz;\n  rx -= ux * ru;\n  ry -= uy * ru;\n  rz -= uz * ru;\n  var rl = len3(rx, ry, rz);\n  rx /= rl;\n  ry /= rl;\n  rz /= rl;\n  var fx = mat[2];\n  var fy = mat[6];\n  var fz = mat[10];\n  var fu = fx * ux + fy * uy + fz * uz;\n  var fr = fx * rx + fy * ry + fz * rz;\n  fx -= fu * ux + fr * rx;\n  fy -= fu * uy + fr * ry;\n  fz -= fu * uz + fr * rz;\n  var fl = len3(fx, fy, fz);\n  fx /= fl;\n  fy /= fl;\n  fz /= fl;\n  var vx = rx * dx + ux * dy;\n  var vy = ry * dx + uy * dy;\n  var vz = rz * dx + uz * dy;\n  this.center.move(t, vx, vy, vz);\n\n  //Update z-component of radius\n  var radius = Math.exp(this.computedRadius[0]);\n  radius = Math.max(1e-4, radius + dz);\n  this.radius.set(t, Math.log(radius));\n};\nproto.rotate = function (t, dx, dy, dz) {\n  this.recalcMatrix(t);\n  dx = dx || 0.0;\n  dy = dy || 0.0;\n  var mat = this.computedMatrix;\n  var rx = mat[0];\n  var ry = mat[4];\n  var rz = mat[8];\n  var ux = mat[1];\n  var uy = mat[5];\n  var uz = mat[9];\n  var fx = mat[2];\n  var fy = mat[6];\n  var fz = mat[10];\n  var qx = dx * rx + dy * ux;\n  var qy = dx * ry + dy * uy;\n  var qz = dx * rz + dy * uz;\n  var bx = -(fy * qz - fz * qy);\n  var by = -(fz * qx - fx * qz);\n  var bz = -(fx * qy - fy * qx);\n  var bw = Math.sqrt(Math.max(0.0, 1.0 - Math.pow(bx, 2) - Math.pow(by, 2) - Math.pow(bz, 2)));\n  var bl = len4(bx, by, bz, bw);\n  if (bl > 1e-6) {\n    bx /= bl;\n    by /= bl;\n    bz /= bl;\n    bw /= bl;\n  } else {\n    bx = by = bz = 0.0;\n    bw = 1.0;\n  }\n  var rotation = this.computedRotation;\n  var ax = rotation[0];\n  var ay = rotation[1];\n  var az = rotation[2];\n  var aw = rotation[3];\n  var cx = ax * bw + aw * bx + ay * bz - az * by;\n  var cy = ay * bw + aw * by + az * bx - ax * bz;\n  var cz = az * bw + aw * bz + ax * by - ay * bx;\n  var cw = aw * bw - ax * bx - ay * by - az * bz;\n\n  //Apply roll\n  if (dz) {\n    bx = fx;\n    by = fy;\n    bz = fz;\n    var s = Math.sin(dz) / len3(bx, by, bz);\n    bx *= s;\n    by *= s;\n    bz *= s;\n    bw = Math.cos(dx);\n    cx = cx * bw + cw * bx + cy * bz - cz * by;\n    cy = cy * bw + cw * by + cz * bx - cx * bz;\n    cz = cz * bw + cw * bz + cx * by - cy * bx;\n    cw = cw * bw - cx * bx - cy * by - cz * bz;\n  }\n  var cl = len4(cx, cy, cz, cw);\n  if (cl > 1e-6) {\n    cx /= cl;\n    cy /= cl;\n    cz /= cl;\n    cw /= cl;\n  } else {\n    cx = cy = cz = 0.0;\n    cw = 1.0;\n  }\n  this.rotation.set(t, cx, cy, cz, cw);\n};\nproto.lookAt = function (t, eye, center, up) {\n  this.recalcMatrix(t);\n  center = center || this.computedCenter;\n  eye = eye || this.computedEye;\n  up = up || this.computedUp;\n  var mat = this.computedMatrix;\n  lookAt(mat, eye, center, up);\n  var rotation = this.computedRotation;\n  quatFromFrame(rotation, mat[0], mat[1], mat[2], mat[4], mat[5], mat[6], mat[8], mat[9], mat[10]);\n  normalize4(rotation, rotation);\n  this.rotation.set(t, rotation[0], rotation[1], rotation[2], rotation[3]);\n  var fl = 0.0;\n  for (var i = 0; i < 3; ++i) {\n    fl += Math.pow(center[i] - eye[i], 2);\n  }\n  this.radius.set(t, 0.5 * Math.log(Math.max(fl, 1e-6)));\n  this.center.set(t, center[0], center[1], center[2]);\n};\nproto.translate = function (t, dx, dy, dz) {\n  this.center.move(t, dx || 0.0, dy || 0.0, dz || 0.0);\n};\nproto.setMatrix = function (t, matrix) {\n  var rotation = this.computedRotation;\n  quatFromFrame(rotation, matrix[0], matrix[1], matrix[2], matrix[4], matrix[5], matrix[6], matrix[8], matrix[9], matrix[10]);\n  normalize4(rotation, rotation);\n  this.rotation.set(t, rotation[0], rotation[1], rotation[2], rotation[3]);\n  var mat = this.computedMatrix;\n  invert44(mat, matrix);\n  var w = mat[15];\n  if (Math.abs(w) > 1e-6) {\n    var cx = mat[12] / w;\n    var cy = mat[13] / w;\n    var cz = mat[14] / w;\n    this.recalcMatrix(t);\n    var r = Math.exp(this.computedRadius[0]);\n    this.center.set(t, cx - mat[2] * r, cy - mat[6] * r, cz - mat[10] * r);\n    this.radius.idle(t);\n  } else {\n    this.center.idle(t);\n    this.radius.idle(t);\n  }\n};\nproto.setDistance = function (t, d) {\n  if (d > 0) {\n    this.radius.set(t, Math.log(d));\n  }\n};\nproto.setDistanceLimits = function (lo, hi) {\n  if (lo > 0) {\n    lo = Math.log(lo);\n  } else {\n    lo = -Infinity;\n  }\n  if (hi > 0) {\n    hi = Math.log(hi);\n  } else {\n    hi = Infinity;\n  }\n  hi = Math.max(hi, lo);\n  this.radius.bounds[0][0] = lo;\n  this.radius.bounds[1][0] = hi;\n};\nproto.getDistanceLimits = function (out) {\n  var bounds = this.radius.bounds;\n  if (out) {\n    out[0] = Math.exp(bounds[0][0]);\n    out[1] = Math.exp(bounds[1][0]);\n    return out;\n  }\n  return [Math.exp(bounds[0][0]), Math.exp(bounds[1][0])];\n};\nproto.toJSON = function () {\n  this.recalcMatrix(this.lastT());\n  return {\n    center: this.computedCenter.slice(),\n    rotation: this.computedRotation.slice(),\n    distance: Math.log(this.computedRadius[0]),\n    zoomMin: this.radius.bounds[0][0],\n    zoomMax: this.radius.bounds[1][0]\n  };\n};\nproto.fromJSON = function (options) {\n  var t = this.lastT();\n  var c = options.center;\n  if (c) {\n    this.center.set(t, c[0], c[1], c[2]);\n  }\n  var r = options.rotation;\n  if (r) {\n    this.rotation.set(t, r[0], r[1], r[2], r[3]);\n  }\n  var d = options.distance;\n  if (d && d > 0) {\n    this.radius.set(t, Math.log(d));\n  }\n  this.setDistanceLimits(options.zoomMin, options.zoomMax);\n};\nfunction createOrbitController(options) {\n  options = options || {};\n  var center = options.center || [0, 0, 0];\n  var rotation = options.rotation || [0, 0, 0, 1];\n  var radius = options.radius || 1.0;\n  center = [].slice.call(center, 0, 3);\n  rotation = [].slice.call(rotation, 0, 4);\n  normalize4(rotation, rotation);\n  var result = new OrbitCameraController(rotation, center, Math.log(radius));\n  result.setDistanceLimits(options.zoomMin, options.zoomMax);\n  if ('eye' in options || 'up' in options) {\n    result.lookAt(0, options.eye, options.center, options.up);\n  }\n  return result;\n}","map":{"version":3,"names":["module","exports","createOrbitController","filterVector","require","lookAt","mat4FromQuat","invert44","quatFromFrame","len3","x","y","z","Math","sqrt","pow","len4","w","normalize4","out","a","ax","ay","az","aw","al","OrbitCameraController","initQuat","initCenter","initRadius","radius","center","rotation","computedRadius","curve","computedCenter","computedRotation","computedUp","computedEye","computedMatrix","recalcMatrix","proto","prototype","lastT","max","t","quat","mat","eye","up","exp","i","rr","j","getMatrix","result","m","idle","flush","pan","dx","dy","dz","ux","uy","uz","ul","rx","ry","rz","ru","rl","fx","fy","fz","fu","fr","fl","vx","vy","vz","move","set","log","rotate","qx","qy","qz","bx","by","bz","bw","bl","cx","cy","cz","cw","s","sin","cos","cl","translate","setMatrix","matrix","abs","r","setDistance","d","setDistanceLimits","lo","hi","Infinity","bounds","getDistanceLimits","toJSON","slice","distance","zoomMin","zoomMax","fromJSON","options","c","call"],"sources":["/home/yasmin/Área de Trabalho/Frontend/node_modules/orbit-camera-controller/orbit.js"],"sourcesContent":["'use strict'\n\nmodule.exports = createOrbitController\n\nvar filterVector  = require('filtered-vector')\nvar lookAt        = require('gl-mat4/lookAt')\nvar mat4FromQuat  = require('gl-mat4/fromQuat')\nvar invert44      = require('gl-mat4/invert')\nvar quatFromFrame = require('./lib/quatFromFrame')\n\nfunction len3(x,y,z) {\n  return Math.sqrt(Math.pow(x,2) + Math.pow(y,2) + Math.pow(z,2))\n}\n\nfunction len4(w,x,y,z) {\n  return Math.sqrt(Math.pow(w,2) + Math.pow(x,2) + Math.pow(y,2) + Math.pow(z,2))\n}\n\nfunction normalize4(out, a) {\n  var ax = a[0]\n  var ay = a[1]\n  var az = a[2]\n  var aw = a[3]\n  var al = len4(ax, ay, az, aw)\n  if(al > 1e-6) {\n    out[0] = ax/al\n    out[1] = ay/al\n    out[2] = az/al\n    out[3] = aw/al\n  } else {\n    out[0] = out[1] = out[2] = 0.0\n    out[3] = 1.0\n  }\n}\n\nfunction OrbitCameraController(initQuat, initCenter, initRadius) {\n  this.radius    = filterVector([initRadius])\n  this.center    = filterVector(initCenter)\n  this.rotation  = filterVector(initQuat)\n\n  this.computedRadius   = this.radius.curve(0)\n  this.computedCenter   = this.center.curve(0)\n  this.computedRotation = this.rotation.curve(0)\n  this.computedUp       = [0.1,0,0]\n  this.computedEye      = [0.1,0,0]\n  this.computedMatrix   = [0.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]\n\n  this.recalcMatrix(0)\n}\n\nvar proto = OrbitCameraController.prototype\n\nproto.lastT = function() {\n  return Math.max(\n    this.radius.lastT(),\n    this.center.lastT(),\n    this.rotation.lastT())\n}\n\nproto.recalcMatrix = function(t) {\n  this.radius.curve(t)\n  this.center.curve(t)\n  this.rotation.curve(t)\n\n  var quat = this.computedRotation\n  normalize4(quat, quat)\n\n  var mat = this.computedMatrix\n  mat4FromQuat(mat, quat)\n\n  var center = this.computedCenter\n  var eye    = this.computedEye\n  var up     = this.computedUp\n  var radius = Math.exp(this.computedRadius[0])\n\n  eye[0] = center[0] + radius * mat[2]\n  eye[1] = center[1] + radius * mat[6]\n  eye[2] = center[2] + radius * mat[10]\n  up[0] = mat[1]\n  up[1] = mat[5]\n  up[2] = mat[9]\n\n  for(var i=0; i<3; ++i) {\n    var rr = 0.0\n    for(var j=0; j<3; ++j) {\n      rr += mat[i+4*j] * eye[j]\n    }\n    mat[12+i] = -rr\n  }\n}\n\nproto.getMatrix = function(t, result) {\n  this.recalcMatrix(t)\n  var m = this.computedMatrix\n  if(result) {\n    for(var i=0; i<16; ++i) {\n      result[i] = m[i]\n    }\n    return result\n  }\n  return m\n}\n\nproto.idle = function(t) {\n  this.center.idle(t)\n  this.radius.idle(t)\n  this.rotation.idle(t)\n}\n\nproto.flush = function(t) {\n  this.center.flush(t)\n  this.radius.flush(t)\n  this.rotation.flush(t)\n}\n\nproto.pan = function(t, dx, dy, dz) {\n  dx = dx || 0.0\n  dy = dy || 0.0\n  dz = dz || 0.0\n\n  this.recalcMatrix(t)\n  var mat = this.computedMatrix\n\n  var ux = mat[1]\n  var uy = mat[5]\n  var uz = mat[9]\n  var ul = len3(ux, uy, uz)\n  ux /= ul\n  uy /= ul\n  uz /= ul\n\n  var rx = mat[0]\n  var ry = mat[4]\n  var rz = mat[8]\n  var ru = rx * ux + ry * uy + rz * uz\n  rx -= ux * ru\n  ry -= uy * ru\n  rz -= uz * ru\n  var rl = len3(rx, ry, rz)\n  rx /= rl\n  ry /= rl\n  rz /= rl\n\n  var fx = mat[2]\n  var fy = mat[6]\n  var fz = mat[10]\n  var fu = fx * ux + fy * uy + fz * uz\n  var fr = fx * rx + fy * ry + fz * rz\n  fx -= fu * ux + fr * rx\n  fy -= fu * uy + fr * ry\n  fz -= fu * uz + fr * rz\n  var fl = len3(fx, fy, fz)\n  fx /= fl\n  fy /= fl\n  fz /= fl\n\n  var vx = rx * dx + ux * dy\n  var vy = ry * dx + uy * dy\n  var vz = rz * dx + uz * dy\n\n  this.center.move(t, vx, vy, vz)\n\n  //Update z-component of radius\n  var radius = Math.exp(this.computedRadius[0])\n  radius = Math.max(1e-4, radius + dz)\n  this.radius.set(t, Math.log(radius))\n}\n\nproto.rotate = function(t, dx, dy, dz) {\n  this.recalcMatrix(t)\n\n  dx = dx||0.0\n  dy = dy||0.0\n\n  var mat = this.computedMatrix\n\n  var rx = mat[0]\n  var ry = mat[4]\n  var rz = mat[8]\n\n  var ux = mat[1]\n  var uy = mat[5]\n  var uz = mat[9]\n\n  var fx = mat[2]\n  var fy = mat[6]\n  var fz = mat[10]\n\n  var qx = dx * rx + dy * ux\n  var qy = dx * ry + dy * uy\n  var qz = dx * rz + dy * uz\n\n  var bx = -(fy * qz - fz * qy)\n  var by = -(fz * qx - fx * qz)\n  var bz = -(fx * qy - fy * qx)  \n  var bw = Math.sqrt(Math.max(0.0, 1.0 - Math.pow(bx,2) - Math.pow(by,2) - Math.pow(bz,2)))\n  var bl = len4(bx, by, bz, bw)\n  if(bl > 1e-6) {\n    bx /= bl\n    by /= bl\n    bz /= bl\n    bw /= bl\n  } else {\n    bx = by = bz = 0.0\n    bw = 1.0\n  }\n\n  var rotation = this.computedRotation\n  var ax = rotation[0]\n  var ay = rotation[1]\n  var az = rotation[2]\n  var aw = rotation[3]\n\n  var cx = ax*bw + aw*bx + ay*bz - az*by\n  var cy = ay*bw + aw*by + az*bx - ax*bz\n  var cz = az*bw + aw*bz + ax*by - ay*bx\n  var cw = aw*bw - ax*bx - ay*by - az*bz\n  \n  //Apply roll\n  if(dz) {\n    bx = fx\n    by = fy\n    bz = fz\n    var s = Math.sin(dz) / len3(bx, by, bz)\n    bx *= s\n    by *= s\n    bz *= s\n    bw = Math.cos(dx)\n    cx = cx*bw + cw*bx + cy*bz - cz*by\n    cy = cy*bw + cw*by + cz*bx - cx*bz\n    cz = cz*bw + cw*bz + cx*by - cy*bx\n    cw = cw*bw - cx*bx - cy*by - cz*bz\n  }\n\n  var cl = len4(cx, cy, cz, cw)\n  if(cl > 1e-6) {\n    cx /= cl\n    cy /= cl\n    cz /= cl\n    cw /= cl\n  } else {\n    cx = cy = cz = 0.0\n    cw = 1.0\n  }\n\n  this.rotation.set(t, cx, cy, cz, cw)\n}\n\nproto.lookAt = function(t, eye, center, up) {\n  this.recalcMatrix(t)\n\n  center = center || this.computedCenter\n  eye    = eye    || this.computedEye\n  up     = up     || this.computedUp\n\n  var mat = this.computedMatrix\n  lookAt(mat, eye, center, up)\n\n  var rotation = this.computedRotation\n  quatFromFrame(rotation,\n    mat[0], mat[1], mat[2],\n    mat[4], mat[5], mat[6],\n    mat[8], mat[9], mat[10])\n  normalize4(rotation, rotation)\n  this.rotation.set(t, rotation[0], rotation[1], rotation[2], rotation[3])\n\n  var fl = 0.0\n  for(var i=0; i<3; ++i) {\n    fl += Math.pow(center[i] - eye[i], 2)\n  }\n  this.radius.set(t, 0.5 * Math.log(Math.max(fl, 1e-6)))\n\n  this.center.set(t, center[0], center[1], center[2])\n}\n\nproto.translate = function(t, dx, dy, dz) {\n  this.center.move(t,\n    dx||0.0,\n    dy||0.0,\n    dz||0.0)\n}\n\nproto.setMatrix = function(t, matrix) {\n\n  var rotation = this.computedRotation\n  quatFromFrame(rotation,\n    matrix[0], matrix[1], matrix[2],\n    matrix[4], matrix[5], matrix[6],\n    matrix[8], matrix[9], matrix[10])\n  normalize4(rotation, rotation)\n  this.rotation.set(t, rotation[0], rotation[1], rotation[2], rotation[3])\n\n  var mat = this.computedMatrix\n  invert44(mat, matrix)\n  var w = mat[15]\n  if(Math.abs(w) > 1e-6) {\n    var cx = mat[12]/w\n    var cy = mat[13]/w\n    var cz = mat[14]/w\n\n    this.recalcMatrix(t)  \n    var r = Math.exp(this.computedRadius[0])\n    this.center.set(t, cx-mat[2]*r, cy-mat[6]*r, cz-mat[10]*r)\n    this.radius.idle(t)\n  } else {\n    this.center.idle(t)\n    this.radius.idle(t)\n  }\n}\n\nproto.setDistance = function(t, d) {\n  if(d > 0) {\n    this.radius.set(t, Math.log(d))\n  }\n}\n\nproto.setDistanceLimits = function(lo, hi) {\n  if(lo > 0) {\n    lo = Math.log(lo)\n  } else {\n    lo = -Infinity    \n  }\n  if(hi > 0) {\n    hi = Math.log(hi)\n  } else {\n    hi = Infinity\n  }\n  hi = Math.max(hi, lo)\n  this.radius.bounds[0][0] = lo\n  this.radius.bounds[1][0] = hi\n}\n\nproto.getDistanceLimits = function(out) {\n  var bounds = this.radius.bounds\n  if(out) {\n    out[0] = Math.exp(bounds[0][0])\n    out[1] = Math.exp(bounds[1][0])\n    return out\n  }\n  return [ Math.exp(bounds[0][0]), Math.exp(bounds[1][0]) ]\n}\n\nproto.toJSON = function() {\n  this.recalcMatrix(this.lastT())\n  return {\n    center:   this.computedCenter.slice(),\n    rotation: this.computedRotation.slice(),\n    distance: Math.log(this.computedRadius[0]),\n    zoomMin:  this.radius.bounds[0][0],\n    zoomMax:  this.radius.bounds[1][0]\n  }\n}\n\nproto.fromJSON = function(options) {\n  var t = this.lastT()\n  var c = options.center\n  if(c) {\n    this.center.set(t, c[0], c[1], c[2])\n  }\n  var r = options.rotation\n  if(r) {\n    this.rotation.set(t, r[0], r[1], r[2], r[3])\n  }\n  var d = options.distance\n  if(d && d > 0) {\n    this.radius.set(t, Math.log(d))\n  }\n  this.setDistanceLimits(options.zoomMin, options.zoomMax)\n}\n\nfunction createOrbitController(options) {\n  options = options || {}\n  var center   = options.center   || [0,0,0]\n  var rotation = options.rotation || [0,0,0,1]\n  var radius   = options.radius   || 1.0\n\n  center = [].slice.call(center, 0, 3)\n  rotation = [].slice.call(rotation, 0, 4)\n  normalize4(rotation, rotation)\n\n  var result = new OrbitCameraController(\n    rotation,\n    center,\n    Math.log(radius))\n\n  result.setDistanceLimits(options.zoomMin, options.zoomMax)\n\n  if('eye' in options || 'up' in options) {\n    result.lookAt(0, options.eye, options.center, options.up)\n  }\n\n  return result\n}"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}