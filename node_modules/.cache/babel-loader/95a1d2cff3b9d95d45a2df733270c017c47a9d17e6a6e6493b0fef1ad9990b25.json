{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar d3 = require('d3');\nvar Registry = require('../../registry');\nvar Lib = require('../../lib');\nvar Drawing = require('../drawing');\nvar Color = require('../color');\nvar subTypes = require('../../traces/scatter/subtypes');\nvar stylePie = require('../../traces/pie/style_one');\nmodule.exports = function style(s, gd) {\n  s.each(function (d) {\n    var traceGroup = d3.select(this);\n    var layers = Lib.ensureSingle(traceGroup, 'g', 'layers');\n    layers.style('opacity', d[0].trace.opacity);\n\n    // Marker vertical alignment\n    var valign = gd._fullLayout.legend.valign;\n    var lineHeight = d[0].lineHeight;\n    var height = d[0].height;\n    if (valign === 'middle' || !lineHeight || !height) {\n      layers.attr('transform', null);\n    } else {\n      var factor = {\n        top: 1,\n        bottom: -1\n      }[valign];\n      var markerOffsetY = factor * (0.5 * (lineHeight - height + 3));\n      layers.attr('transform', 'translate(0,' + markerOffsetY + ')');\n    }\n    var fill = layers.selectAll('g.legendfill').data([d]);\n    fill.enter().append('g').classed('legendfill', true);\n    var line = layers.selectAll('g.legendlines').data([d]);\n    line.enter().append('g').classed('legendlines', true);\n    var symbol = layers.selectAll('g.legendsymbols').data([d]);\n    symbol.enter().append('g').classed('legendsymbols', true);\n    symbol.selectAll('g.legendpoints').data([d]).enter().append('g').classed('legendpoints', true);\n  }).each(styleBars).each(styleBoxes).each(stylePies).each(styleLines).each(stylePoints).each(styleCandles).each(styleOHLC);\n  function styleLines(d) {\n    var trace = d[0].trace;\n    var showFill = trace.visible && trace.fill && trace.fill !== 'none';\n    var showLine = subTypes.hasLines(trace);\n    var contours = trace.contours;\n    var showGradientLine = false;\n    var showGradientFill = false;\n    if (contours) {\n      var coloring = contours.coloring;\n      if (coloring === 'lines') {\n        showGradientLine = true;\n      } else {\n        showLine = coloring === 'none' || coloring === 'heatmap' || contours.showlines;\n      }\n      if (contours.type === 'constraint') {\n        showFill = contours._operation !== '=';\n      } else if (coloring === 'fill' || coloring === 'heatmap') {\n        showGradientFill = true;\n      }\n    }\n\n    // with fill and no markers or text, move the line and fill up a bit\n    // so it's more centered\n    var markersOrText = subTypes.hasMarkers(trace) || subTypes.hasText(trace);\n    var anyFill = showFill || showGradientFill;\n    var anyLine = showLine || showGradientLine;\n    var pathStart = markersOrText || !anyFill ? 'M5,0' :\n    // with a line leave it slightly below center, to leave room for the\n    // line thickness and because the line is usually more prominent\n    anyLine ? 'M5,-2' : 'M5,-3';\n    var this3 = d3.select(this);\n    var fill = this3.select('.legendfill').selectAll('path').data(showFill || showGradientFill ? [d] : []);\n    fill.enter().append('path').classed('js-fill', true);\n    fill.exit().remove();\n    fill.attr('d', pathStart + 'h30v6h-30z').call(showFill ? Drawing.fillGroupStyle : fillGradient);\n    var line = this3.select('.legendlines').selectAll('path').data(showLine || showGradientLine ? [d] : []);\n    line.enter().append('path').classed('js-line', true);\n    line.exit().remove();\n\n    // this is ugly... but you can't apply a gradient to a perfectly\n    // horizontal or vertical line. Presumably because then\n    // the system doesn't know how to scale vertical variation, even\n    // though there *is* no vertical variation in this case.\n    // so add an invisibly small angle to the line\n    // This issue (and workaround) exist across (Mac) Chrome, FF, and Safari\n    line.attr('d', pathStart + (showGradientLine ? 'l30,0.0001' : 'h30')).call(showLine ? Drawing.lineGroupStyle : lineGradient);\n    function fillGradient(s) {\n      if (s.size()) {\n        var gradientID = 'legendfill-' + trace.uid;\n        Drawing.gradient(s, gd, gradientID, 'horizontalreversed', trace.colorscale, 'fill');\n      }\n    }\n    function lineGradient(s) {\n      if (s.size()) {\n        var gradientID = 'legendline-' + trace.uid;\n        Drawing.lineGroupStyle(s);\n        Drawing.gradient(s, gd, gradientID, 'horizontalreversed', trace.colorscale, 'stroke');\n      }\n    }\n  }\n  function stylePoints(d) {\n    var d0 = d[0];\n    var trace = d0.trace;\n    var showMarkers = subTypes.hasMarkers(trace);\n    var showText = subTypes.hasText(trace);\n    var showLines = subTypes.hasLines(trace);\n    var dMod, tMod;\n\n    // 'scatter3d' don't use gd.calcdata,\n    // use d0.trace to infer arrayOk attributes\n\n    function boundVal(attrIn, arrayToValFn, bounds) {\n      var valIn = Lib.nestedProperty(trace, attrIn).get();\n      var valToBound = Lib.isArrayOrTypedArray(valIn) && arrayToValFn ? arrayToValFn(valIn) : valIn;\n      if (bounds) {\n        if (valToBound < bounds[0]) return bounds[0];else if (valToBound > bounds[1]) return bounds[1];\n      }\n      return valToBound;\n    }\n    function pickFirst(array) {\n      return array[0];\n    }\n\n    // constrain text, markers, etc so they'll fit on the legend\n    if (showMarkers || showText || showLines) {\n      var dEdit = {};\n      var tEdit = {};\n      if (showMarkers) {\n        dEdit.mc = boundVal('marker.color', pickFirst);\n        dEdit.mx = boundVal('marker.symbol', pickFirst);\n        dEdit.mo = boundVal('marker.opacity', Lib.mean, [0.2, 1]);\n        dEdit.mlc = boundVal('marker.line.color', pickFirst);\n        dEdit.mlw = boundVal('marker.line.width', Lib.mean, [0, 5]);\n        tEdit.marker = {\n          sizeref: 1,\n          sizemin: 1,\n          sizemode: 'diameter'\n        };\n        var ms = boundVal('marker.size', Lib.mean, [2, 16]);\n        dEdit.ms = ms;\n        tEdit.marker.size = ms;\n      }\n      if (showLines) {\n        tEdit.line = {\n          width: boundVal('line.width', pickFirst, [0, 10])\n        };\n      }\n      if (showText) {\n        dEdit.tx = 'Aa';\n        dEdit.tp = boundVal('textposition', pickFirst);\n        dEdit.ts = 10;\n        dEdit.tc = boundVal('textfont.color', pickFirst);\n        dEdit.tf = boundVal('textfont.family', pickFirst);\n      }\n      dMod = [Lib.minExtend(d0, dEdit)];\n      tMod = Lib.minExtend(trace, tEdit);\n\n      // always show legend items in base state\n      tMod.selectedpoints = null;\n    }\n    var ptgroup = d3.select(this).select('g.legendpoints');\n    var pts = ptgroup.selectAll('path.scatterpts').data(showMarkers ? dMod : []);\n    // make sure marker is on the bottom, in case it enters after text\n    pts.enter().insert('path', ':first-child').classed('scatterpts', true).attr('transform', 'translate(20,0)');\n    pts.exit().remove();\n    pts.call(Drawing.pointStyle, tMod, gd);\n\n    // 'mrc' is set in pointStyle and used in textPointStyle:\n    // constrain it here\n    if (showMarkers) dMod[0].mrc = 3;\n    var txt = ptgroup.selectAll('g.pointtext').data(showText ? dMod : []);\n    txt.enter().append('g').classed('pointtext', true).append('text').attr('transform', 'translate(20,0)');\n    txt.exit().remove();\n    txt.selectAll('text').call(Drawing.textPointStyle, tMod, gd);\n  }\n  function styleBars(d) {\n    var trace = d[0].trace;\n    var marker = trace.marker || {};\n    var markerLine = marker.line || {};\n    var barpath = d3.select(this).select('g.legendpoints').selectAll('path.legendbar').data(Registry.traceIs(trace, 'bar') ? [d] : []);\n    barpath.enter().append('path').classed('legendbar', true).attr('d', 'M6,6H-6V-6H6Z').attr('transform', 'translate(20,0)');\n    barpath.exit().remove();\n    barpath.each(function (d) {\n      var p = d3.select(this);\n      var d0 = d[0];\n      var w = (d0.mlw + 1 || markerLine.width + 1) - 1;\n      p.style('stroke-width', w + 'px').call(Color.fill, d0.mc || marker.color);\n      if (w) {\n        p.call(Color.stroke, d0.mlc || markerLine.color);\n      }\n    });\n  }\n  function styleBoxes(d) {\n    var trace = d[0].trace;\n    var pts = d3.select(this).select('g.legendpoints').selectAll('path.legendbox').data(Registry.traceIs(trace, 'box-violin') && trace.visible ? [d] : []);\n    pts.enter().append('path').classed('legendbox', true)\n    // if we want the median bar, prepend M6,0H-6\n    .attr('d', 'M6,6H-6V-6H6Z').attr('transform', 'translate(20,0)');\n    pts.exit().remove();\n    pts.each(function () {\n      var w = trace.line.width;\n      var p = d3.select(this);\n      p.style('stroke-width', w + 'px').call(Color.fill, trace.fillcolor);\n      if (w) {\n        Color.stroke(p, trace.line.color);\n      }\n    });\n  }\n  function styleCandles(d) {\n    var trace = d[0].trace;\n    var pts = d3.select(this).select('g.legendpoints').selectAll('path.legendcandle').data(trace.type === 'candlestick' && trace.visible ? [d, d] : []);\n    pts.enter().append('path').classed('legendcandle', true).attr('d', function (_, i) {\n      if (i) return 'M-15,0H-8M-8,6V-6H8Z'; // increasing\n      return 'M15,0H8M8,-6V6H-8Z'; // decreasing\n    }).attr('transform', 'translate(20,0)').style('stroke-miterlimit', 1);\n    pts.exit().remove();\n    pts.each(function (_, i) {\n      var container = trace[i ? 'increasing' : 'decreasing'];\n      var w = container.line.width;\n      var p = d3.select(this);\n      p.style('stroke-width', w + 'px').call(Color.fill, container.fillcolor);\n      if (w) {\n        Color.stroke(p, container.line.color);\n      }\n    });\n  }\n  function styleOHLC(d) {\n    var trace = d[0].trace;\n    var pts = d3.select(this).select('g.legendpoints').selectAll('path.legendohlc').data(trace.type === 'ohlc' && trace.visible ? [d, d] : []);\n    pts.enter().append('path').classed('legendohlc', true).attr('d', function (_, i) {\n      if (i) return 'M-15,0H0M-8,-6V0'; // increasing\n      return 'M15,0H0M8,6V0'; // decreasing\n    }).attr('transform', 'translate(20,0)').style('stroke-miterlimit', 1);\n    pts.exit().remove();\n    pts.each(function (_, i) {\n      var container = trace[i ? 'increasing' : 'decreasing'];\n      var w = container.line.width;\n      var p = d3.select(this);\n      p.style('fill', 'none').call(Drawing.dashLine, container.line.dash, w);\n      if (w) {\n        Color.stroke(p, container.line.color);\n      }\n    });\n  }\n  function stylePies(d) {\n    var trace = d[0].trace;\n    var pts = d3.select(this).select('g.legendpoints').selectAll('path.legendpie').data(Registry.traceIs(trace, 'pie') && trace.visible ? [d] : []);\n    pts.enter().append('path').classed('legendpie', true).attr('d', 'M6,6H-6V-6H6Z').attr('transform', 'translate(20,0)');\n    pts.exit().remove();\n    if (pts.size()) pts.call(stylePie, d[0], trace);\n  }\n};","map":{"version":3,"names":["d3","require","Registry","Lib","Drawing","Color","subTypes","stylePie","module","exports","style","s","gd","each","d","traceGroup","select","layers","ensureSingle","trace","opacity","valign","_fullLayout","legend","lineHeight","height","attr","factor","top","bottom","markerOffsetY","fill","selectAll","data","enter","append","classed","line","symbol","styleBars","styleBoxes","stylePies","styleLines","stylePoints","styleCandles","styleOHLC","showFill","visible","showLine","hasLines","contours","showGradientLine","showGradientFill","coloring","showlines","type","_operation","markersOrText","hasMarkers","hasText","anyFill","anyLine","pathStart","this3","exit","remove","call","fillGroupStyle","fillGradient","lineGroupStyle","lineGradient","size","gradientID","uid","gradient","colorscale","d0","showMarkers","showText","showLines","dMod","tMod","boundVal","attrIn","arrayToValFn","bounds","valIn","nestedProperty","get","valToBound","isArrayOrTypedArray","pickFirst","array","dEdit","tEdit","mc","mx","mo","mean","mlc","mlw","marker","sizeref","sizemin","sizemode","ms","width","tx","tp","ts","tc","tf","minExtend","selectedpoints","ptgroup","pts","insert","pointStyle","mrc","txt","textPointStyle","markerLine","barpath","traceIs","p","w","color","stroke","fillcolor","_","i","container","dashLine","dash"],"sources":["/home/yasmin/√Årea de Trabalho/Frontend/node_modules/plotly.js/src/components/legend/style.js"],"sourcesContent":["/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar d3 = require('d3');\n\nvar Registry = require('../../registry');\nvar Lib = require('../../lib');\nvar Drawing = require('../drawing');\nvar Color = require('../color');\n\nvar subTypes = require('../../traces/scatter/subtypes');\nvar stylePie = require('../../traces/pie/style_one');\n\nmodule.exports = function style(s, gd) {\n    s.each(function(d) {\n        var traceGroup = d3.select(this);\n\n        var layers = Lib.ensureSingle(traceGroup, 'g', 'layers');\n        layers.style('opacity', d[0].trace.opacity);\n\n        // Marker vertical alignment\n        var valign = gd._fullLayout.legend.valign;\n        var lineHeight = d[0].lineHeight;\n        var height = d[0].height;\n\n        if(valign === 'middle' || !lineHeight || !height) {\n            layers.attr('transform', null);\n        } else {\n            var factor = {top: 1, bottom: -1}[valign];\n            var markerOffsetY = factor * (0.5 * (lineHeight - height + 3));\n            layers.attr('transform', 'translate(0,' + markerOffsetY + ')');\n        }\n\n        var fill = layers\n            .selectAll('g.legendfill')\n                .data([d]);\n        fill.enter().append('g')\n            .classed('legendfill', true);\n\n        var line = layers\n            .selectAll('g.legendlines')\n                .data([d]);\n        line.enter().append('g')\n            .classed('legendlines', true);\n\n        var symbol = layers\n            .selectAll('g.legendsymbols')\n                .data([d]);\n        symbol.enter().append('g')\n            .classed('legendsymbols', true);\n\n        symbol.selectAll('g.legendpoints')\n            .data([d])\n          .enter().append('g')\n            .classed('legendpoints', true);\n    })\n    .each(styleBars)\n    .each(styleBoxes)\n    .each(stylePies)\n    .each(styleLines)\n    .each(stylePoints)\n    .each(styleCandles)\n    .each(styleOHLC);\n\n    function styleLines(d) {\n        var trace = d[0].trace;\n        var showFill = trace.visible && trace.fill && trace.fill !== 'none';\n        var showLine = subTypes.hasLines(trace);\n        var contours = trace.contours;\n        var showGradientLine = false;\n        var showGradientFill = false;\n\n        if(contours) {\n            var coloring = contours.coloring;\n\n            if(coloring === 'lines') {\n                showGradientLine = true;\n            }\n            else {\n                showLine = coloring === 'none' || coloring === 'heatmap' ||\n                    contours.showlines;\n            }\n\n            if(contours.type === 'constraint') {\n                showFill = contours._operation !== '=';\n            }\n            else if(coloring === 'fill' || coloring === 'heatmap') {\n                showGradientFill = true;\n            }\n        }\n\n        // with fill and no markers or text, move the line and fill up a bit\n        // so it's more centered\n        var markersOrText = subTypes.hasMarkers(trace) || subTypes.hasText(trace);\n        var anyFill = showFill || showGradientFill;\n        var anyLine = showLine || showGradientLine;\n        var pathStart = (markersOrText || !anyFill) ? 'M5,0' :\n            // with a line leave it slightly below center, to leave room for the\n            // line thickness and because the line is usually more prominent\n            anyLine ? 'M5,-2' : 'M5,-3';\n\n        var this3 = d3.select(this);\n\n        var fill = this3.select('.legendfill').selectAll('path')\n            .data(showFill || showGradientFill ? [d] : []);\n        fill.enter().append('path').classed('js-fill', true);\n        fill.exit().remove();\n        fill.attr('d', pathStart + 'h30v6h-30z')\n            .call(showFill ? Drawing.fillGroupStyle : fillGradient);\n\n        var line = this3.select('.legendlines').selectAll('path')\n            .data(showLine || showGradientLine ? [d] : []);\n        line.enter().append('path').classed('js-line', true);\n        line.exit().remove();\n\n        // this is ugly... but you can't apply a gradient to a perfectly\n        // horizontal or vertical line. Presumably because then\n        // the system doesn't know how to scale vertical variation, even\n        // though there *is* no vertical variation in this case.\n        // so add an invisibly small angle to the line\n        // This issue (and workaround) exist across (Mac) Chrome, FF, and Safari\n        line.attr('d', pathStart + (showGradientLine ? 'l30,0.0001' : 'h30'))\n            .call(showLine ? Drawing.lineGroupStyle : lineGradient);\n\n        function fillGradient(s) {\n            if(s.size()) {\n                var gradientID = 'legendfill-' + trace.uid;\n                Drawing.gradient(s, gd, gradientID, 'horizontalreversed',\n                    trace.colorscale, 'fill');\n            }\n        }\n\n        function lineGradient(s) {\n            if(s.size()) {\n                var gradientID = 'legendline-' + trace.uid;\n                Drawing.lineGroupStyle(s);\n                Drawing.gradient(s, gd, gradientID, 'horizontalreversed',\n                    trace.colorscale, 'stroke');\n            }\n        }\n\n    }\n\n    function stylePoints(d) {\n        var d0 = d[0];\n        var trace = d0.trace;\n        var showMarkers = subTypes.hasMarkers(trace);\n        var showText = subTypes.hasText(trace);\n        var showLines = subTypes.hasLines(trace);\n        var dMod, tMod;\n\n        // 'scatter3d' don't use gd.calcdata,\n        // use d0.trace to infer arrayOk attributes\n\n        function boundVal(attrIn, arrayToValFn, bounds) {\n            var valIn = Lib.nestedProperty(trace, attrIn).get();\n            var valToBound = (Lib.isArrayOrTypedArray(valIn) && arrayToValFn) ?\n                arrayToValFn(valIn) :\n                valIn;\n\n            if(bounds) {\n                if(valToBound < bounds[0]) return bounds[0];\n                else if(valToBound > bounds[1]) return bounds[1];\n            }\n            return valToBound;\n        }\n\n        function pickFirst(array) { return array[0]; }\n\n        // constrain text, markers, etc so they'll fit on the legend\n        if(showMarkers || showText || showLines) {\n            var dEdit = {};\n            var tEdit = {};\n\n            if(showMarkers) {\n                dEdit.mc = boundVal('marker.color', pickFirst);\n                dEdit.mx = boundVal('marker.symbol', pickFirst);\n                dEdit.mo = boundVal('marker.opacity', Lib.mean, [0.2, 1]);\n                dEdit.mlc = boundVal('marker.line.color', pickFirst);\n                dEdit.mlw = boundVal('marker.line.width', Lib.mean, [0, 5]);\n                tEdit.marker = {\n                    sizeref: 1,\n                    sizemin: 1,\n                    sizemode: 'diameter'\n                };\n\n                var ms = boundVal('marker.size', Lib.mean, [2, 16]);\n                dEdit.ms = ms;\n                tEdit.marker.size = ms;\n            }\n\n            if(showLines) {\n                tEdit.line = {\n                    width: boundVal('line.width', pickFirst, [0, 10])\n                };\n            }\n\n            if(showText) {\n                dEdit.tx = 'Aa';\n                dEdit.tp = boundVal('textposition', pickFirst);\n                dEdit.ts = 10;\n                dEdit.tc = boundVal('textfont.color', pickFirst);\n                dEdit.tf = boundVal('textfont.family', pickFirst);\n            }\n\n            dMod = [Lib.minExtend(d0, dEdit)];\n            tMod = Lib.minExtend(trace, tEdit);\n\n            // always show legend items in base state\n            tMod.selectedpoints = null;\n        }\n\n        var ptgroup = d3.select(this).select('g.legendpoints');\n\n        var pts = ptgroup.selectAll('path.scatterpts')\n            .data(showMarkers ? dMod : []);\n        // make sure marker is on the bottom, in case it enters after text\n        pts.enter().insert('path', ':first-child')\n            .classed('scatterpts', true)\n            .attr('transform', 'translate(20,0)');\n        pts.exit().remove();\n        pts.call(Drawing.pointStyle, tMod, gd);\n\n        // 'mrc' is set in pointStyle and used in textPointStyle:\n        // constrain it here\n        if(showMarkers) dMod[0].mrc = 3;\n\n        var txt = ptgroup.selectAll('g.pointtext')\n            .data(showText ? dMod : []);\n        txt.enter()\n            .append('g').classed('pointtext', true)\n                .append('text').attr('transform', 'translate(20,0)');\n        txt.exit().remove();\n        txt.selectAll('text').call(Drawing.textPointStyle, tMod, gd);\n    }\n\n    function styleBars(d) {\n        var trace = d[0].trace;\n        var marker = trace.marker || {};\n        var markerLine = marker.line || {};\n\n        var barpath = d3.select(this).select('g.legendpoints')\n            .selectAll('path.legendbar')\n            .data(Registry.traceIs(trace, 'bar') ? [d] : []);\n        barpath.enter().append('path').classed('legendbar', true)\n            .attr('d', 'M6,6H-6V-6H6Z')\n            .attr('transform', 'translate(20,0)');\n        barpath.exit().remove();\n\n        barpath.each(function(d) {\n            var p = d3.select(this);\n            var d0 = d[0];\n            var w = (d0.mlw + 1 || markerLine.width + 1) - 1;\n\n            p.style('stroke-width', w + 'px')\n                .call(Color.fill, d0.mc || marker.color);\n\n            if(w) {\n                p.call(Color.stroke, d0.mlc || markerLine.color);\n            }\n        });\n    }\n\n    function styleBoxes(d) {\n        var trace = d[0].trace;\n\n        var pts = d3.select(this).select('g.legendpoints')\n            .selectAll('path.legendbox')\n            .data(Registry.traceIs(trace, 'box-violin') && trace.visible ? [d] : []);\n        pts.enter().append('path').classed('legendbox', true)\n            // if we want the median bar, prepend M6,0H-6\n            .attr('d', 'M6,6H-6V-6H6Z')\n            .attr('transform', 'translate(20,0)');\n        pts.exit().remove();\n\n        pts.each(function() {\n            var w = trace.line.width;\n            var p = d3.select(this);\n\n            p.style('stroke-width', w + 'px')\n                .call(Color.fill, trace.fillcolor);\n\n            if(w) {\n                Color.stroke(p, trace.line.color);\n            }\n        });\n    }\n\n    function styleCandles(d) {\n        var trace = d[0].trace;\n\n        var pts = d3.select(this).select('g.legendpoints')\n            .selectAll('path.legendcandle')\n            .data(trace.type === 'candlestick' && trace.visible ? [d, d] : []);\n        pts.enter().append('path').classed('legendcandle', true)\n            .attr('d', function(_, i) {\n                if(i) return 'M-15,0H-8M-8,6V-6H8Z'; // increasing\n                return 'M15,0H8M8,-6V6H-8Z'; // decreasing\n            })\n            .attr('transform', 'translate(20,0)')\n            .style('stroke-miterlimit', 1);\n        pts.exit().remove();\n\n        pts.each(function(_, i) {\n            var container = trace[i ? 'increasing' : 'decreasing'];\n            var w = container.line.width;\n            var p = d3.select(this);\n\n            p.style('stroke-width', w + 'px')\n                .call(Color.fill, container.fillcolor);\n\n            if(w) {\n                Color.stroke(p, container.line.color);\n            }\n        });\n    }\n\n    function styleOHLC(d) {\n        var trace = d[0].trace;\n\n        var pts = d3.select(this).select('g.legendpoints')\n            .selectAll('path.legendohlc')\n            .data(trace.type === 'ohlc' && trace.visible ? [d, d] : []);\n        pts.enter().append('path').classed('legendohlc', true)\n            .attr('d', function(_, i) {\n                if(i) return 'M-15,0H0M-8,-6V0'; // increasing\n                return 'M15,0H0M8,6V0'; // decreasing\n            })\n            .attr('transform', 'translate(20,0)')\n            .style('stroke-miterlimit', 1);\n        pts.exit().remove();\n\n        pts.each(function(_, i) {\n            var container = trace[i ? 'increasing' : 'decreasing'];\n            var w = container.line.width;\n            var p = d3.select(this);\n\n            p.style('fill', 'none')\n                .call(Drawing.dashLine, container.line.dash, w);\n\n            if(w) {\n                Color.stroke(p, container.line.color);\n            }\n        });\n    }\n\n    function stylePies(d) {\n        var trace = d[0].trace;\n\n        var pts = d3.select(this).select('g.legendpoints')\n            .selectAll('path.legendpie')\n            .data(Registry.traceIs(trace, 'pie') && trace.visible ? [d] : []);\n        pts.enter().append('path').classed('legendpie', true)\n            .attr('d', 'M6,6H-6V-6H6Z')\n            .attr('transform', 'translate(20,0)');\n        pts.exit().remove();\n\n        if(pts.size()) pts.call(stylePie, d[0], trace);\n    }\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ,IAAIA,EAAE,GAAGC,OAAO,CAAC,IAAI,CAAC;AAEtB,IAAIC,QAAQ,GAAGD,OAAO,CAAC,gBAAgB,CAAC;AACxC,IAAIE,GAAG,GAAGF,OAAO,CAAC,WAAW,CAAC;AAC9B,IAAIG,OAAO,GAAGH,OAAO,CAAC,YAAY,CAAC;AACnC,IAAII,KAAK,GAAGJ,OAAO,CAAC,UAAU,CAAC;AAE/B,IAAIK,QAAQ,GAAGL,OAAO,CAAC,+BAA+B,CAAC;AACvD,IAAIM,QAAQ,GAAGN,OAAO,CAAC,4BAA4B,CAAC;AAEpDO,MAAM,CAACC,OAAO,GAAG,SAASC,KAAK,CAACC,CAAC,EAAEC,EAAE,EAAE;EACnCD,CAAC,CAACE,IAAI,CAAC,UAASC,CAAC,EAAE;IACf,IAAIC,UAAU,GAAGf,EAAE,CAACgB,MAAM,CAAC,IAAI,CAAC;IAEhC,IAAIC,MAAM,GAAGd,GAAG,CAACe,YAAY,CAACH,UAAU,EAAE,GAAG,EAAE,QAAQ,CAAC;IACxDE,MAAM,CAACP,KAAK,CAAC,SAAS,EAAEI,CAAC,CAAC,CAAC,CAAC,CAACK,KAAK,CAACC,OAAO,CAAC;;IAE3C;IACA,IAAIC,MAAM,GAAGT,EAAE,CAACU,WAAW,CAACC,MAAM,CAACF,MAAM;IACzC,IAAIG,UAAU,GAAGV,CAAC,CAAC,CAAC,CAAC,CAACU,UAAU;IAChC,IAAIC,MAAM,GAAGX,CAAC,CAAC,CAAC,CAAC,CAACW,MAAM;IAExB,IAAGJ,MAAM,KAAK,QAAQ,IAAI,CAACG,UAAU,IAAI,CAACC,MAAM,EAAE;MAC9CR,MAAM,CAACS,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC;IAClC,CAAC,MAAM;MACH,IAAIC,MAAM,GAAG;QAACC,GAAG,EAAE,CAAC;QAAEC,MAAM,EAAE,CAAC;MAAC,CAAC,CAACR,MAAM,CAAC;MACzC,IAAIS,aAAa,GAAGH,MAAM,IAAI,GAAG,IAAIH,UAAU,GAAGC,MAAM,GAAG,CAAC,CAAC,CAAC;MAC9DR,MAAM,CAACS,IAAI,CAAC,WAAW,EAAE,cAAc,GAAGI,aAAa,GAAG,GAAG,CAAC;IAClE;IAEA,IAAIC,IAAI,GAAGd,MAAM,CACZe,SAAS,CAAC,cAAc,CAAC,CACrBC,IAAI,CAAC,CAACnB,CAAC,CAAC,CAAC;IAClBiB,IAAI,CAACG,KAAK,EAAE,CAACC,MAAM,CAAC,GAAG,CAAC,CACnBC,OAAO,CAAC,YAAY,EAAE,IAAI,CAAC;IAEhC,IAAIC,IAAI,GAAGpB,MAAM,CACZe,SAAS,CAAC,eAAe,CAAC,CACtBC,IAAI,CAAC,CAACnB,CAAC,CAAC,CAAC;IAClBuB,IAAI,CAACH,KAAK,EAAE,CAACC,MAAM,CAAC,GAAG,CAAC,CACnBC,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC;IAEjC,IAAIE,MAAM,GAAGrB,MAAM,CACde,SAAS,CAAC,iBAAiB,CAAC,CACxBC,IAAI,CAAC,CAACnB,CAAC,CAAC,CAAC;IAClBwB,MAAM,CAACJ,KAAK,EAAE,CAACC,MAAM,CAAC,GAAG,CAAC,CACrBC,OAAO,CAAC,eAAe,EAAE,IAAI,CAAC;IAEnCE,MAAM,CAACN,SAAS,CAAC,gBAAgB,CAAC,CAC7BC,IAAI,CAAC,CAACnB,CAAC,CAAC,CAAC,CACXoB,KAAK,EAAE,CAACC,MAAM,CAAC,GAAG,CAAC,CACjBC,OAAO,CAAC,cAAc,EAAE,IAAI,CAAC;EACtC,CAAC,CAAC,CACDvB,IAAI,CAAC0B,SAAS,CAAC,CACf1B,IAAI,CAAC2B,UAAU,CAAC,CAChB3B,IAAI,CAAC4B,SAAS,CAAC,CACf5B,IAAI,CAAC6B,UAAU,CAAC,CAChB7B,IAAI,CAAC8B,WAAW,CAAC,CACjB9B,IAAI,CAAC+B,YAAY,CAAC,CAClB/B,IAAI,CAACgC,SAAS,CAAC;EAEhB,SAASH,UAAU,CAAC5B,CAAC,EAAE;IACnB,IAAIK,KAAK,GAAGL,CAAC,CAAC,CAAC,CAAC,CAACK,KAAK;IACtB,IAAI2B,QAAQ,GAAG3B,KAAK,CAAC4B,OAAO,IAAI5B,KAAK,CAACY,IAAI,IAAIZ,KAAK,CAACY,IAAI,KAAK,MAAM;IACnE,IAAIiB,QAAQ,GAAG1C,QAAQ,CAAC2C,QAAQ,CAAC9B,KAAK,CAAC;IACvC,IAAI+B,QAAQ,GAAG/B,KAAK,CAAC+B,QAAQ;IAC7B,IAAIC,gBAAgB,GAAG,KAAK;IAC5B,IAAIC,gBAAgB,GAAG,KAAK;IAE5B,IAAGF,QAAQ,EAAE;MACT,IAAIG,QAAQ,GAAGH,QAAQ,CAACG,QAAQ;MAEhC,IAAGA,QAAQ,KAAK,OAAO,EAAE;QACrBF,gBAAgB,GAAG,IAAI;MAC3B,CAAC,MACI;QACDH,QAAQ,GAAGK,QAAQ,KAAK,MAAM,IAAIA,QAAQ,KAAK,SAAS,IACpDH,QAAQ,CAACI,SAAS;MAC1B;MAEA,IAAGJ,QAAQ,CAACK,IAAI,KAAK,YAAY,EAAE;QAC/BT,QAAQ,GAAGI,QAAQ,CAACM,UAAU,KAAK,GAAG;MAC1C,CAAC,MACI,IAAGH,QAAQ,KAAK,MAAM,IAAIA,QAAQ,KAAK,SAAS,EAAE;QACnDD,gBAAgB,GAAG,IAAI;MAC3B;IACJ;;IAEA;IACA;IACA,IAAIK,aAAa,GAAGnD,QAAQ,CAACoD,UAAU,CAACvC,KAAK,CAAC,IAAIb,QAAQ,CAACqD,OAAO,CAACxC,KAAK,CAAC;IACzE,IAAIyC,OAAO,GAAGd,QAAQ,IAAIM,gBAAgB;IAC1C,IAAIS,OAAO,GAAGb,QAAQ,IAAIG,gBAAgB;IAC1C,IAAIW,SAAS,GAAIL,aAAa,IAAI,CAACG,OAAO,GAAI,MAAM;IAChD;IACA;IACAC,OAAO,GAAG,OAAO,GAAG,OAAO;IAE/B,IAAIE,KAAK,GAAG/D,EAAE,CAACgB,MAAM,CAAC,IAAI,CAAC;IAE3B,IAAIe,IAAI,GAAGgC,KAAK,CAAC/C,MAAM,CAAC,aAAa,CAAC,CAACgB,SAAS,CAAC,MAAM,CAAC,CACnDC,IAAI,CAACa,QAAQ,IAAIM,gBAAgB,GAAG,CAACtC,CAAC,CAAC,GAAG,EAAE,CAAC;IAClDiB,IAAI,CAACG,KAAK,EAAE,CAACC,MAAM,CAAC,MAAM,CAAC,CAACC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC;IACpDL,IAAI,CAACiC,IAAI,EAAE,CAACC,MAAM,EAAE;IACpBlC,IAAI,CAACL,IAAI,CAAC,GAAG,EAAEoC,SAAS,GAAG,YAAY,CAAC,CACnCI,IAAI,CAACpB,QAAQ,GAAG1C,OAAO,CAAC+D,cAAc,GAAGC,YAAY,CAAC;IAE3D,IAAI/B,IAAI,GAAG0B,KAAK,CAAC/C,MAAM,CAAC,cAAc,CAAC,CAACgB,SAAS,CAAC,MAAM,CAAC,CACpDC,IAAI,CAACe,QAAQ,IAAIG,gBAAgB,GAAG,CAACrC,CAAC,CAAC,GAAG,EAAE,CAAC;IAClDuB,IAAI,CAACH,KAAK,EAAE,CAACC,MAAM,CAAC,MAAM,CAAC,CAACC,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC;IACpDC,IAAI,CAAC2B,IAAI,EAAE,CAACC,MAAM,EAAE;;IAEpB;IACA;IACA;IACA;IACA;IACA;IACA5B,IAAI,CAACX,IAAI,CAAC,GAAG,EAAEoC,SAAS,IAAIX,gBAAgB,GAAG,YAAY,GAAG,KAAK,CAAC,CAAC,CAChEe,IAAI,CAAClB,QAAQ,GAAG5C,OAAO,CAACiE,cAAc,GAAGC,YAAY,CAAC;IAE3D,SAASF,YAAY,CAACzD,CAAC,EAAE;MACrB,IAAGA,CAAC,CAAC4D,IAAI,EAAE,EAAE;QACT,IAAIC,UAAU,GAAG,aAAa,GAAGrD,KAAK,CAACsD,GAAG;QAC1CrE,OAAO,CAACsE,QAAQ,CAAC/D,CAAC,EAAEC,EAAE,EAAE4D,UAAU,EAAE,oBAAoB,EACpDrD,KAAK,CAACwD,UAAU,EAAE,MAAM,CAAC;MACjC;IACJ;IAEA,SAASL,YAAY,CAAC3D,CAAC,EAAE;MACrB,IAAGA,CAAC,CAAC4D,IAAI,EAAE,EAAE;QACT,IAAIC,UAAU,GAAG,aAAa,GAAGrD,KAAK,CAACsD,GAAG;QAC1CrE,OAAO,CAACiE,cAAc,CAAC1D,CAAC,CAAC;QACzBP,OAAO,CAACsE,QAAQ,CAAC/D,CAAC,EAAEC,EAAE,EAAE4D,UAAU,EAAE,oBAAoB,EACpDrD,KAAK,CAACwD,UAAU,EAAE,QAAQ,CAAC;MACnC;IACJ;EAEJ;EAEA,SAAShC,WAAW,CAAC7B,CAAC,EAAE;IACpB,IAAI8D,EAAE,GAAG9D,CAAC,CAAC,CAAC,CAAC;IACb,IAAIK,KAAK,GAAGyD,EAAE,CAACzD,KAAK;IACpB,IAAI0D,WAAW,GAAGvE,QAAQ,CAACoD,UAAU,CAACvC,KAAK,CAAC;IAC5C,IAAI2D,QAAQ,GAAGxE,QAAQ,CAACqD,OAAO,CAACxC,KAAK,CAAC;IACtC,IAAI4D,SAAS,GAAGzE,QAAQ,CAAC2C,QAAQ,CAAC9B,KAAK,CAAC;IACxC,IAAI6D,IAAI,EAAEC,IAAI;;IAEd;IACA;;IAEA,SAASC,QAAQ,CAACC,MAAM,EAAEC,YAAY,EAAEC,MAAM,EAAE;MAC5C,IAAIC,KAAK,GAAGnF,GAAG,CAACoF,cAAc,CAACpE,KAAK,EAAEgE,MAAM,CAAC,CAACK,GAAG,EAAE;MACnD,IAAIC,UAAU,GAAItF,GAAG,CAACuF,mBAAmB,CAACJ,KAAK,CAAC,IAAIF,YAAY,GAC5DA,YAAY,CAACE,KAAK,CAAC,GACnBA,KAAK;MAET,IAAGD,MAAM,EAAE;QACP,IAAGI,UAAU,GAAGJ,MAAM,CAAC,CAAC,CAAC,EAAE,OAAOA,MAAM,CAAC,CAAC,CAAC,CAAC,KACvC,IAAGI,UAAU,GAAGJ,MAAM,CAAC,CAAC,CAAC,EAAE,OAAOA,MAAM,CAAC,CAAC,CAAC;MACpD;MACA,OAAOI,UAAU;IACrB;IAEA,SAASE,SAAS,CAACC,KAAK,EAAE;MAAE,OAAOA,KAAK,CAAC,CAAC,CAAC;IAAE;;IAE7C;IACA,IAAGf,WAAW,IAAIC,QAAQ,IAAIC,SAAS,EAAE;MACrC,IAAIc,KAAK,GAAG,CAAC,CAAC;MACd,IAAIC,KAAK,GAAG,CAAC,CAAC;MAEd,IAAGjB,WAAW,EAAE;QACZgB,KAAK,CAACE,EAAE,GAAGb,QAAQ,CAAC,cAAc,EAAES,SAAS,CAAC;QAC9CE,KAAK,CAACG,EAAE,GAAGd,QAAQ,CAAC,eAAe,EAAES,SAAS,CAAC;QAC/CE,KAAK,CAACI,EAAE,GAAGf,QAAQ,CAAC,gBAAgB,EAAE/E,GAAG,CAAC+F,IAAI,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QACzDL,KAAK,CAACM,GAAG,GAAGjB,QAAQ,CAAC,mBAAmB,EAAES,SAAS,CAAC;QACpDE,KAAK,CAACO,GAAG,GAAGlB,QAAQ,CAAC,mBAAmB,EAAE/E,GAAG,CAAC+F,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC3DJ,KAAK,CAACO,MAAM,GAAG;UACXC,OAAO,EAAE,CAAC;UACVC,OAAO,EAAE,CAAC;UACVC,QAAQ,EAAE;QACd,CAAC;QAED,IAAIC,EAAE,GAAGvB,QAAQ,CAAC,aAAa,EAAE/E,GAAG,CAAC+F,IAAI,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACnDL,KAAK,CAACY,EAAE,GAAGA,EAAE;QACbX,KAAK,CAACO,MAAM,CAAC9B,IAAI,GAAGkC,EAAE;MAC1B;MAEA,IAAG1B,SAAS,EAAE;QACVe,KAAK,CAACzD,IAAI,GAAG;UACTqE,KAAK,EAAExB,QAAQ,CAAC,YAAY,EAAES,SAAS,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC;QACpD,CAAC;MACL;MAEA,IAAGb,QAAQ,EAAE;QACTe,KAAK,CAACc,EAAE,GAAG,IAAI;QACfd,KAAK,CAACe,EAAE,GAAG1B,QAAQ,CAAC,cAAc,EAAES,SAAS,CAAC;QAC9CE,KAAK,CAACgB,EAAE,GAAG,EAAE;QACbhB,KAAK,CAACiB,EAAE,GAAG5B,QAAQ,CAAC,gBAAgB,EAAES,SAAS,CAAC;QAChDE,KAAK,CAACkB,EAAE,GAAG7B,QAAQ,CAAC,iBAAiB,EAAES,SAAS,CAAC;MACrD;MAEAX,IAAI,GAAG,CAAC7E,GAAG,CAAC6G,SAAS,CAACpC,EAAE,EAAEiB,KAAK,CAAC,CAAC;MACjCZ,IAAI,GAAG9E,GAAG,CAAC6G,SAAS,CAAC7F,KAAK,EAAE2E,KAAK,CAAC;;MAElC;MACAb,IAAI,CAACgC,cAAc,GAAG,IAAI;IAC9B;IAEA,IAAIC,OAAO,GAAGlH,EAAE,CAACgB,MAAM,CAAC,IAAI,CAAC,CAACA,MAAM,CAAC,gBAAgB,CAAC;IAEtD,IAAImG,GAAG,GAAGD,OAAO,CAAClF,SAAS,CAAC,iBAAiB,CAAC,CACzCC,IAAI,CAAC4C,WAAW,GAAGG,IAAI,GAAG,EAAE,CAAC;IAClC;IACAmC,GAAG,CAACjF,KAAK,EAAE,CAACkF,MAAM,CAAC,MAAM,EAAE,cAAc,CAAC,CACrChF,OAAO,CAAC,YAAY,EAAE,IAAI,CAAC,CAC3BV,IAAI,CAAC,WAAW,EAAE,iBAAiB,CAAC;IACzCyF,GAAG,CAACnD,IAAI,EAAE,CAACC,MAAM,EAAE;IACnBkD,GAAG,CAACjD,IAAI,CAAC9D,OAAO,CAACiH,UAAU,EAAEpC,IAAI,EAAErE,EAAE,CAAC;;IAEtC;IACA;IACA,IAAGiE,WAAW,EAAEG,IAAI,CAAC,CAAC,CAAC,CAACsC,GAAG,GAAG,CAAC;IAE/B,IAAIC,GAAG,GAAGL,OAAO,CAAClF,SAAS,CAAC,aAAa,CAAC,CACrCC,IAAI,CAAC6C,QAAQ,GAAGE,IAAI,GAAG,EAAE,CAAC;IAC/BuC,GAAG,CAACrF,KAAK,EAAE,CACNC,MAAM,CAAC,GAAG,CAAC,CAACC,OAAO,CAAC,WAAW,EAAE,IAAI,CAAC,CAClCD,MAAM,CAAC,MAAM,CAAC,CAACT,IAAI,CAAC,WAAW,EAAE,iBAAiB,CAAC;IAC5D6F,GAAG,CAACvD,IAAI,EAAE,CAACC,MAAM,EAAE;IACnBsD,GAAG,CAACvF,SAAS,CAAC,MAAM,CAAC,CAACkC,IAAI,CAAC9D,OAAO,CAACoH,cAAc,EAAEvC,IAAI,EAAErE,EAAE,CAAC;EAChE;EAEA,SAAS2B,SAAS,CAACzB,CAAC,EAAE;IAClB,IAAIK,KAAK,GAAGL,CAAC,CAAC,CAAC,CAAC,CAACK,KAAK;IACtB,IAAIkF,MAAM,GAAGlF,KAAK,CAACkF,MAAM,IAAI,CAAC,CAAC;IAC/B,IAAIoB,UAAU,GAAGpB,MAAM,CAAChE,IAAI,IAAI,CAAC,CAAC;IAElC,IAAIqF,OAAO,GAAG1H,EAAE,CAACgB,MAAM,CAAC,IAAI,CAAC,CAACA,MAAM,CAAC,gBAAgB,CAAC,CACjDgB,SAAS,CAAC,gBAAgB,CAAC,CAC3BC,IAAI,CAAC/B,QAAQ,CAACyH,OAAO,CAACxG,KAAK,EAAE,KAAK,CAAC,GAAG,CAACL,CAAC,CAAC,GAAG,EAAE,CAAC;IACpD4G,OAAO,CAACxF,KAAK,EAAE,CAACC,MAAM,CAAC,MAAM,CAAC,CAACC,OAAO,CAAC,WAAW,EAAE,IAAI,CAAC,CACpDV,IAAI,CAAC,GAAG,EAAE,eAAe,CAAC,CAC1BA,IAAI,CAAC,WAAW,EAAE,iBAAiB,CAAC;IACzCgG,OAAO,CAAC1D,IAAI,EAAE,CAACC,MAAM,EAAE;IAEvByD,OAAO,CAAC7G,IAAI,CAAC,UAASC,CAAC,EAAE;MACrB,IAAI8G,CAAC,GAAG5H,EAAE,CAACgB,MAAM,CAAC,IAAI,CAAC;MACvB,IAAI4D,EAAE,GAAG9D,CAAC,CAAC,CAAC,CAAC;MACb,IAAI+G,CAAC,GAAG,CAACjD,EAAE,CAACwB,GAAG,GAAG,CAAC,IAAIqB,UAAU,CAACf,KAAK,GAAG,CAAC,IAAI,CAAC;MAEhDkB,CAAC,CAAClH,KAAK,CAAC,cAAc,EAAEmH,CAAC,GAAG,IAAI,CAAC,CAC5B3D,IAAI,CAAC7D,KAAK,CAAC0B,IAAI,EAAE6C,EAAE,CAACmB,EAAE,IAAIM,MAAM,CAACyB,KAAK,CAAC;MAE5C,IAAGD,CAAC,EAAE;QACFD,CAAC,CAAC1D,IAAI,CAAC7D,KAAK,CAAC0H,MAAM,EAAEnD,EAAE,CAACuB,GAAG,IAAIsB,UAAU,CAACK,KAAK,CAAC;MACpD;IACJ,CAAC,CAAC;EACN;EAEA,SAAStF,UAAU,CAAC1B,CAAC,EAAE;IACnB,IAAIK,KAAK,GAAGL,CAAC,CAAC,CAAC,CAAC,CAACK,KAAK;IAEtB,IAAIgG,GAAG,GAAGnH,EAAE,CAACgB,MAAM,CAAC,IAAI,CAAC,CAACA,MAAM,CAAC,gBAAgB,CAAC,CAC7CgB,SAAS,CAAC,gBAAgB,CAAC,CAC3BC,IAAI,CAAC/B,QAAQ,CAACyH,OAAO,CAACxG,KAAK,EAAE,YAAY,CAAC,IAAIA,KAAK,CAAC4B,OAAO,GAAG,CAACjC,CAAC,CAAC,GAAG,EAAE,CAAC;IAC5EqG,GAAG,CAACjF,KAAK,EAAE,CAACC,MAAM,CAAC,MAAM,CAAC,CAACC,OAAO,CAAC,WAAW,EAAE,IAAI;IAChD;IAAA,CACCV,IAAI,CAAC,GAAG,EAAE,eAAe,CAAC,CAC1BA,IAAI,CAAC,WAAW,EAAE,iBAAiB,CAAC;IACzCyF,GAAG,CAACnD,IAAI,EAAE,CAACC,MAAM,EAAE;IAEnBkD,GAAG,CAACtG,IAAI,CAAC,YAAW;MAChB,IAAIgH,CAAC,GAAG1G,KAAK,CAACkB,IAAI,CAACqE,KAAK;MACxB,IAAIkB,CAAC,GAAG5H,EAAE,CAACgB,MAAM,CAAC,IAAI,CAAC;MAEvB4G,CAAC,CAAClH,KAAK,CAAC,cAAc,EAAEmH,CAAC,GAAG,IAAI,CAAC,CAC5B3D,IAAI,CAAC7D,KAAK,CAAC0B,IAAI,EAAEZ,KAAK,CAAC6G,SAAS,CAAC;MAEtC,IAAGH,CAAC,EAAE;QACFxH,KAAK,CAAC0H,MAAM,CAACH,CAAC,EAAEzG,KAAK,CAACkB,IAAI,CAACyF,KAAK,CAAC;MACrC;IACJ,CAAC,CAAC;EACN;EAEA,SAASlF,YAAY,CAAC9B,CAAC,EAAE;IACrB,IAAIK,KAAK,GAAGL,CAAC,CAAC,CAAC,CAAC,CAACK,KAAK;IAEtB,IAAIgG,GAAG,GAAGnH,EAAE,CAACgB,MAAM,CAAC,IAAI,CAAC,CAACA,MAAM,CAAC,gBAAgB,CAAC,CAC7CgB,SAAS,CAAC,mBAAmB,CAAC,CAC9BC,IAAI,CAACd,KAAK,CAACoC,IAAI,KAAK,aAAa,IAAIpC,KAAK,CAAC4B,OAAO,GAAG,CAACjC,CAAC,EAAEA,CAAC,CAAC,GAAG,EAAE,CAAC;IACtEqG,GAAG,CAACjF,KAAK,EAAE,CAACC,MAAM,CAAC,MAAM,CAAC,CAACC,OAAO,CAAC,cAAc,EAAE,IAAI,CAAC,CACnDV,IAAI,CAAC,GAAG,EAAE,UAASuG,CAAC,EAAEC,CAAC,EAAE;MACtB,IAAGA,CAAC,EAAE,OAAO,sBAAsB,CAAC,CAAC;MACrC,OAAO,oBAAoB,CAAC,CAAC;IACjC,CAAC,CAAC,CACDxG,IAAI,CAAC,WAAW,EAAE,iBAAiB,CAAC,CACpChB,KAAK,CAAC,mBAAmB,EAAE,CAAC,CAAC;IAClCyG,GAAG,CAACnD,IAAI,EAAE,CAACC,MAAM,EAAE;IAEnBkD,GAAG,CAACtG,IAAI,CAAC,UAASoH,CAAC,EAAEC,CAAC,EAAE;MACpB,IAAIC,SAAS,GAAGhH,KAAK,CAAC+G,CAAC,GAAG,YAAY,GAAG,YAAY,CAAC;MACtD,IAAIL,CAAC,GAAGM,SAAS,CAAC9F,IAAI,CAACqE,KAAK;MAC5B,IAAIkB,CAAC,GAAG5H,EAAE,CAACgB,MAAM,CAAC,IAAI,CAAC;MAEvB4G,CAAC,CAAClH,KAAK,CAAC,cAAc,EAAEmH,CAAC,GAAG,IAAI,CAAC,CAC5B3D,IAAI,CAAC7D,KAAK,CAAC0B,IAAI,EAAEoG,SAAS,CAACH,SAAS,CAAC;MAE1C,IAAGH,CAAC,EAAE;QACFxH,KAAK,CAAC0H,MAAM,CAACH,CAAC,EAAEO,SAAS,CAAC9F,IAAI,CAACyF,KAAK,CAAC;MACzC;IACJ,CAAC,CAAC;EACN;EAEA,SAASjF,SAAS,CAAC/B,CAAC,EAAE;IAClB,IAAIK,KAAK,GAAGL,CAAC,CAAC,CAAC,CAAC,CAACK,KAAK;IAEtB,IAAIgG,GAAG,GAAGnH,EAAE,CAACgB,MAAM,CAAC,IAAI,CAAC,CAACA,MAAM,CAAC,gBAAgB,CAAC,CAC7CgB,SAAS,CAAC,iBAAiB,CAAC,CAC5BC,IAAI,CAACd,KAAK,CAACoC,IAAI,KAAK,MAAM,IAAIpC,KAAK,CAAC4B,OAAO,GAAG,CAACjC,CAAC,EAAEA,CAAC,CAAC,GAAG,EAAE,CAAC;IAC/DqG,GAAG,CAACjF,KAAK,EAAE,CAACC,MAAM,CAAC,MAAM,CAAC,CAACC,OAAO,CAAC,YAAY,EAAE,IAAI,CAAC,CACjDV,IAAI,CAAC,GAAG,EAAE,UAASuG,CAAC,EAAEC,CAAC,EAAE;MACtB,IAAGA,CAAC,EAAE,OAAO,kBAAkB,CAAC,CAAC;MACjC,OAAO,eAAe,CAAC,CAAC;IAC5B,CAAC,CAAC,CACDxG,IAAI,CAAC,WAAW,EAAE,iBAAiB,CAAC,CACpChB,KAAK,CAAC,mBAAmB,EAAE,CAAC,CAAC;IAClCyG,GAAG,CAACnD,IAAI,EAAE,CAACC,MAAM,EAAE;IAEnBkD,GAAG,CAACtG,IAAI,CAAC,UAASoH,CAAC,EAAEC,CAAC,EAAE;MACpB,IAAIC,SAAS,GAAGhH,KAAK,CAAC+G,CAAC,GAAG,YAAY,GAAG,YAAY,CAAC;MACtD,IAAIL,CAAC,GAAGM,SAAS,CAAC9F,IAAI,CAACqE,KAAK;MAC5B,IAAIkB,CAAC,GAAG5H,EAAE,CAACgB,MAAM,CAAC,IAAI,CAAC;MAEvB4G,CAAC,CAAClH,KAAK,CAAC,MAAM,EAAE,MAAM,CAAC,CAClBwD,IAAI,CAAC9D,OAAO,CAACgI,QAAQ,EAAED,SAAS,CAAC9F,IAAI,CAACgG,IAAI,EAAER,CAAC,CAAC;MAEnD,IAAGA,CAAC,EAAE;QACFxH,KAAK,CAAC0H,MAAM,CAACH,CAAC,EAAEO,SAAS,CAAC9F,IAAI,CAACyF,KAAK,CAAC;MACzC;IACJ,CAAC,CAAC;EACN;EAEA,SAASrF,SAAS,CAAC3B,CAAC,EAAE;IAClB,IAAIK,KAAK,GAAGL,CAAC,CAAC,CAAC,CAAC,CAACK,KAAK;IAEtB,IAAIgG,GAAG,GAAGnH,EAAE,CAACgB,MAAM,CAAC,IAAI,CAAC,CAACA,MAAM,CAAC,gBAAgB,CAAC,CAC7CgB,SAAS,CAAC,gBAAgB,CAAC,CAC3BC,IAAI,CAAC/B,QAAQ,CAACyH,OAAO,CAACxG,KAAK,EAAE,KAAK,CAAC,IAAIA,KAAK,CAAC4B,OAAO,GAAG,CAACjC,CAAC,CAAC,GAAG,EAAE,CAAC;IACrEqG,GAAG,CAACjF,KAAK,EAAE,CAACC,MAAM,CAAC,MAAM,CAAC,CAACC,OAAO,CAAC,WAAW,EAAE,IAAI,CAAC,CAChDV,IAAI,CAAC,GAAG,EAAE,eAAe,CAAC,CAC1BA,IAAI,CAAC,WAAW,EAAE,iBAAiB,CAAC;IACzCyF,GAAG,CAACnD,IAAI,EAAE,CAACC,MAAM,EAAE;IAEnB,IAAGkD,GAAG,CAAC5C,IAAI,EAAE,EAAE4C,GAAG,CAACjD,IAAI,CAAC3D,QAAQ,EAAEO,CAAC,CAAC,CAAC,CAAC,EAAEK,KAAK,CAAC;EAClD;AACJ,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}