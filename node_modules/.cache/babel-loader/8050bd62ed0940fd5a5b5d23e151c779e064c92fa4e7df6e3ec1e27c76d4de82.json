{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar d3 = require('d3');\nvar Registry = require('../../registry');\nvar Plots = require('../../plots/plots');\nvar Lib = require('../../lib');\nvar Drawing = require('../drawing');\nvar Color = require('../color');\nvar Titles = require('../titles');\nvar Cartesian = require('../../plots/cartesian');\nvar axisIDs = require('../../plots/cartesian/axis_ids');\nvar dragElement = require('../dragelement');\nvar setCursor = require('../../lib/setcursor');\nvar constants = require('./constants');\nmodule.exports = function (gd) {\n  var fullLayout = gd._fullLayout;\n  var rangeSliderData = fullLayout._rangeSliderData;\n  for (var i = 0; i < rangeSliderData.length; i++) {\n    var opts = rangeSliderData[i][constants.name];\n    // fullLayout._uid may not exist when we call makeData\n    opts._clipId = opts._id + '-' + fullLayout._uid;\n  }\n\n  /*\n   * <g container />\n   *  <rect bg />\n   *  < .... range plot />\n   *  <rect mask-min />\n   *  <rect mask-max />\n   *  <rect slidebox />\n   *  <g grabber-min />\n   *      <rect handle-min />\n   *      <rect grabare-min />\n   *  <g grabber-max />\n   *      <rect handle-max />\n   *      <rect grabare-max />\n   *\n   *  ...\n   */\n\n  function keyFunction(axisOpts) {\n    return axisOpts._name;\n  }\n  var rangeSliders = fullLayout._infolayer.selectAll('g.' + constants.containerClassName).data(rangeSliderData, keyFunction);\n\n  // remove exiting sliders and their corresponding clip paths\n  rangeSliders.exit().each(function (axisOpts) {\n    var opts = axisOpts[constants.name];\n    fullLayout._topdefs.select('#' + opts._clipId).remove();\n  }).remove();\n\n  // return early if no range slider is visible\n  if (rangeSliderData.length === 0) return;\n  rangeSliders.enter().append('g').classed(constants.containerClassName, true).attr('pointer-events', 'all');\n\n  // for all present range sliders\n  rangeSliders.each(function (axisOpts) {\n    var rangeSlider = d3.select(this);\n    var opts = axisOpts[constants.name];\n    var oppAxisOpts = fullLayout[axisIDs.id2name(axisOpts.anchor)];\n    var oppAxisRangeOpts = opts[axisIDs.id2name(axisOpts.anchor)];\n\n    // update range\n    // Expand slider range to the axis range\n    if (opts.range) {\n      var rng = Lib.simpleMap(opts.range, axisOpts.r2l);\n      var axRng = Lib.simpleMap(axisOpts.range, axisOpts.r2l);\n      var newRng;\n      if (axRng[0] < axRng[1]) {\n        newRng = [Math.min(rng[0], axRng[0]), Math.max(rng[1], axRng[1])];\n      } else {\n        newRng = [Math.max(rng[0], axRng[0]), Math.min(rng[1], axRng[1])];\n      }\n      opts.range = opts._input.range = Lib.simpleMap(newRng, axisOpts.l2r);\n    }\n    axisOpts.cleanRange('rangeslider.range');\n\n    // update range slider dimensions\n\n    var margin = fullLayout.margin;\n    var graphSize = fullLayout._size;\n    var domain = axisOpts.domain;\n    var tickHeight = opts._tickHeight;\n    var oppBottom = opts._oppBottom;\n    opts._width = graphSize.w * (domain[1] - domain[0]);\n    var x = Math.round(margin.l + graphSize.w * domain[0]);\n    var y = Math.round(graphSize.t + graphSize.h * (1 - oppBottom) + tickHeight + opts._offsetShift + constants.extraPad);\n    rangeSlider.attr('transform', 'translate(' + x + ',' + y + ')');\n\n    // update data <--> pixel coordinate conversion methods\n\n    var range0 = axisOpts.r2l(opts.range[0]);\n    var range1 = axisOpts.r2l(opts.range[1]);\n    var dist = range1 - range0;\n    opts.p2d = function (v) {\n      return v / opts._width * dist + range0;\n    };\n    opts.d2p = function (v) {\n      return (v - range0) / dist * opts._width;\n    };\n    opts._rl = [range0, range1];\n    if (oppAxisRangeOpts.rangemode !== 'match') {\n      var range0OppAxis = oppAxisOpts.r2l(oppAxisRangeOpts.range[0]);\n      var range1OppAxis = oppAxisOpts.r2l(oppAxisRangeOpts.range[1]);\n      var distOppAxis = range1OppAxis - range0OppAxis;\n      opts.d2pOppAxis = function (v) {\n        return (v - range0OppAxis) / distOppAxis * opts._height;\n      };\n    }\n\n    // update inner nodes\n\n    rangeSlider.call(drawBg, gd, axisOpts, opts).call(addClipPath, gd, axisOpts, opts).call(drawRangePlot, gd, axisOpts, opts).call(drawMasks, gd, axisOpts, opts, oppAxisRangeOpts).call(drawSlideBox, gd, axisOpts, opts).call(drawGrabbers, gd, axisOpts, opts);\n\n    // setup drag element\n    setupDragElement(rangeSlider, gd, axisOpts, opts);\n\n    // update current range\n    setPixelRange(rangeSlider, gd, axisOpts, opts, oppAxisOpts, oppAxisRangeOpts);\n\n    // title goes next to range slider instead of tick labels, so\n    // just take it over and draw it from here\n    if (axisOpts.side === 'bottom') {\n      Titles.draw(gd, axisOpts._id + 'title', {\n        propContainer: axisOpts,\n        propName: axisOpts._name + '.title',\n        placeholder: fullLayout._dfltTitle.x,\n        attributes: {\n          x: axisOpts._offset + axisOpts._length / 2,\n          y: y + opts._height + opts._offsetShift + 10 + 1.5 * axisOpts.title.font.size,\n          'text-anchor': 'middle'\n        }\n      });\n    }\n  });\n};\nfunction setupDragElement(rangeSlider, gd, axisOpts, opts) {\n  var slideBox = rangeSlider.select('rect.' + constants.slideBoxClassName).node();\n  var grabAreaMin = rangeSlider.select('rect.' + constants.grabAreaMinClassName).node();\n  var grabAreaMax = rangeSlider.select('rect.' + constants.grabAreaMaxClassName).node();\n  rangeSlider.on('mousedown', function () {\n    var event = d3.event;\n    var target = event.target;\n    var startX = event.clientX;\n    var offsetX = startX - rangeSlider.node().getBoundingClientRect().left;\n    var minVal = opts.d2p(axisOpts._rl[0]);\n    var maxVal = opts.d2p(axisOpts._rl[1]);\n    var dragCover = dragElement.coverSlip();\n    dragCover.addEventListener('mousemove', mouseMove);\n    dragCover.addEventListener('mouseup', mouseUp);\n    function mouseMove(e) {\n      var delta = +e.clientX - startX;\n      var pixelMin, pixelMax, cursor;\n      switch (target) {\n        case slideBox:\n          cursor = 'ew-resize';\n          pixelMin = minVal + delta;\n          pixelMax = maxVal + delta;\n          break;\n        case grabAreaMin:\n          cursor = 'col-resize';\n          pixelMin = minVal + delta;\n          pixelMax = maxVal;\n          break;\n        case grabAreaMax:\n          cursor = 'col-resize';\n          pixelMin = minVal;\n          pixelMax = maxVal + delta;\n          break;\n        default:\n          cursor = 'ew-resize';\n          pixelMin = offsetX;\n          pixelMax = offsetX + delta;\n          break;\n      }\n      if (pixelMax < pixelMin) {\n        var tmp = pixelMax;\n        pixelMax = pixelMin;\n        pixelMin = tmp;\n      }\n      opts._pixelMin = pixelMin;\n      opts._pixelMax = pixelMax;\n      setCursor(d3.select(dragCover), cursor);\n      setDataRange(rangeSlider, gd, axisOpts, opts);\n    }\n    function mouseUp() {\n      dragCover.removeEventListener('mousemove', mouseMove);\n      dragCover.removeEventListener('mouseup', mouseUp);\n      Lib.removeElement(dragCover);\n    }\n  });\n}\nfunction setDataRange(rangeSlider, gd, axisOpts, opts) {\n  function clamp(v) {\n    return axisOpts.l2r(Lib.constrain(v, opts._rl[0], opts._rl[1]));\n  }\n  var dataMin = clamp(opts.p2d(opts._pixelMin));\n  var dataMax = clamp(opts.p2d(opts._pixelMax));\n  window.requestAnimationFrame(function () {\n    Registry.call('_guiRelayout', gd, axisOpts._name + '.range', [dataMin, dataMax]);\n  });\n}\nfunction setPixelRange(rangeSlider, gd, axisOpts, opts, oppAxisOpts, oppAxisRangeOpts) {\n  var hw2 = constants.handleWidth / 2;\n  function clamp(v) {\n    return Lib.constrain(v, 0, opts._width);\n  }\n  function clampOppAxis(v) {\n    return Lib.constrain(v, 0, opts._height);\n  }\n  function clampHandle(v) {\n    return Lib.constrain(v, -hw2, opts._width + hw2);\n  }\n  var pixelMin = clamp(opts.d2p(axisOpts._rl[0]));\n  var pixelMax = clamp(opts.d2p(axisOpts._rl[1]));\n  rangeSlider.select('rect.' + constants.slideBoxClassName).attr('x', pixelMin).attr('width', pixelMax - pixelMin);\n  rangeSlider.select('rect.' + constants.maskMinClassName).attr('width', pixelMin);\n  rangeSlider.select('rect.' + constants.maskMaxClassName).attr('x', pixelMax).attr('width', opts._width - pixelMax);\n  if (oppAxisRangeOpts.rangemode !== 'match') {\n    var pixelMinOppAxis = opts._height - clampOppAxis(opts.d2pOppAxis(oppAxisOpts._rl[1]));\n    var pixelMaxOppAxis = opts._height - clampOppAxis(opts.d2pOppAxis(oppAxisOpts._rl[0]));\n    rangeSlider.select('rect.' + constants.maskMinOppAxisClassName).attr('x', pixelMin).attr('height', pixelMinOppAxis).attr('width', pixelMax - pixelMin);\n    rangeSlider.select('rect.' + constants.maskMaxOppAxisClassName).attr('x', pixelMin).attr('y', pixelMaxOppAxis).attr('height', opts._height - pixelMaxOppAxis).attr('width', pixelMax - pixelMin);\n    rangeSlider.select('rect.' + constants.slideBoxClassName).attr('y', pixelMinOppAxis).attr('height', pixelMaxOppAxis - pixelMinOppAxis);\n  }\n\n  // add offset for crispier corners\n  // https://github.com/plotly/plotly.js/pull/1409\n  var offset = 0.5;\n  var xMin = Math.round(clampHandle(pixelMin - hw2)) - offset;\n  var xMax = Math.round(clampHandle(pixelMax - hw2)) + offset;\n  rangeSlider.select('g.' + constants.grabberMinClassName).attr('transform', 'translate(' + xMin + ',' + offset + ')');\n  rangeSlider.select('g.' + constants.grabberMaxClassName).attr('transform', 'translate(' + xMax + ',' + offset + ')');\n}\nfunction drawBg(rangeSlider, gd, axisOpts, opts) {\n  var bg = Lib.ensureSingle(rangeSlider, 'rect', constants.bgClassName, function (s) {\n    s.attr({\n      x: 0,\n      y: 0,\n      'shape-rendering': 'crispEdges'\n    });\n  });\n  var borderCorrect = opts.borderwidth % 2 === 0 ? opts.borderwidth : opts.borderwidth - 1;\n  var offsetShift = -opts._offsetShift;\n  var lw = Drawing.crispRound(gd, opts.borderwidth);\n  bg.attr({\n    width: opts._width + borderCorrect,\n    height: opts._height + borderCorrect,\n    transform: 'translate(' + offsetShift + ',' + offsetShift + ')',\n    fill: opts.bgcolor,\n    stroke: opts.bordercolor,\n    'stroke-width': lw\n  });\n}\nfunction addClipPath(rangeSlider, gd, axisOpts, opts) {\n  var fullLayout = gd._fullLayout;\n  var clipPath = Lib.ensureSingleById(fullLayout._topdefs, 'clipPath', opts._clipId, function (s) {\n    s.append('rect').attr({\n      x: 0,\n      y: 0\n    });\n  });\n  clipPath.select('rect').attr({\n    width: opts._width,\n    height: opts._height\n  });\n}\nfunction drawRangePlot(rangeSlider, gd, axisOpts, opts) {\n  var calcData = gd.calcdata;\n  var rangePlots = rangeSlider.selectAll('g.' + constants.rangePlotClassName).data(axisOpts._subplotsWith, Lib.identity);\n  rangePlots.enter().append('g').attr('class', function (id) {\n    return constants.rangePlotClassName + ' ' + id;\n  }).call(Drawing.setClipUrl, opts._clipId, gd);\n  rangePlots.order();\n  rangePlots.exit().remove();\n  var mainplotinfo;\n  rangePlots.each(function (id, i) {\n    var plotgroup = d3.select(this);\n    var isMainPlot = i === 0;\n    var oppAxisOpts = axisIDs.getFromId(gd, id, 'y');\n    var oppAxisName = oppAxisOpts._name;\n    var oppAxisRangeOpts = opts[oppAxisName];\n    var mockFigure = {\n      data: [],\n      layout: {\n        xaxis: {\n          type: axisOpts.type,\n          domain: [0, 1],\n          range: opts.range.slice(),\n          calendar: axisOpts.calendar\n        },\n        width: opts._width,\n        height: opts._height,\n        margin: {\n          t: 0,\n          b: 0,\n          l: 0,\n          r: 0\n        }\n      },\n      _context: gd._context\n    };\n    mockFigure.layout[oppAxisName] = {\n      type: oppAxisOpts.type,\n      domain: [0, 1],\n      range: oppAxisRangeOpts.rangemode !== 'match' ? oppAxisRangeOpts.range.slice() : oppAxisOpts.range.slice(),\n      calendar: oppAxisOpts.calendar\n    };\n    Plots.supplyDefaults(mockFigure);\n    var xa = mockFigure._fullLayout.xaxis;\n    var ya = mockFigure._fullLayout[oppAxisName];\n    xa.clearCalc();\n    xa.setScale();\n    ya.clearCalc();\n    ya.setScale();\n    var plotinfo = {\n      id: id,\n      plotgroup: plotgroup,\n      xaxis: xa,\n      yaxis: ya,\n      isRangePlot: true\n    };\n    if (isMainPlot) mainplotinfo = plotinfo;else {\n      plotinfo.mainplot = 'xy';\n      plotinfo.mainplotinfo = mainplotinfo;\n    }\n    Cartesian.rangePlot(gd, plotinfo, filterRangePlotCalcData(calcData, id));\n  });\n}\nfunction filterRangePlotCalcData(calcData, subplotId) {\n  var out = [];\n  for (var i = 0; i < calcData.length; i++) {\n    var calcTrace = calcData[i];\n    var trace = calcTrace[0].trace;\n    if (trace.xaxis + trace.yaxis === subplotId) {\n      out.push(calcTrace);\n    }\n  }\n  return out;\n}\nfunction drawMasks(rangeSlider, gd, axisOpts, opts, oppAxisRangeOpts) {\n  var maskMin = Lib.ensureSingle(rangeSlider, 'rect', constants.maskMinClassName, function (s) {\n    s.attr({\n      x: 0,\n      y: 0,\n      'shape-rendering': 'crispEdges'\n    });\n  });\n  maskMin.attr('height', opts._height).call(Color.fill, constants.maskColor);\n  var maskMax = Lib.ensureSingle(rangeSlider, 'rect', constants.maskMaxClassName, function (s) {\n    s.attr({\n      y: 0,\n      'shape-rendering': 'crispEdges'\n    });\n  });\n  maskMax.attr('height', opts._height).call(Color.fill, constants.maskColor);\n\n  // masks used for oppAxis zoom\n  if (oppAxisRangeOpts.rangemode !== 'match') {\n    var maskMinOppAxis = Lib.ensureSingle(rangeSlider, 'rect', constants.maskMinOppAxisClassName, function (s) {\n      s.attr({\n        y: 0,\n        'shape-rendering': 'crispEdges'\n      });\n    });\n    maskMinOppAxis.attr('width', opts._width).call(Color.fill, constants.maskOppAxisColor);\n    var maskMaxOppAxis = Lib.ensureSingle(rangeSlider, 'rect', constants.maskMaxOppAxisClassName, function (s) {\n      s.attr({\n        y: 0,\n        'shape-rendering': 'crispEdges'\n      });\n    });\n    maskMaxOppAxis.attr('width', opts._width).style('border-top', constants.maskOppBorder).call(Color.fill, constants.maskOppAxisColor);\n  }\n}\nfunction drawSlideBox(rangeSlider, gd, axisOpts, opts) {\n  if (gd._context.staticPlot) return;\n  var slideBox = Lib.ensureSingle(rangeSlider, 'rect', constants.slideBoxClassName, function (s) {\n    s.attr({\n      y: 0,\n      cursor: constants.slideBoxCursor,\n      'shape-rendering': 'crispEdges'\n    });\n  });\n  slideBox.attr({\n    height: opts._height,\n    fill: constants.slideBoxFill\n  });\n}\nfunction drawGrabbers(rangeSlider, gd, axisOpts, opts) {\n  // <g grabber />\n  var grabberMin = Lib.ensureSingle(rangeSlider, 'g', constants.grabberMinClassName);\n  var grabberMax = Lib.ensureSingle(rangeSlider, 'g', constants.grabberMaxClassName);\n\n  // <g handle />\n  var handleFixAttrs = {\n    x: 0,\n    width: constants.handleWidth,\n    rx: constants.handleRadius,\n    fill: Color.background,\n    stroke: Color.defaultLine,\n    'stroke-width': constants.handleStrokeWidth,\n    'shape-rendering': 'crispEdges'\n  };\n  var handleDynamicAttrs = {\n    y: Math.round(opts._height / 4),\n    height: Math.round(opts._height / 2)\n  };\n  var handleMin = Lib.ensureSingle(grabberMin, 'rect', constants.handleMinClassName, function (s) {\n    s.attr(handleFixAttrs);\n  });\n  handleMin.attr(handleDynamicAttrs);\n  var handleMax = Lib.ensureSingle(grabberMax, 'rect', constants.handleMaxClassName, function (s) {\n    s.attr(handleFixAttrs);\n  });\n  handleMax.attr(handleDynamicAttrs);\n\n  // <g grabarea />\n  if (gd._context.staticPlot) return;\n  var grabAreaFixAttrs = {\n    width: constants.grabAreaWidth,\n    x: 0,\n    y: 0,\n    fill: constants.grabAreaFill,\n    cursor: constants.grabAreaCursor\n  };\n  var grabAreaMin = Lib.ensureSingle(grabberMin, 'rect', constants.grabAreaMinClassName, function (s) {\n    s.attr(grabAreaFixAttrs);\n  });\n  grabAreaMin.attr('height', opts._height);\n  var grabAreaMax = Lib.ensureSingle(grabberMax, 'rect', constants.grabAreaMaxClassName, function (s) {\n    s.attr(grabAreaFixAttrs);\n  });\n  grabAreaMax.attr('height', opts._height);\n}","map":{"version":3,"names":["d3","require","Registry","Plots","Lib","Drawing","Color","Titles","Cartesian","axisIDs","dragElement","setCursor","constants","module","exports","gd","fullLayout","_fullLayout","rangeSliderData","_rangeSliderData","i","length","opts","name","_clipId","_id","_uid","keyFunction","axisOpts","_name","rangeSliders","_infolayer","selectAll","containerClassName","data","exit","each","_topdefs","select","remove","enter","append","classed","attr","rangeSlider","oppAxisOpts","id2name","anchor","oppAxisRangeOpts","range","rng","simpleMap","r2l","axRng","newRng","Math","min","max","_input","l2r","cleanRange","margin","graphSize","_size","domain","tickHeight","_tickHeight","oppBottom","_oppBottom","_width","w","x","round","l","y","t","h","_offsetShift","extraPad","range0","range1","dist","p2d","v","d2p","_rl","rangemode","range0OppAxis","range1OppAxis","distOppAxis","d2pOppAxis","_height","call","drawBg","addClipPath","drawRangePlot","drawMasks","drawSlideBox","drawGrabbers","setupDragElement","setPixelRange","side","draw","propContainer","propName","placeholder","_dfltTitle","attributes","_offset","_length","title","font","size","slideBox","slideBoxClassName","node","grabAreaMin","grabAreaMinClassName","grabAreaMax","grabAreaMaxClassName","on","event","target","startX","clientX","offsetX","getBoundingClientRect","left","minVal","maxVal","dragCover","coverSlip","addEventListener","mouseMove","mouseUp","e","delta","pixelMin","pixelMax","cursor","tmp","_pixelMin","_pixelMax","setDataRange","removeEventListener","removeElement","clamp","constrain","dataMin","dataMax","window","requestAnimationFrame","hw2","handleWidth","clampOppAxis","clampHandle","maskMinClassName","maskMaxClassName","pixelMinOppAxis","pixelMaxOppAxis","maskMinOppAxisClassName","maskMaxOppAxisClassName","offset","xMin","xMax","grabberMinClassName","grabberMaxClassName","bg","ensureSingle","bgClassName","s","borderCorrect","borderwidth","offsetShift","lw","crispRound","width","height","transform","fill","bgcolor","stroke","bordercolor","clipPath","ensureSingleById","calcData","calcdata","rangePlots","rangePlotClassName","_subplotsWith","identity","id","setClipUrl","order","mainplotinfo","plotgroup","isMainPlot","getFromId","oppAxisName","mockFigure","layout","xaxis","type","slice","calendar","b","r","_context","supplyDefaults","xa","ya","clearCalc","setScale","plotinfo","yaxis","isRangePlot","mainplot","rangePlot","filterRangePlotCalcData","subplotId","out","calcTrace","trace","push","maskMin","maskColor","maskMax","maskMinOppAxis","maskOppAxisColor","maskMaxOppAxis","style","maskOppBorder","staticPlot","slideBoxCursor","slideBoxFill","grabberMin","grabberMax","handleFixAttrs","rx","handleRadius","background","defaultLine","handleStrokeWidth","handleDynamicAttrs","handleMin","handleMinClassName","handleMax","handleMaxClassName","grabAreaFixAttrs","grabAreaWidth","grabAreaFill","grabAreaCursor"],"sources":["/home/yasmin/√Årea de Trabalho/Frontend/node_modules/plotly.js/src/components/rangeslider/draw.js"],"sourcesContent":["/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar d3 = require('d3');\n\nvar Registry = require('../../registry');\nvar Plots = require('../../plots/plots');\n\nvar Lib = require('../../lib');\nvar Drawing = require('../drawing');\nvar Color = require('../color');\nvar Titles = require('../titles');\n\nvar Cartesian = require('../../plots/cartesian');\nvar axisIDs = require('../../plots/cartesian/axis_ids');\n\nvar dragElement = require('../dragelement');\nvar setCursor = require('../../lib/setcursor');\n\nvar constants = require('./constants');\n\nmodule.exports = function(gd) {\n    var fullLayout = gd._fullLayout;\n    var rangeSliderData = fullLayout._rangeSliderData;\n    for(var i = 0; i < rangeSliderData.length; i++) {\n        var opts = rangeSliderData[i][constants.name];\n        // fullLayout._uid may not exist when we call makeData\n        opts._clipId = opts._id + '-' + fullLayout._uid;\n    }\n\n    /*\n     * <g container />\n     *  <rect bg />\n     *  < .... range plot />\n     *  <rect mask-min />\n     *  <rect mask-max />\n     *  <rect slidebox />\n     *  <g grabber-min />\n     *      <rect handle-min />\n     *      <rect grabare-min />\n     *  <g grabber-max />\n     *      <rect handle-max />\n     *      <rect grabare-max />\n     *\n     *  ...\n     */\n\n    function keyFunction(axisOpts) {\n        return axisOpts._name;\n    }\n\n    var rangeSliders = fullLayout._infolayer\n        .selectAll('g.' + constants.containerClassName)\n        .data(rangeSliderData, keyFunction);\n\n    // remove exiting sliders and their corresponding clip paths\n    rangeSliders.exit().each(function(axisOpts) {\n        var opts = axisOpts[constants.name];\n        fullLayout._topdefs.select('#' + opts._clipId).remove();\n    }).remove();\n\n    // return early if no range slider is visible\n    if(rangeSliderData.length === 0) return;\n\n    rangeSliders.enter().append('g')\n        .classed(constants.containerClassName, true)\n        .attr('pointer-events', 'all');\n\n    // for all present range sliders\n    rangeSliders.each(function(axisOpts) {\n        var rangeSlider = d3.select(this);\n        var opts = axisOpts[constants.name];\n        var oppAxisOpts = fullLayout[axisIDs.id2name(axisOpts.anchor)];\n        var oppAxisRangeOpts = opts[axisIDs.id2name(axisOpts.anchor)];\n\n        // update range\n        // Expand slider range to the axis range\n        if(opts.range) {\n            var rng = Lib.simpleMap(opts.range, axisOpts.r2l);\n            var axRng = Lib.simpleMap(axisOpts.range, axisOpts.r2l);\n            var newRng;\n\n            if(axRng[0] < axRng[1]) {\n                newRng = [\n                    Math.min(rng[0], axRng[0]),\n                    Math.max(rng[1], axRng[1])\n                ];\n            } else {\n                newRng = [\n                    Math.max(rng[0], axRng[0]),\n                    Math.min(rng[1], axRng[1])\n                ];\n            }\n\n            opts.range = opts._input.range = Lib.simpleMap(newRng, axisOpts.l2r);\n        }\n\n        axisOpts.cleanRange('rangeslider.range');\n\n        // update range slider dimensions\n\n        var margin = fullLayout.margin;\n        var graphSize = fullLayout._size;\n        var domain = axisOpts.domain;\n        var tickHeight = opts._tickHeight;\n\n        var oppBottom = opts._oppBottom;\n\n        opts._width = graphSize.w * (domain[1] - domain[0]);\n\n        var x = Math.round(margin.l + (graphSize.w * domain[0]));\n\n        var y = Math.round(\n            graphSize.t + graphSize.h * (1 - oppBottom) +\n            tickHeight +\n            opts._offsetShift + constants.extraPad\n        );\n\n        rangeSlider.attr('transform', 'translate(' + x + ',' + y + ')');\n\n        // update data <--> pixel coordinate conversion methods\n\n        var range0 = axisOpts.r2l(opts.range[0]);\n        var range1 = axisOpts.r2l(opts.range[1]);\n        var dist = range1 - range0;\n\n        opts.p2d = function(v) {\n            return (v / opts._width) * dist + range0;\n        };\n\n        opts.d2p = function(v) {\n            return (v - range0) / dist * opts._width;\n        };\n\n        opts._rl = [range0, range1];\n\n        if(oppAxisRangeOpts.rangemode !== 'match') {\n            var range0OppAxis = oppAxisOpts.r2l(oppAxisRangeOpts.range[0]);\n            var range1OppAxis = oppAxisOpts.r2l(oppAxisRangeOpts.range[1]);\n            var distOppAxis = range1OppAxis - range0OppAxis;\n\n            opts.d2pOppAxis = function(v) {\n                return (v - range0OppAxis) / distOppAxis * opts._height;\n            };\n        }\n\n        // update inner nodes\n\n        rangeSlider\n            .call(drawBg, gd, axisOpts, opts)\n            .call(addClipPath, gd, axisOpts, opts)\n            .call(drawRangePlot, gd, axisOpts, opts)\n            .call(drawMasks, gd, axisOpts, opts, oppAxisRangeOpts)\n            .call(drawSlideBox, gd, axisOpts, opts)\n            .call(drawGrabbers, gd, axisOpts, opts);\n\n        // setup drag element\n        setupDragElement(rangeSlider, gd, axisOpts, opts);\n\n        // update current range\n        setPixelRange(rangeSlider, gd, axisOpts, opts, oppAxisOpts, oppAxisRangeOpts);\n\n        // title goes next to range slider instead of tick labels, so\n        // just take it over and draw it from here\n        if(axisOpts.side === 'bottom') {\n            Titles.draw(gd, axisOpts._id + 'title', {\n                propContainer: axisOpts,\n                propName: axisOpts._name + '.title',\n                placeholder: fullLayout._dfltTitle.x,\n                attributes: {\n                    x: axisOpts._offset + axisOpts._length / 2,\n                    y: y + opts._height + opts._offsetShift + 10 + 1.5 * axisOpts.title.font.size,\n                    'text-anchor': 'middle'\n                }\n            });\n        }\n    });\n};\n\nfunction setupDragElement(rangeSlider, gd, axisOpts, opts) {\n    var slideBox = rangeSlider.select('rect.' + constants.slideBoxClassName).node();\n    var grabAreaMin = rangeSlider.select('rect.' + constants.grabAreaMinClassName).node();\n    var grabAreaMax = rangeSlider.select('rect.' + constants.grabAreaMaxClassName).node();\n\n    rangeSlider.on('mousedown', function() {\n        var event = d3.event;\n        var target = event.target;\n        var startX = event.clientX;\n        var offsetX = startX - rangeSlider.node().getBoundingClientRect().left;\n        var minVal = opts.d2p(axisOpts._rl[0]);\n        var maxVal = opts.d2p(axisOpts._rl[1]);\n\n        var dragCover = dragElement.coverSlip();\n\n        dragCover.addEventListener('mousemove', mouseMove);\n        dragCover.addEventListener('mouseup', mouseUp);\n\n        function mouseMove(e) {\n            var delta = +e.clientX - startX;\n            var pixelMin, pixelMax, cursor;\n\n            switch(target) {\n                case slideBox:\n                    cursor = 'ew-resize';\n                    pixelMin = minVal + delta;\n                    pixelMax = maxVal + delta;\n                    break;\n\n                case grabAreaMin:\n                    cursor = 'col-resize';\n                    pixelMin = minVal + delta;\n                    pixelMax = maxVal;\n                    break;\n\n                case grabAreaMax:\n                    cursor = 'col-resize';\n                    pixelMin = minVal;\n                    pixelMax = maxVal + delta;\n                    break;\n\n                default:\n                    cursor = 'ew-resize';\n                    pixelMin = offsetX;\n                    pixelMax = offsetX + delta;\n                    break;\n            }\n\n            if(pixelMax < pixelMin) {\n                var tmp = pixelMax;\n                pixelMax = pixelMin;\n                pixelMin = tmp;\n            }\n\n            opts._pixelMin = pixelMin;\n            opts._pixelMax = pixelMax;\n\n            setCursor(d3.select(dragCover), cursor);\n            setDataRange(rangeSlider, gd, axisOpts, opts);\n        }\n\n        function mouseUp() {\n            dragCover.removeEventListener('mousemove', mouseMove);\n            dragCover.removeEventListener('mouseup', mouseUp);\n            Lib.removeElement(dragCover);\n        }\n    });\n}\n\nfunction setDataRange(rangeSlider, gd, axisOpts, opts) {\n\n    function clamp(v) {\n        return axisOpts.l2r(Lib.constrain(v, opts._rl[0], opts._rl[1]));\n    }\n\n    var dataMin = clamp(opts.p2d(opts._pixelMin));\n    var dataMax = clamp(opts.p2d(opts._pixelMax));\n\n    window.requestAnimationFrame(function() {\n        Registry.call('_guiRelayout', gd, axisOpts._name + '.range', [dataMin, dataMax]);\n    });\n}\n\nfunction setPixelRange(rangeSlider, gd, axisOpts, opts, oppAxisOpts, oppAxisRangeOpts) {\n    var hw2 = constants.handleWidth / 2;\n\n    function clamp(v) {\n        return Lib.constrain(v, 0, opts._width);\n    }\n\n    function clampOppAxis(v) {\n        return Lib.constrain(v, 0, opts._height);\n    }\n\n    function clampHandle(v) {\n        return Lib.constrain(v, -hw2, opts._width + hw2);\n    }\n\n    var pixelMin = clamp(opts.d2p(axisOpts._rl[0]));\n    var pixelMax = clamp(opts.d2p(axisOpts._rl[1]));\n\n    rangeSlider.select('rect.' + constants.slideBoxClassName)\n        .attr('x', pixelMin)\n        .attr('width', pixelMax - pixelMin);\n\n    rangeSlider.select('rect.' + constants.maskMinClassName)\n        .attr('width', pixelMin);\n\n    rangeSlider.select('rect.' + constants.maskMaxClassName)\n        .attr('x', pixelMax)\n        .attr('width', opts._width - pixelMax);\n\n    if(oppAxisRangeOpts.rangemode !== 'match') {\n        var pixelMinOppAxis = opts._height - clampOppAxis(opts.d2pOppAxis(oppAxisOpts._rl[1]));\n        var pixelMaxOppAxis = opts._height - clampOppAxis(opts.d2pOppAxis(oppAxisOpts._rl[0]));\n\n        rangeSlider.select('rect.' + constants.maskMinOppAxisClassName)\n            .attr('x', pixelMin)\n            .attr('height', pixelMinOppAxis)\n            .attr('width', pixelMax - pixelMin);\n\n        rangeSlider.select('rect.' + constants.maskMaxOppAxisClassName)\n            .attr('x', pixelMin)\n            .attr('y', pixelMaxOppAxis)\n            .attr('height', opts._height - pixelMaxOppAxis)\n            .attr('width', pixelMax - pixelMin);\n\n        rangeSlider.select('rect.' + constants.slideBoxClassName)\n            .attr('y', pixelMinOppAxis)\n            .attr('height', pixelMaxOppAxis - pixelMinOppAxis);\n    }\n\n    // add offset for crispier corners\n    // https://github.com/plotly/plotly.js/pull/1409\n    var offset = 0.5;\n\n    var xMin = Math.round(clampHandle(pixelMin - hw2)) - offset;\n    var xMax = Math.round(clampHandle(pixelMax - hw2)) + offset;\n\n    rangeSlider.select('g.' + constants.grabberMinClassName)\n        .attr('transform', 'translate(' + xMin + ',' + offset + ')');\n\n    rangeSlider.select('g.' + constants.grabberMaxClassName)\n        .attr('transform', 'translate(' + xMax + ',' + offset + ')');\n}\n\nfunction drawBg(rangeSlider, gd, axisOpts, opts) {\n    var bg = Lib.ensureSingle(rangeSlider, 'rect', constants.bgClassName, function(s) {\n        s.attr({\n            x: 0,\n            y: 0,\n            'shape-rendering': 'crispEdges'\n        });\n    });\n\n    var borderCorrect = (opts.borderwidth % 2) === 0 ?\n        opts.borderwidth :\n        opts.borderwidth - 1;\n\n    var offsetShift = -opts._offsetShift;\n    var lw = Drawing.crispRound(gd, opts.borderwidth);\n\n    bg.attr({\n        width: opts._width + borderCorrect,\n        height: opts._height + borderCorrect,\n        transform: 'translate(' + offsetShift + ',' + offsetShift + ')',\n        fill: opts.bgcolor,\n        stroke: opts.bordercolor,\n        'stroke-width': lw\n    });\n}\n\nfunction addClipPath(rangeSlider, gd, axisOpts, opts) {\n    var fullLayout = gd._fullLayout;\n\n    var clipPath = Lib.ensureSingleById(fullLayout._topdefs, 'clipPath', opts._clipId, function(s) {\n        s.append('rect').attr({ x: 0, y: 0 });\n    });\n\n    clipPath.select('rect').attr({\n        width: opts._width,\n        height: opts._height\n    });\n}\n\nfunction drawRangePlot(rangeSlider, gd, axisOpts, opts) {\n    var calcData = gd.calcdata;\n\n    var rangePlots = rangeSlider.selectAll('g.' + constants.rangePlotClassName)\n        .data(axisOpts._subplotsWith, Lib.identity);\n\n    rangePlots.enter().append('g')\n        .attr('class', function(id) { return constants.rangePlotClassName + ' ' + id; })\n        .call(Drawing.setClipUrl, opts._clipId, gd);\n\n    rangePlots.order();\n\n    rangePlots.exit().remove();\n\n    var mainplotinfo;\n\n    rangePlots.each(function(id, i) {\n        var plotgroup = d3.select(this);\n        var isMainPlot = (i === 0);\n\n        var oppAxisOpts = axisIDs.getFromId(gd, id, 'y');\n        var oppAxisName = oppAxisOpts._name;\n        var oppAxisRangeOpts = opts[oppAxisName];\n\n        var mockFigure = {\n            data: [],\n            layout: {\n                xaxis: {\n                    type: axisOpts.type,\n                    domain: [0, 1],\n                    range: opts.range.slice(),\n                    calendar: axisOpts.calendar\n                },\n                width: opts._width,\n                height: opts._height,\n                margin: { t: 0, b: 0, l: 0, r: 0 }\n            },\n            _context: gd._context\n        };\n\n        mockFigure.layout[oppAxisName] = {\n            type: oppAxisOpts.type,\n            domain: [0, 1],\n            range: oppAxisRangeOpts.rangemode !== 'match' ? oppAxisRangeOpts.range.slice() : oppAxisOpts.range.slice(),\n            calendar: oppAxisOpts.calendar\n        };\n\n        Plots.supplyDefaults(mockFigure);\n\n        var xa = mockFigure._fullLayout.xaxis;\n        var ya = mockFigure._fullLayout[oppAxisName];\n\n        xa.clearCalc();\n        xa.setScale();\n        ya.clearCalc();\n        ya.setScale();\n\n        var plotinfo = {\n            id: id,\n            plotgroup: plotgroup,\n            xaxis: xa,\n            yaxis: ya,\n            isRangePlot: true\n        };\n\n        if(isMainPlot) mainplotinfo = plotinfo;\n        else {\n            plotinfo.mainplot = 'xy';\n            plotinfo.mainplotinfo = mainplotinfo;\n        }\n\n        Cartesian.rangePlot(gd, plotinfo, filterRangePlotCalcData(calcData, id));\n    });\n}\n\nfunction filterRangePlotCalcData(calcData, subplotId) {\n    var out = [];\n\n    for(var i = 0; i < calcData.length; i++) {\n        var calcTrace = calcData[i];\n        var trace = calcTrace[0].trace;\n\n        if(trace.xaxis + trace.yaxis === subplotId) {\n            out.push(calcTrace);\n        }\n    }\n\n    return out;\n}\n\nfunction drawMasks(rangeSlider, gd, axisOpts, opts, oppAxisRangeOpts) {\n    var maskMin = Lib.ensureSingle(rangeSlider, 'rect', constants.maskMinClassName, function(s) {\n        s.attr({\n            x: 0,\n            y: 0,\n            'shape-rendering': 'crispEdges'\n        });\n    });\n\n    maskMin\n        .attr('height', opts._height)\n        .call(Color.fill, constants.maskColor);\n\n    var maskMax = Lib.ensureSingle(rangeSlider, 'rect', constants.maskMaxClassName, function(s) {\n        s.attr({\n            y: 0,\n            'shape-rendering': 'crispEdges'\n        });\n    });\n\n    maskMax\n        .attr('height', opts._height)\n        .call(Color.fill, constants.maskColor);\n\n    // masks used for oppAxis zoom\n    if(oppAxisRangeOpts.rangemode !== 'match') {\n        var maskMinOppAxis = Lib.ensureSingle(rangeSlider, 'rect', constants.maskMinOppAxisClassName, function(s) {\n            s.attr({\n                y: 0,\n                'shape-rendering': 'crispEdges'\n            });\n        });\n\n        maskMinOppAxis\n            .attr('width', opts._width)\n            .call(Color.fill, constants.maskOppAxisColor);\n\n        var maskMaxOppAxis = Lib.ensureSingle(rangeSlider, 'rect', constants.maskMaxOppAxisClassName, function(s) {\n            s.attr({\n                y: 0,\n                'shape-rendering': 'crispEdges'\n            });\n        });\n\n        maskMaxOppAxis\n            .attr('width', opts._width)\n            .style('border-top', constants.maskOppBorder)\n            .call(Color.fill, constants.maskOppAxisColor);\n    }\n}\n\nfunction drawSlideBox(rangeSlider, gd, axisOpts, opts) {\n    if(gd._context.staticPlot) return;\n\n    var slideBox = Lib.ensureSingle(rangeSlider, 'rect', constants.slideBoxClassName, function(s) {\n        s.attr({\n            y: 0,\n            cursor: constants.slideBoxCursor,\n            'shape-rendering': 'crispEdges'\n        });\n    });\n\n    slideBox.attr({\n        height: opts._height,\n        fill: constants.slideBoxFill\n    });\n}\n\nfunction drawGrabbers(rangeSlider, gd, axisOpts, opts) {\n    // <g grabber />\n    var grabberMin = Lib.ensureSingle(rangeSlider, 'g', constants.grabberMinClassName);\n    var grabberMax = Lib.ensureSingle(rangeSlider, 'g', constants.grabberMaxClassName);\n\n    // <g handle />\n    var handleFixAttrs = {\n        x: 0,\n        width: constants.handleWidth,\n        rx: constants.handleRadius,\n        fill: Color.background,\n        stroke: Color.defaultLine,\n        'stroke-width': constants.handleStrokeWidth,\n        'shape-rendering': 'crispEdges'\n    };\n    var handleDynamicAttrs = {\n        y: Math.round(opts._height / 4),\n        height: Math.round(opts._height / 2),\n    };\n    var handleMin = Lib.ensureSingle(grabberMin, 'rect', constants.handleMinClassName, function(s) {\n        s.attr(handleFixAttrs);\n    });\n    handleMin.attr(handleDynamicAttrs);\n\n    var handleMax = Lib.ensureSingle(grabberMax, 'rect', constants.handleMaxClassName, function(s) {\n        s.attr(handleFixAttrs);\n    });\n    handleMax.attr(handleDynamicAttrs);\n\n    // <g grabarea />\n    if(gd._context.staticPlot) return;\n\n    var grabAreaFixAttrs = {\n        width: constants.grabAreaWidth,\n        x: 0,\n        y: 0,\n        fill: constants.grabAreaFill,\n        cursor: constants.grabAreaCursor\n    };\n\n    var grabAreaMin = Lib.ensureSingle(grabberMin, 'rect', constants.grabAreaMinClassName, function(s) {\n        s.attr(grabAreaFixAttrs);\n    });\n    grabAreaMin.attr('height', opts._height);\n\n    var grabAreaMax = Lib.ensureSingle(grabberMax, 'rect', constants.grabAreaMaxClassName, function(s) {\n        s.attr(grabAreaFixAttrs);\n    });\n    grabAreaMax.attr('height', opts._height);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}