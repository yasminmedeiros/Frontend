{"ast":null,"code":"'use strict';\n\nvar warp = require('ndarray-warp');\nvar invert = require('gl-matrix-invert');\nmodule.exports = applyHomography;\nfunction applyHomography(dest, src, Xi) {\n  var n = src.dimension;\n  var X = invert([], Xi);\n  warp(dest, src, function (out_c, inp_c) {\n    for (var i = 0; i < n; ++i) {\n      out_c[i] = X[(n + 1) * n + i];\n      for (var j = 0; j < n; ++j) {\n        out_c[i] += X[(n + 1) * j + i] * inp_c[j];\n      }\n    }\n    var w = X[(n + 1) * (n + 1) - 1];\n    for (var j = 0; j < n; ++j) {\n      w += X[(n + 1) * j + n] * inp_c[j];\n    }\n    var wr = 1.0 / w;\n    for (var i = 0; i < n; ++i) {\n      out_c[i] *= wr;\n    }\n    return out_c;\n  });\n  return dest;\n}","map":{"version":3,"names":["warp","require","invert","module","exports","applyHomography","dest","src","Xi","n","dimension","X","out_c","inp_c","i","j","w","wr"],"sources":["/home/yasmin/Área de Trabalho/Frontend/node_modules/ndarray-homography/xform.js"],"sourcesContent":["'use strict'\n\nvar warp = require('ndarray-warp')\nvar invert = require('gl-matrix-invert')\n\nmodule.exports = applyHomography\n\nfunction applyHomography(dest, src, Xi) {\n  var n = src.dimension\n  var X = invert([], Xi)\n  warp(dest, src, function(out_c, inp_c) {\n    for(var i=0; i<n; ++i) {\n      out_c[i] = X[(n+1)*n + i]\n      for(var j=0; j<n; ++j) {\n        out_c[i] += X[(n+1)*j+i] * inp_c[j]\n      }\n    }\n    var w = X[(n+1)*(n+1)-1]\n    for(var j=0; j<n; ++j) {\n      w += X[(n+1)*j+n] * inp_c[j]\n    }\n    var wr = 1.0 / w\n    for(var i=0; i<n; ++i) {\n      out_c[i] *= wr\n    }\n    return out_c\n  })\n  return dest\n}"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,IAAI,GAAGC,OAAO,CAAC,cAAc,CAAC;AAClC,IAAIC,MAAM,GAAGD,OAAO,CAAC,kBAAkB,CAAC;AAExCE,MAAM,CAACC,OAAO,GAAGC,eAAe;AAEhC,SAASA,eAAe,CAACC,IAAI,EAAEC,GAAG,EAAEC,EAAE,EAAE;EACtC,IAAIC,CAAC,GAAGF,GAAG,CAACG,SAAS;EACrB,IAAIC,CAAC,GAAGT,MAAM,CAAC,EAAE,EAAEM,EAAE,CAAC;EACtBR,IAAI,CAACM,IAAI,EAAEC,GAAG,EAAE,UAASK,KAAK,EAAEC,KAAK,EAAE;IACrC,KAAI,IAAIC,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACL,CAAC,EAAE,EAAEK,CAAC,EAAE;MACrBF,KAAK,CAACE,CAAC,CAAC,GAAGH,CAAC,CAAC,CAACF,CAAC,GAAC,CAAC,IAAEA,CAAC,GAAGK,CAAC,CAAC;MACzB,KAAI,IAAIC,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACN,CAAC,EAAE,EAAEM,CAAC,EAAE;QACrBH,KAAK,CAACE,CAAC,CAAC,IAAIH,CAAC,CAAC,CAACF,CAAC,GAAC,CAAC,IAAEM,CAAC,GAACD,CAAC,CAAC,GAAGD,KAAK,CAACE,CAAC,CAAC;MACrC;IACF;IACA,IAAIC,CAAC,GAAGL,CAAC,CAAC,CAACF,CAAC,GAAC,CAAC,KAAGA,CAAC,GAAC,CAAC,CAAC,GAAC,CAAC,CAAC;IACxB,KAAI,IAAIM,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACN,CAAC,EAAE,EAAEM,CAAC,EAAE;MACrBC,CAAC,IAAIL,CAAC,CAAC,CAACF,CAAC,GAAC,CAAC,IAAEM,CAAC,GAACN,CAAC,CAAC,GAAGI,KAAK,CAACE,CAAC,CAAC;IAC9B;IACA,IAAIE,EAAE,GAAG,GAAG,GAAGD,CAAC;IAChB,KAAI,IAAIF,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACL,CAAC,EAAE,EAAEK,CAAC,EAAE;MACrBF,KAAK,CAACE,CAAC,CAAC,IAAIG,EAAE;IAChB;IACA,OAAOL,KAAK;EACd,CAAC,CAAC;EACF,OAAON,IAAI;AACb"},"metadata":{},"sourceType":"script","externalDependencies":[]}