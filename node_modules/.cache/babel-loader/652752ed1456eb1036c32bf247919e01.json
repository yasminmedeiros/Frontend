{"ast":null,"code":"import _objectSpread from\"/home/yasmin/\\xC1rea de Trabalho/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _createForOfIteratorHelper from\"/home/yasmin/\\xC1rea de Trabalho/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/home/yasmin/\\xC1rea de Trabalho/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{useEffect}from\"react\";import{useState}from\"react\";import{Spinner}from'../Spinner';import Chart from'react-apexcharts';import Select,{createFilter}from'react-select';import CustomOption from\"../Options/CustomOption\";import apisaber from\"../../services/apisaber\";import'./styles.css';import{NoDataMessage}from\"../NoDataMessage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ChartBySchool=function ChartBySchool(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState({value:'',label:''}),_useState4=_slicedToArray(_useState3,2),selected=_useState4[0],setSelected=_useState4[1];var _useState5=useState([{name:props.name,data:props.y}]),_useState6=_slicedToArray(_useState5,2),series=_useState6[0],setSeries=_useState6[1];var _useState7=useState({chart:{type:props.type,height:450},plotOptions:{bar:{barHeight:'100%',distributed:true,horizontal:true,dataLabels:{position:'bottom'}}},colors:['#E5BEDD','#FFA8B8','#DCD9F8','#F7D8C3','#FFC8C3','#BCCEF4','#B5DCF9','#A9E5E3','#A2EDCE','#A0D995','#C5D084','#D2C797','#FAE187','#E8BA86','#D3BEAD','#8CC2C2'],title:{text:props.title,align:'center',floating:true,margin:20},dataLabels:{enabled:true,textAnchor:'start',style:{colors:['#000']},formatter:function formatter(val,opt){return opt.w.globals.labels[opt.dataPointIndex]+\":  \"+val.toLocaleString('pt-BR',{minimumFractionDigits:0});},offsetX:0,dropShadow:{enabled:false}},stroke:{width:1,colors:['#fff']},yaxis:{labels:{show:false}},xaxis:{categories:props.x,labels:{rotate:-60,rotateAlways:false,style:{fontSize:'10px',colors:[\"#304758\"],fontFamily:'Helvetica, Arial, sans-serif',fontWeight:'bold'}},style:{marginBottom:'50px'}},fill:{opacity:1},legend:{show:false},tooltip:{theme:'dark',x:{show:false},y:{title:{formatter:function formatter(val,opt){return val+':';}},formatter:function formatter(val){return typeof val===\"number\"?val.toFixed(0):val;}}}}),_useState8=_slicedToArray(_useState7,2),options=_useState8[0],setOptions=_useState8[1];function handleSelectChange(item){if(!item){props.onChange(props.id,data[0].value);setSelected({value:data[0].value,label:data[0].label});return;}props.onChange(props.id,item.value);setSelected(item);};function verifyEmptyData(data){var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;if(item>0||item!=\"0\")return true;}}catch(err){_iterator.e(err);}finally{_iterator.f();}return false;}useEffect(function(){if(data.length===0&&props.useSelect){apisaber.get(\"/schools/get-all-integral-schools-that-were-regular/?type=\".concat(props.administrationType)).then(function(response){setData(response.data);setSelected({value:response.data[0].value,label:response.data[0].label});console.log(response.data[0].value,response.data[0].label);}).catch(function(error){return console.log(error);});}setSeries(function(prevSeries){return[_objectSpread(_objectSpread({},prevSeries[0]),{},{data:props.y})];});setOptions(function(prevOptions){var xaxis=prevOptions.xaxis;return _objectSpread(_objectSpread({},prevOptions),{},{xaxis:_objectSpread(_objectSpread({},xaxis),{},{categories:props.x})});});},[props.x,props.y,props.administrationType,data.length,options.xaxis.categories,props.useSelect,selected.value]);return/*#__PURE__*/_jsx(\"div\",{id:props.id,className:\"container-line-chart\",children:!props.loading?/*#__PURE__*/_jsxs(\"div\",{className:\"container-select-chart\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"select\",children:[props.useSelect&&/*#__PURE__*/_jsx(Select,{className:\"basic-single\",classNamePrefix:\"custom-select\",isClearable:true,isSearchable:true,value:selected,options:data,components:{Option:CustomOption},filterOption:createFilter({ignoreAccents:false}),onChange:function onChange(value){return handleSelectChange(value);}}),/*#__PURE__*/_jsx(\"div\",{})]}),verifyEmptyData(props.y)?/*#__PURE__*/_jsx(Chart,{className:\"chart\",options:options,series:series,type:props.type,height:350}):/*#__PURE__*/_jsx(NoDataMessage,{})]}):/*#__PURE__*/_jsx(\"div\",{className:\"box-spinner-line-chart\",children:/*#__PURE__*/_jsx(Spinner,{})})});};","map":{"version":3,"sources":["/home/yasmin/√Årea de Trabalho/Frontend/src/components/ChartBySchool/ChartBySchool.jsx"],"names":["React","useEffect","useState","Spinner","Chart","Select","createFilter","CustomOption","apisaber","NoDataMessage","ChartBySchool","props","data","setData","value","label","selected","setSelected","name","y","series","setSeries","chart","type","height","plotOptions","bar","barHeight","distributed","horizontal","dataLabels","position","colors","title","text","align","floating","margin","enabled","textAnchor","style","formatter","val","opt","w","globals","labels","dataPointIndex","toLocaleString","minimumFractionDigits","offsetX","dropShadow","stroke","width","yaxis","show","xaxis","categories","x","rotate","rotateAlways","fontSize","fontFamily","fontWeight","marginBottom","fill","opacity","legend","tooltip","theme","toFixed","options","setOptions","handleSelectChange","item","onChange","id","verifyEmptyData","length","useSelect","get","administrationType","then","response","console","log","catch","error","prevSeries","prevOptions","loading","Option","ignoreAccents"],"mappings":"ufAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAASC,OAAT,KAAwB,YAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,kBAAlB,CACA,MAAOC,CAAAA,MAAP,EAAiBC,YAAjB,KAAqC,cAArC,CACA,MAAOC,CAAAA,YAAP,KAAyB,yBAAzB,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CAEA,MAAO,cAAP,CACA,OAASC,aAAT,KAA8B,kBAA9B,C,wFAEA,MAAO,IAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,CAAW,eACZT,QAAQ,CAAC,EAAD,CADI,wCAC7BU,IAD6B,eACvBC,OADuB,8BAEJX,QAAQ,CAAC,CACrCY,KAAK,CAAE,EAD8B,CAErCC,KAAK,CAAE,EAF8B,CAAD,CAFJ,yCAE7BC,QAF6B,eAEnBC,WAFmB,8BAMRf,QAAQ,CAAC,CAAC,CAClCgB,IAAI,CAAEP,KAAK,CAACO,IADsB,CAElCN,IAAI,CAAED,KAAK,CAACQ,CAFsB,CAAD,CAAD,CANA,yCAM7BC,MAN6B,eAMrBC,SANqB,8BAUNnB,QAAQ,CAAC,CACnCoB,KAAK,CAAE,CACHC,IAAI,CAAEZ,KAAK,CAACY,IADT,CAEHC,MAAM,CAAE,GAFL,CAD4B,CAKnCC,WAAW,CAAE,CACTC,GAAG,CAAE,CACDC,SAAS,CAAE,MADV,CAEDC,WAAW,CAAE,IAFZ,CAGDC,UAAU,CAAE,IAHX,CAIDC,UAAU,CAAE,CACRC,QAAQ,CAAE,QADF,CAJX,CADI,CALsB,CAenCC,MAAM,CAAE,CACJ,SADI,CACO,SADP,CACkB,SADlB,CAEJ,SAFI,CAEO,SAFP,CAEkB,SAFlB,CAGJ,SAHI,CAGO,SAHP,CAGkB,SAHlB,CAIJ,SAJI,CAIO,SAJP,CAIkB,SAJlB,CAKJ,SALI,CAKO,SALP,CAKkB,SALlB,CAMJ,SANI,CAf2B,CAuBnCC,KAAK,CAAE,CACHC,IAAI,CAAEvB,KAAK,CAACsB,KADT,CAEHE,KAAK,CAAE,QAFJ,CAGHC,QAAQ,CAAE,IAHP,CAIHC,MAAM,CAAE,EAJL,CAvB4B,CA6BnCP,UAAU,CAAE,CACRQ,OAAO,CAAE,IADD,CAERC,UAAU,CAAE,OAFJ,CAGRC,KAAK,CAAE,CACHR,MAAM,CAAE,CAAC,MAAD,CADL,CAHC,CAMRS,SAAS,CAAE,mBAAUC,GAAV,CAAeC,GAAf,CAAoB,CAC3B,MAAOA,CAAAA,GAAG,CAACC,CAAJ,CAAMC,OAAN,CAAcC,MAAd,CAAqBH,GAAG,CAACI,cAAzB,EAA2C,KAA3C,CAAmDL,GAAG,CAACM,cAAJ,CAAmB,OAAnB,CAA4B,CAAEC,qBAAqB,CAAE,CAAzB,CAA5B,CAA1D,CACH,CARO,CASRC,OAAO,CAAE,CATD,CAURC,UAAU,CAAE,CACRb,OAAO,CAAE,KADD,CAVJ,CA7BuB,CA2CnCc,MAAM,CAAE,CACJC,KAAK,CAAE,CADH,CAEJrB,MAAM,CAAE,CAAC,MAAD,CAFJ,CA3C2B,CA+CnCsB,KAAK,CAAE,CACHR,MAAM,CAAE,CACJS,IAAI,CAAE,KADF,CADL,CA/C4B,CAoDnCC,KAAK,CAAE,CACHC,UAAU,CAAE9C,KAAK,CAAC+C,CADf,CAEHZ,MAAM,CAAE,CACJa,MAAM,CAAE,CAAC,EADL,CAEJC,YAAY,CAAE,KAFV,CAGJpB,KAAK,CAAE,CACHqB,QAAQ,CAAE,MADP,CAEH7B,MAAM,CAAE,CAAC,SAAD,CAFL,CAGH8B,UAAU,CAAE,8BAHT,CAIHC,UAAU,CAAE,MAJT,CAHH,CAFL,CAYHvB,KAAK,CAAE,CACHwB,YAAY,CAAE,MADX,CAZJ,CApD4B,CAoEnCC,IAAI,CAAE,CACFC,OAAO,CAAE,CADP,CApE6B,CAuEnCC,MAAM,CAAE,CACJZ,IAAI,CAAE,KADF,CAvE2B,CA0EnCa,OAAO,CAAE,CACLC,KAAK,CAAE,MADF,CAELX,CAAC,CAAE,CACCH,IAAI,CAAE,KADP,CAFE,CAKLpC,CAAC,CAAE,CACCc,KAAK,CAAE,CACHQ,SAAS,CAAE,mBAAUC,GAAV,CAAeC,GAAf,CAAoB,CAC3B,MAAOD,CAAAA,GAAG,CAAG,GAAb,CACH,CAHE,CADR,CAMCD,SAAS,CAAE,mBAAUC,GAAV,CAAe,CACtB,MAAO,OAAOA,CAAAA,GAAP,GAAe,QAAf,CAA0BA,GAAG,CAAC4B,OAAJ,CAAY,CAAZ,CAA1B,CAA2C5B,GAAlD,CACH,CARF,CALE,CA1E0B,CAAD,CAVF,yCAU7B6B,OAV6B,eAUpBC,UAVoB,eAuGpC,QAASC,CAAAA,kBAAT,CAA4BC,IAA5B,CAAkC,CAC9B,GAAI,CAACA,IAAL,CAAW,CACP/D,KAAK,CAACgE,QAAN,CAAehE,KAAK,CAACiE,EAArB,CAAyBhE,IAAI,CAAC,CAAD,CAAJ,CAAQE,KAAjC,EACAG,WAAW,CAAC,CACRH,KAAK,CAAEF,IAAI,CAAC,CAAD,CAAJ,CAAQE,KADP,CAERC,KAAK,CAAEH,IAAI,CAAC,CAAD,CAAJ,CAAQG,KAFP,CAAD,CAAX,CAKA,OACH,CACDJ,KAAK,CAACgE,QAAN,CAAehE,KAAK,CAACiE,EAArB,CAAyBF,IAAI,CAAC5D,KAA9B,EACAG,WAAW,CAACyD,IAAD,CAAX,CACH,EAED,QAASG,CAAAA,eAAT,CAAyBjE,IAAzB,CAA+B,0CACRA,IADQ,YAC3B,+CAAyB,IAAd8D,CAAAA,IAAc,aACrB,GAAIA,IAAI,CAAG,CAAP,EAAYA,IAAI,EAAI,GAAxB,CAA6B,MAAO,KAAP,CAChC,CAH0B,qDAK3B,MAAO,MAAP,CACH,CAEDzE,SAAS,CAAC,UAAM,CACZ,GAAIW,IAAI,CAACkE,MAAL,GAAgB,CAAhB,EAAqBnE,KAAK,CAACoE,SAA/B,CAA0C,CACtCvE,QAAQ,CAACwE,GAAT,qEAA0ErE,KAAK,CAACsE,kBAAhF,GAAsGC,IAAtG,CAA2G,SAAAC,QAAQ,CAAI,CACnHtE,OAAO,CAACsE,QAAQ,CAACvE,IAAV,CAAP,CACAK,WAAW,CAAC,CACRH,KAAK,CAAEqE,QAAQ,CAACvE,IAAT,CAAc,CAAd,EAAiBE,KADhB,CAERC,KAAK,CAAEoE,QAAQ,CAACvE,IAAT,CAAc,CAAd,EAAiBG,KAFhB,CAAD,CAAX,CAIAqE,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACvE,IAAT,CAAc,CAAd,EAAiBE,KAA7B,CAAoCqE,QAAQ,CAACvE,IAAT,CAAc,CAAd,EAAiBG,KAArD,EACH,CAPD,EAOGuE,KAPH,CAOS,SAAAC,KAAK,QAAIH,CAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ,CAAJ,EAPd,EAQH,CAEDlE,SAAS,CAAC,SAAAmE,UAAU,CAAI,CACpB,MAAO,gCACAA,UAAU,CAAC,CAAD,CADV,MAEH5E,IAAI,CAAED,KAAK,CAACQ,CAFT,GAAP,CAIH,CALQ,CAAT,CAMAqD,UAAU,CAAC,SAAAiB,WAAW,CAAI,CACtB,GAAMjC,CAAAA,KAAK,CAAGiC,WAAW,CAACjC,KAA1B,CAEA,sCACOiC,WADP,MAEIjC,KAAK,gCACEA,KADF,MAEDC,UAAU,CAAE9C,KAAK,CAAC+C,CAFjB,EAFT,GAOH,CAVS,CAAV,CAWH,CA7BQ,CA6BN,CACC/C,KAAK,CAAC+C,CADP,CAEC/C,KAAK,CAACQ,CAFP,CAGCR,KAAK,CAACsE,kBAHP,CAICrE,IAAI,CAACkE,MAJN,CAKCP,OAAO,CAACf,KAAR,CAAcC,UALf,CAMC9C,KAAK,CAACoE,SANP,CAOC/D,QAAQ,CAACF,KAPV,CA7BM,CAAT,CAuCA,mBACI,YAAK,EAAE,CAAEH,KAAK,CAACiE,EAAf,CAAmB,SAAS,CAAC,sBAA7B,UACK,CAACjE,KAAK,CAAC+E,OAAP,cACG,aAAK,SAAS,CAAC,wBAAf,wBACI,aAAK,SAAS,CAAC,QAAf,WACK/E,KAAK,CAACoE,SAAN,eACG,KAAC,MAAD,EACI,SAAS,CAAC,cADd,CAEI,eAAe,CAAC,eAFpB,CAGI,WAAW,CAAE,IAHjB,CAII,YAAY,CAAE,IAJlB,CAKI,KAAK,CAAE/D,QALX,CAMI,OAAO,CAAEJ,IANb,CAOI,UAAU,CAAE,CAAE+E,MAAM,CAAEpF,YAAV,CAPhB,CAQI,YAAY,CAAED,YAAY,CAAC,CAAEsF,aAAa,CAAE,KAAjB,CAAD,CAR9B,CASI,QAAQ,CAAE,kBAAA9E,KAAK,QAAI2D,CAAAA,kBAAkB,CAAC3D,KAAD,CAAtB,EATnB,EAFR,cAcI,cAdJ,GADJ,CAiBK+D,eAAe,CAAClE,KAAK,CAACQ,CAAP,CAAf,cACG,KAAC,KAAD,EACI,SAAS,CAAC,OADd,CAEI,OAAO,CAAEoD,OAFb,CAGI,MAAM,CAAEnD,MAHZ,CAII,IAAI,CAAET,KAAK,CAACY,IAJhB,CAKI,MAAM,CAAE,GALZ,EADH,cASG,KAAC,aAAD,IA1BR,GADH,cA+BG,YAAK,SAAS,CAAC,wBAAf,uBACI,KAAC,OAAD,IADJ,EAhCR,EADJ,CAuCH,CA3MM","sourcesContent":["import React from \"react\"\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { Spinner } from '../Spinner';\nimport Chart from 'react-apexcharts';\nimport Select, { createFilter } from 'react-select';\nimport CustomOption from \"../Options/CustomOption\";\nimport apisaber from \"../../services/apisaber\";\n\nimport './styles.css';\nimport { NoDataMessage } from \"../NoDataMessage\";\n\nexport const ChartBySchool = (props) => {\n    const [data, setData] = useState([]);\n    const [selected, setSelected] = useState({\n        value: '',\n        label: '',\n    });\n    const [series, setSeries] = useState([{\n        name: props.name,\n        data: props.y,\n    }]);\n    const [options, setOptions] = useState({\n        chart: {\n            type: props.type,\n            height: 450,\n        },\n        plotOptions: {\n            bar: {\n                barHeight: '100%',\n                distributed: true,\n                horizontal: true,\n                dataLabels: {\n                    position: 'bottom'\n                },\n            }\n        },\n        colors: [\n            '#E5BEDD', '#FFA8B8', '#DCD9F8',\n            '#F7D8C3', '#FFC8C3', '#BCCEF4',\n            '#B5DCF9', '#A9E5E3', '#A2EDCE',\n            '#A0D995', '#C5D084', '#D2C797',\n            '#FAE187', '#E8BA86', '#D3BEAD',\n            '#8CC2C2'\n        ],\n        title: {\n            text: props.title,\n            align: 'center',\n            floating: true,\n            margin: 20,\n        },\n        dataLabels: {\n            enabled: true,\n            textAnchor: 'start',\n            style: {\n                colors: ['#000']\n            },\n            formatter: function (val, opt) {\n                return opt.w.globals.labels[opt.dataPointIndex] + \":  \" + val.toLocaleString('pt-BR', { minimumFractionDigits: 0 })\n            },\n            offsetX: 0,\n            dropShadow: {\n                enabled: false\n            }\n        },\n        stroke: {\n            width: 1,\n            colors: ['#fff']\n        },\n        yaxis: {\n            labels: {\n                show: false,\n            },\n        },\n        xaxis: {\n            categories: props.x,\n            labels: {\n                rotate: -60,\n                rotateAlways: false,\n                style: {\n                    fontSize: '10px',\n                    colors: [\"#304758\"],\n                    fontFamily: 'Helvetica, Arial, sans-serif',\n                    fontWeight: 'bold',\n                },\n            },\n            style: {\n                marginBottom: '50px'\n            },\n        },\n        fill: {\n            opacity: 1\n        },\n        legend: {\n            show: false,\n        },\n        tooltip: {\n            theme: 'dark',\n            x: {\n                show: false,\n            },\n            y: {\n                title: {\n                    formatter: function (val, opt) {\n                        return val + ':';\n                    }\n                },\n                formatter: function (val) {\n                    return typeof val === \"number\" ? val.toFixed(0) : val;\n                },\n            }\n        }\n    });\n\n    \n    function handleSelectChange(item) {\n        if (!item) {\n            props.onChange(props.id, data[0].value);\n            setSelected({\n                value: data[0].value,\n                label: data[0].label,\n            });\n\n            return;\n        }\n        props.onChange(props.id, item.value);\n        setSelected(item);\n    };\n\n    function verifyEmptyData(data) {\n        for (const item of data) {\n            if (item > 0 || item != \"0\") return true;\n        }\n\n        return false;\n    }\n\n    useEffect(() => {\n        if (data.length === 0 && props.useSelect) {\n            apisaber.get(`/schools/get-all-integral-schools-that-were-regular/?type=${props.administrationType}`).then(response => {\n                setData(response.data);\n                setSelected({\n                    value: response.data[0].value,\n                    label: response.data[0].label,\n                });\n                console.log(response.data[0].value, response.data[0].label);\n            }).catch(error => console.log(error));\n        }\n\n        setSeries(prevSeries => {\n            return [{\n                ...prevSeries[0],\n                data: props.y,\n            }];\n        });\n        setOptions(prevOptions => {\n            const xaxis = prevOptions.xaxis;\n\n            return {\n                ...prevOptions,\n                xaxis: {\n                    ...xaxis,\n                    categories: props.x,\n                },\n            }\n        });\n    }, [\n        props.x,\n        props.y,\n        props.administrationType,\n        data.length,\n        options.xaxis.categories,\n        props.useSelect,\n        selected.value\n    ]);\n\n    return (\n        <div id={props.id} className=\"container-line-chart\">\n            {!props.loading  ? (\n                <div className=\"container-select-chart\">\n                    <div className=\"select\">\n                        {props.useSelect && (\n                            <Select\n                                className=\"basic-single\"\n                                classNamePrefix=\"custom-select\"\n                                isClearable={true}\n                                isSearchable={true}\n                                value={selected}\n                                options={data}\n                                components={{ Option: CustomOption }}\n                                filterOption={createFilter({ ignoreAccents: false })}\n                                onChange={value => handleSelectChange(value)}\n                            />\n                        )}\n                        <div />\n                    </div>\n                    {verifyEmptyData(props.y) ? (\n                        <Chart\n                            className=\"chart\"\n                            options={options}\n                            series={series}\n                            type={props.type}\n                            height={350}\n                        />\n                    ) : (\n                        <NoDataMessage />\n                    )}\n                </div>\n            ) : (\n                <div className=\"box-spinner-line-chart\">\n                    <Spinner />\n                </div>\n            )}\n        </div>\n    );\n};"]},"metadata":{},"sourceType":"module"}