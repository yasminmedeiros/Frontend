{"ast":null,"code":"'use strict';\n\nmodule.exports = createAxes;\nvar createText = require('./lib/text.js');\nvar createLines = require('./lib/lines.js');\nvar createBackground = require('./lib/background.js');\nvar getCubeProperties = require('./lib/cube.js');\nvar Ticks = require('./lib/ticks.js');\nvar identity = new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\nfunction copyVec3(a, b) {\n  a[0] = b[0];\n  a[1] = b[1];\n  a[2] = b[2];\n  return a;\n}\nfunction Axes(gl) {\n  this.gl = gl;\n  this.pixelRatio = 1;\n  this.bounds = [[-10, -10, -10], [10, 10, 10]];\n  this.ticks = [[], [], []];\n  this.autoTicks = true;\n  this.tickSpacing = [1, 1, 1];\n  this.tickEnable = [true, true, true];\n  this.tickFont = ['sans-serif', 'sans-serif', 'sans-serif'];\n  this.tickSize = [12, 12, 12];\n  this.tickAngle = [0, 0, 0];\n  this.tickAlign = ['auto', 'auto', 'auto'];\n  this.tickColor = [[0, 0, 0, 1], [0, 0, 0, 1], [0, 0, 0, 1]];\n  this.tickPad = [10, 10, 10];\n  this.lastCubeProps = {\n    cubeEdges: [0, 0, 0],\n    axis: [0, 0, 0]\n  };\n  this.labels = ['x', 'y', 'z'];\n  this.labelEnable = [true, true, true];\n  this.labelFont = 'sans-serif';\n  this.labelSize = [20, 20, 20];\n  this.labelAngle = [0, 0, 0];\n  this.labelAlign = ['auto', 'auto', 'auto'];\n  this.labelColor = [[0, 0, 0, 1], [0, 0, 0, 1], [0, 0, 0, 1]];\n  this.labelPad = [10, 10, 10];\n  this.lineEnable = [true, true, true];\n  this.lineMirror = [false, false, false];\n  this.lineWidth = [1, 1, 1];\n  this.lineColor = [[0, 0, 0, 1], [0, 0, 0, 1], [0, 0, 0, 1]];\n  this.lineTickEnable = [true, true, true];\n  this.lineTickMirror = [false, false, false];\n  this.lineTickLength = [0, 0, 0];\n  this.lineTickWidth = [1, 1, 1];\n  this.lineTickColor = [[0, 0, 0, 1], [0, 0, 0, 1], [0, 0, 0, 1]];\n  this.gridEnable = [true, true, true];\n  this.gridWidth = [1, 1, 1];\n  this.gridColor = [[0, 0, 0, 1], [0, 0, 0, 1], [0, 0, 0, 1]];\n  this.zeroEnable = [true, true, true];\n  this.zeroLineColor = [[0, 0, 0, 1], [0, 0, 0, 1], [0, 0, 0, 1]];\n  this.zeroLineWidth = [2, 2, 2];\n  this.backgroundEnable = [false, false, false];\n  this.backgroundColor = [[0.8, 0.8, 0.8, 0.5], [0.8, 0.8, 0.8, 0.5], [0.8, 0.8, 0.8, 0.5]];\n  this._firstInit = true;\n  this._text = null;\n  this._lines = null;\n  this._background = createBackground(gl);\n}\nvar proto = Axes.prototype;\nproto.update = function (options) {\n  options = options || {};\n\n  //Option parsing helper functions\n  function parseOption(nest, cons, name) {\n    if (name in options) {\n      var opt = options[name];\n      var prev = this[name];\n      var next;\n      if (nest ? Array.isArray(opt) && Array.isArray(opt[0]) : Array.isArray(opt)) {\n        this[name] = next = [cons(opt[0]), cons(opt[1]), cons(opt[2])];\n      } else {\n        this[name] = next = [cons(opt), cons(opt), cons(opt)];\n      }\n      for (var i = 0; i < 3; ++i) {\n        if (next[i] !== prev[i]) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n  var NUMBER = parseOption.bind(this, false, Number);\n  var BOOLEAN = parseOption.bind(this, false, Boolean);\n  var STRING = parseOption.bind(this, false, String);\n  var COLOR = parseOption.bind(this, true, function (v) {\n    if (Array.isArray(v)) {\n      if (v.length === 3) {\n        return [+v[0], +v[1], +v[2], 1.0];\n      } else if (v.length === 4) {\n        return [+v[0], +v[1], +v[2], +v[3]];\n      }\n    }\n    return [0, 0, 0, 1];\n  });\n\n  //Tick marks and bounds\n  var nextTicks;\n  var ticksUpdate = false;\n  var boundsChanged = false;\n  if ('bounds' in options) {\n    var bounds = options.bounds;\n    i_loop: for (var i = 0; i < 2; ++i) {\n      for (var j = 0; j < 3; ++j) {\n        if (bounds[i][j] !== this.bounds[i][j]) {\n          boundsChanged = true;\n        }\n        this.bounds[i][j] = bounds[i][j];\n      }\n    }\n  }\n  if ('ticks' in options) {\n    nextTicks = options.ticks;\n    ticksUpdate = true;\n    this.autoTicks = false;\n    for (var i = 0; i < 3; ++i) {\n      this.tickSpacing[i] = 0.0;\n    }\n  } else if (NUMBER('tickSpacing')) {\n    this.autoTicks = true;\n    boundsChanged = true;\n  }\n  if (this._firstInit) {\n    if (!('ticks' in options || 'tickSpacing' in options)) {\n      this.autoTicks = true;\n    }\n\n    //Force tick recomputation on first update\n    boundsChanged = true;\n    ticksUpdate = true;\n    this._firstInit = false;\n  }\n  if (boundsChanged && this.autoTicks) {\n    nextTicks = Ticks.create(this.bounds, this.tickSpacing);\n    ticksUpdate = true;\n  }\n\n  //Compare next ticks to previous ticks, only update if needed\n  if (ticksUpdate) {\n    for (var i = 0; i < 3; ++i) {\n      nextTicks[i].sort(function (a, b) {\n        return a.x - b.x;\n      });\n    }\n    if (Ticks.equal(nextTicks, this.ticks)) {\n      ticksUpdate = false;\n    } else {\n      this.ticks = nextTicks;\n    }\n  }\n\n  //Parse tick properties\n  BOOLEAN('tickEnable');\n  if (STRING('tickFont')) {\n    ticksUpdate = true; //If font changes, must rebuild vbo\n  }\n\n  NUMBER('tickSize');\n  NUMBER('tickAngle');\n  NUMBER('tickPad');\n  COLOR('tickColor');\n\n  //Axis labels\n  var labelUpdate = STRING('labels');\n  if (STRING('labelFont')) {\n    labelUpdate = true;\n  }\n  BOOLEAN('labelEnable');\n  NUMBER('labelSize');\n  NUMBER('labelPad');\n  COLOR('labelColor');\n\n  //Axis lines\n  BOOLEAN('lineEnable');\n  BOOLEAN('lineMirror');\n  NUMBER('lineWidth');\n  COLOR('lineColor');\n\n  //Axis line ticks\n  BOOLEAN('lineTickEnable');\n  BOOLEAN('lineTickMirror');\n  NUMBER('lineTickLength');\n  NUMBER('lineTickWidth');\n  COLOR('lineTickColor');\n\n  //Grid lines\n  BOOLEAN('gridEnable');\n  NUMBER('gridWidth');\n  COLOR('gridColor');\n\n  //Zero line\n  BOOLEAN('zeroEnable');\n  COLOR('zeroLineColor');\n  NUMBER('zeroLineWidth');\n\n  //Background\n  BOOLEAN('backgroundEnable');\n  COLOR('backgroundColor');\n\n  //Update text if necessary\n  if (!this._text) {\n    this._text = createText(this.gl, this.bounds, this.labels, this.labelFont, this.ticks, this.tickFont);\n  } else if (this._text && (labelUpdate || ticksUpdate)) {\n    this._text.update(this.bounds, this.labels, this.labelFont, this.ticks, this.tickFont);\n  }\n\n  //Update lines if necessary\n  if (this._lines && ticksUpdate) {\n    this._lines.dispose();\n    this._lines = null;\n  }\n  if (!this._lines) {\n    this._lines = createLines(this.gl, this.bounds, this.ticks);\n  }\n};\nfunction OffsetInfo() {\n  this.primalOffset = [0, 0, 0];\n  this.primalMinor = [0, 0, 0];\n  this.mirrorOffset = [0, 0, 0];\n  this.mirrorMinor = [0, 0, 0];\n}\nvar LINE_OFFSET = [new OffsetInfo(), new OffsetInfo(), new OffsetInfo()];\nfunction computeLineOffset(result, i, bounds, cubeEdges, cubeAxis) {\n  var primalOffset = result.primalOffset;\n  var primalMinor = result.primalMinor;\n  var dualOffset = result.mirrorOffset;\n  var dualMinor = result.mirrorMinor;\n  var e = cubeEdges[i];\n\n  //Calculate offsets\n  for (var j = 0; j < 3; ++j) {\n    if (i === j) {\n      continue;\n    }\n    var a = primalOffset,\n      b = dualOffset,\n      c = primalMinor,\n      d = dualMinor;\n    if (e & 1 << j) {\n      a = dualOffset;\n      b = primalOffset;\n      c = dualMinor;\n      d = primalMinor;\n    }\n    a[j] = bounds[0][j];\n    b[j] = bounds[1][j];\n    if (cubeAxis[j] > 0) {\n      c[j] = -1;\n      d[j] = 0;\n    } else {\n      c[j] = 0;\n      d[j] = +1;\n    }\n  }\n}\nvar CUBE_ENABLE = [0, 0, 0];\nvar DEFAULT_PARAMS = {\n  model: identity,\n  view: identity,\n  projection: identity,\n  _ortho: false\n};\nproto.isOpaque = function () {\n  return true;\n};\nproto.isTransparent = function () {\n  return false;\n};\nproto.drawTransparent = function (params) {};\nvar ALIGN_OPTION_AUTO = 0; // i.e. as defined in the shader the text would rotate to stay upwards range: [-90,90]\n\nvar PRIMAL_MINOR = [0, 0, 0];\nvar MIRROR_MINOR = [0, 0, 0];\nvar PRIMAL_OFFSET = [0, 0, 0];\nproto.draw = function (params) {\n  params = params || DEFAULT_PARAMS;\n  var gl = this.gl;\n\n  //Geometry for camera and axes\n  var model = params.model || identity;\n  var view = params.view || identity;\n  var projection = params.projection || identity;\n  var bounds = this.bounds;\n  var isOrtho = params._ortho || false;\n\n  //Unpack axis info\n  var cubeParams = getCubeProperties(model, view, projection, bounds, isOrtho);\n  var cubeEdges = cubeParams.cubeEdges;\n  var cubeAxis = cubeParams.axis;\n  var cx = view[12];\n  var cy = view[13];\n  var cz = view[14];\n  var cw = view[15];\n  var orthoFix = isOrtho ? 2 : 1; // double up padding for orthographic ticks & labels\n  var pixelScaleF = orthoFix * this.pixelRatio * (projection[3] * cx + projection[7] * cy + projection[11] * cz + projection[15] * cw) / gl.drawingBufferHeight;\n  for (var i = 0; i < 3; ++i) {\n    this.lastCubeProps.cubeEdges[i] = cubeEdges[i];\n    this.lastCubeProps.axis[i] = cubeAxis[i];\n  }\n\n  //Compute axis info\n  var lineOffset = LINE_OFFSET;\n  for (var i = 0; i < 3; ++i) {\n    computeLineOffset(LINE_OFFSET[i], i, this.bounds, cubeEdges, cubeAxis);\n  }\n\n  //Set up state parameters\n  var gl = this.gl;\n\n  //Draw background first\n  var cubeEnable = CUBE_ENABLE;\n  for (var i = 0; i < 3; ++i) {\n    if (this.backgroundEnable[i]) {\n      cubeEnable[i] = cubeAxis[i];\n    } else {\n      cubeEnable[i] = 0;\n    }\n  }\n  this._background.draw(model, view, projection, bounds, cubeEnable, this.backgroundColor);\n\n  //Draw lines\n  this._lines.bind(model, view, projection, this);\n\n  //First draw grid lines and zero lines\n  for (var i = 0; i < 3; ++i) {\n    var x = [0, 0, 0];\n    if (cubeAxis[i] > 0) {\n      x[i] = bounds[1][i];\n    } else {\n      x[i] = bounds[0][i];\n    }\n\n    //Draw grid lines\n    for (var j = 0; j < 2; ++j) {\n      var u = (i + 1 + j) % 3;\n      var v = (i + 1 + (j ^ 1)) % 3;\n      if (this.gridEnable[u]) {\n        this._lines.drawGrid(u, v, this.bounds, x, this.gridColor[u], this.gridWidth[u] * this.pixelRatio);\n      }\n    }\n\n    //Draw zero lines (need to do this AFTER all grid lines are drawn)\n    for (var j = 0; j < 2; ++j) {\n      var u = (i + 1 + j) % 3;\n      var v = (i + 1 + (j ^ 1)) % 3;\n      if (this.zeroEnable[v]) {\n        //Check if zero line in bounds\n        if (Math.min(bounds[0][v], bounds[1][v]) <= 0 && Math.max(bounds[0][v], bounds[1][v]) >= 0) {\n          this._lines.drawZero(u, v, this.bounds, x, this.zeroLineColor[v], this.zeroLineWidth[v] * this.pixelRatio);\n        }\n      }\n    }\n  }\n\n  //Then draw axis lines and tick marks\n  for (var i = 0; i < 3; ++i) {\n    //Draw axis lines\n    if (this.lineEnable[i]) {\n      this._lines.drawAxisLine(i, this.bounds, lineOffset[i].primalOffset, this.lineColor[i], this.lineWidth[i] * this.pixelRatio);\n    }\n    if (this.lineMirror[i]) {\n      this._lines.drawAxisLine(i, this.bounds, lineOffset[i].mirrorOffset, this.lineColor[i], this.lineWidth[i] * this.pixelRatio);\n    }\n\n    //Compute minor axes\n    var primalMinor = copyVec3(PRIMAL_MINOR, lineOffset[i].primalMinor);\n    var mirrorMinor = copyVec3(MIRROR_MINOR, lineOffset[i].mirrorMinor);\n    var tickLength = this.lineTickLength;\n    for (var j = 0; j < 3; ++j) {\n      var scaleFactor = pixelScaleF / model[5 * j];\n      primalMinor[j] *= tickLength[j] * scaleFactor;\n      mirrorMinor[j] *= tickLength[j] * scaleFactor;\n    }\n\n    //Draw axis line ticks\n    if (this.lineTickEnable[i]) {\n      this._lines.drawAxisTicks(i, lineOffset[i].primalOffset, primalMinor, this.lineTickColor[i], this.lineTickWidth[i] * this.pixelRatio);\n    }\n    if (this.lineTickMirror[i]) {\n      this._lines.drawAxisTicks(i, lineOffset[i].mirrorOffset, mirrorMinor, this.lineTickColor[i], this.lineTickWidth[i] * this.pixelRatio);\n    }\n  }\n  this._lines.unbind();\n\n  //Draw text sprites\n  this._text.bind(model, view, projection, this.pixelRatio);\n  var alignOpt; // options in shader are from this list {-1, 0, 1, 2, 3, ..., n}\n  // -1: backward compatible\n  //  0: raw data\n  //  1: auto align, free angles\n  //  2: auto align, horizontal or vertical\n  //3-n: auto align, round to n directions e.g. 12 -> round to angles with 30-degree steps\n\n  var hv_ratio = 0.5; // can have an effect on the ratio between horizontals and verticals when using option 2\n\n  var enableAlign;\n  var alignDir;\n  function alignTo(i) {\n    alignDir = [0, 0, 0];\n    alignDir[i] = 1;\n  }\n  function solveTickAlignments(i, minor, major) {\n    var i1 = (i + 1) % 3;\n    var i2 = (i + 2) % 3;\n    var A = minor[i1];\n    var B = minor[i2];\n    var C = major[i1];\n    var D = major[i2];\n    if (A > 0 && D > 0) {\n      alignTo(i1);\n      return;\n    } else if (A > 0 && D < 0) {\n      alignTo(i1);\n      return;\n    } else if (A < 0 && D > 0) {\n      alignTo(i1);\n      return;\n    } else if (A < 0 && D < 0) {\n      alignTo(i1);\n      return;\n    } else if (B > 0 && C > 0) {\n      alignTo(i2);\n      return;\n    } else if (B > 0 && C < 0) {\n      alignTo(i2);\n      return;\n    } else if (B < 0 && C > 0) {\n      alignTo(i2);\n      return;\n    } else if (B < 0 && C < 0) {\n      alignTo(i2);\n      return;\n    }\n  }\n  for (var i = 0; i < 3; ++i) {\n    var minor = lineOffset[i].primalMinor;\n    var major = lineOffset[i].mirrorMinor;\n    var offset = copyVec3(PRIMAL_OFFSET, lineOffset[i].primalOffset);\n    for (var j = 0; j < 3; ++j) {\n      if (this.lineTickEnable[i]) {\n        offset[j] += pixelScaleF * minor[j] * Math.max(this.lineTickLength[j], 0) / model[5 * j];\n      }\n    }\n    var axis = [0, 0, 0];\n    axis[i] = 1;\n\n    //Draw tick text\n    if (this.tickEnable[i]) {\n      if (this.tickAngle[i] === -3600) {\n        this.tickAngle[i] = 0;\n        this.tickAlign[i] = 'auto';\n      } else {\n        this.tickAlign[i] = -1;\n      }\n      enableAlign = 1;\n      alignOpt = [this.tickAlign[i], hv_ratio, enableAlign];\n      if (alignOpt[0] === 'auto') alignOpt[0] = ALIGN_OPTION_AUTO;else alignOpt[0] = parseInt('' + alignOpt[0]);\n      alignDir = [0, 0, 0];\n      solveTickAlignments(i, minor, major);\n\n      //Add tick padding\n      for (var j = 0; j < 3; ++j) {\n        offset[j] += pixelScaleF * minor[j] * this.tickPad[j] / model[5 * j];\n      }\n\n      //Draw axis\n      this._text.drawTicks(i, this.tickSize[i], this.tickAngle[i], offset, this.tickColor[i], axis, alignDir, alignOpt);\n    }\n\n    //Draw labels\n    if (this.labelEnable[i]) {\n      enableAlign = 0;\n      alignDir = [0, 0, 0];\n      if (this.labels[i].length > 4) {\n        // for large label axis enable alignDir to axis\n        alignTo(i);\n        enableAlign = 1;\n      }\n      alignOpt = [this.labelAlign[i], hv_ratio, enableAlign];\n      if (alignOpt[0] === 'auto') alignOpt[0] = ALIGN_OPTION_AUTO;else alignOpt[0] = parseInt('' + alignOpt[0]);\n\n      //Add label padding\n      for (var j = 0; j < 3; ++j) {\n        offset[j] += pixelScaleF * minor[j] * this.labelPad[j] / model[5 * j];\n      }\n      offset[i] += 0.5 * (bounds[0][i] + bounds[1][i]);\n\n      //Draw axis\n      this._text.drawLabel(i, this.labelSize[i], this.labelAngle[i], offset, this.labelColor[i], [0, 0, 0], alignDir, alignOpt);\n    }\n  }\n  this._text.unbind();\n};\nproto.dispose = function () {\n  this._text.dispose();\n  this._lines.dispose();\n  this._background.dispose();\n  this._lines = null;\n  this._text = null;\n  this._background = null;\n  this.gl = null;\n};\nfunction createAxes(gl, options) {\n  var axes = new Axes(gl);\n  axes.update(options);\n  return axes;\n}","map":{"version":3,"names":["module","exports","createAxes","createText","require","createLines","createBackground","getCubeProperties","Ticks","identity","Float32Array","copyVec3","a","b","Axes","gl","pixelRatio","bounds","ticks","autoTicks","tickSpacing","tickEnable","tickFont","tickSize","tickAngle","tickAlign","tickColor","tickPad","lastCubeProps","cubeEdges","axis","labels","labelEnable","labelFont","labelSize","labelAngle","labelAlign","labelColor","labelPad","lineEnable","lineMirror","lineWidth","lineColor","lineTickEnable","lineTickMirror","lineTickLength","lineTickWidth","lineTickColor","gridEnable","gridWidth","gridColor","zeroEnable","zeroLineColor","zeroLineWidth","backgroundEnable","backgroundColor","_firstInit","_text","_lines","_background","proto","prototype","update","options","parseOption","nest","cons","name","opt","prev","next","Array","isArray","i","NUMBER","bind","Number","BOOLEAN","Boolean","STRING","String","COLOR","v","length","nextTicks","ticksUpdate","boundsChanged","i_loop","j","create","sort","x","equal","labelUpdate","dispose","OffsetInfo","primalOffset","primalMinor","mirrorOffset","mirrorMinor","LINE_OFFSET","computeLineOffset","result","cubeAxis","dualOffset","dualMinor","e","c","d","CUBE_ENABLE","DEFAULT_PARAMS","model","view","projection","_ortho","isOpaque","isTransparent","drawTransparent","params","ALIGN_OPTION_AUTO","PRIMAL_MINOR","MIRROR_MINOR","PRIMAL_OFFSET","draw","isOrtho","cubeParams","cx","cy","cz","cw","orthoFix","pixelScaleF","drawingBufferHeight","lineOffset","cubeEnable","u","drawGrid","Math","min","max","drawZero","drawAxisLine","tickLength","scaleFactor","drawAxisTicks","unbind","alignOpt","hv_ratio","enableAlign","alignDir","alignTo","solveTickAlignments","minor","major","i1","i2","A","B","C","D","offset","parseInt","drawTicks","drawLabel","axes"],"sources":["/home/yasmin/Ãrea de Trabalho/Frontend/node_modules/gl-axes3d/axes.js"],"sourcesContent":["'use strict'\n\nmodule.exports = createAxes\n\nvar createText        = require('./lib/text.js')\nvar createLines       = require('./lib/lines.js')\nvar createBackground  = require('./lib/background.js')\nvar getCubeProperties = require('./lib/cube.js')\nvar Ticks             = require('./lib/ticks.js')\n\nvar identity = new Float32Array([\n  1, 0, 0, 0,\n  0, 1, 0, 0,\n  0, 0, 1, 0,\n  0, 0, 0, 1])\n\nfunction copyVec3(a, b) {\n  a[0] = b[0]\n  a[1] = b[1]\n  a[2] = b[2]\n  return a\n}\n\nfunction Axes(gl) {\n  this.gl             = gl\n\n  this.pixelRatio     = 1\n\n  this.bounds         = [ [-10, -10, -10],\n                          [ 10,  10,  10] ]\n  this.ticks          = [ [], [], [] ]\n  this.autoTicks      = true\n  this.tickSpacing    = [ 1, 1, 1 ]\n\n  this.tickEnable     = [ true, true, true ]\n  this.tickFont       = [ 'sans-serif', 'sans-serif', 'sans-serif' ]\n  this.tickSize       = [ 12, 12, 12 ]\n  this.tickAngle      = [ 0, 0, 0 ]\n  this.tickAlign      = [ 'auto', 'auto', 'auto' ]\n  this.tickColor      = [ [0,0,0,1], [0,0,0,1], [0,0,0,1] ]\n  this.tickPad        = [ 10, 10, 10 ]\n\n  this.lastCubeProps  = {\n    cubeEdges: [0,0,0],\n    axis:      [0,0,0]\n  }\n\n  this.labels         = [ 'x', 'y', 'z' ]\n  this.labelEnable    = [ true, true, true ]\n  this.labelFont      = 'sans-serif'\n  this.labelSize      = [ 20, 20, 20 ]\n  this.labelAngle     = [ 0, 0, 0 ]\n  this.labelAlign     = [ 'auto', 'auto', 'auto' ]\n  this.labelColor     = [ [0,0,0,1], [0,0,0,1], [0,0,0,1] ]\n  this.labelPad       = [ 10, 10, 10 ]\n\n  this.lineEnable     = [ true, true, true ]\n  this.lineMirror     = [ false, false, false ]\n  this.lineWidth      = [ 1, 1, 1 ]\n  this.lineColor      = [ [0,0,0,1], [0,0,0,1], [0,0,0,1] ]\n\n  this.lineTickEnable = [ true, true, true ]\n  this.lineTickMirror = [ false, false, false ]\n  this.lineTickLength = [ 0, 0, 0 ]\n  this.lineTickWidth  = [ 1, 1, 1 ]\n  this.lineTickColor  = [ [0,0,0,1], [0,0,0,1], [0,0,0,1] ]\n\n  this.gridEnable     = [ true, true, true ]\n  this.gridWidth      = [ 1, 1, 1 ]\n  this.gridColor      = [ [0,0,0,1], [0,0,0,1], [0,0,0,1] ]\n\n  this.zeroEnable     = [ true, true, true ]\n  this.zeroLineColor  = [ [0,0,0,1], [0,0,0,1], [0,0,0,1] ]\n  this.zeroLineWidth  = [ 2, 2, 2 ]\n\n  this.backgroundEnable = [ false, false, false ]\n  this.backgroundColor  = [ [0.8, 0.8, 0.8, 0.5],\n                            [0.8, 0.8, 0.8, 0.5],\n                            [0.8, 0.8, 0.8, 0.5] ]\n\n  this._firstInit = true\n  this._text  = null\n  this._lines = null\n  this._background = createBackground(gl)\n}\n\nvar proto = Axes.prototype\n\nproto.update = function(options) {\n  options = options || {}\n\n  //Option parsing helper functions\n  function parseOption(nest, cons, name) {\n    if(name in options) {\n      var opt = options[name]\n      var prev = this[name]\n      var next\n      if(nest ? (Array.isArray(opt) && Array.isArray(opt[0])) :\n                 Array.isArray(opt) ) {\n        this[name] = next = [ cons(opt[0]), cons(opt[1]), cons(opt[2]) ]\n      } else {\n        this[name] = next = [ cons(opt), cons(opt), cons(opt) ]\n      }\n      for(var i=0; i<3; ++i) {\n        if(next[i] !== prev[i]) {\n          return true\n        }\n      }\n    }\n    return false\n  }\n\n  var NUMBER  = parseOption.bind(this, false, Number)\n  var BOOLEAN = parseOption.bind(this, false, Boolean)\n  var STRING  = parseOption.bind(this, false, String)\n  var COLOR   = parseOption.bind(this, true, function(v) {\n    if(Array.isArray(v)) {\n      if(v.length === 3) {\n        return [ +v[0], +v[1], +v[2], 1.0 ]\n      } else if(v.length === 4) {\n        return [ +v[0], +v[1], +v[2], +v[3] ]\n      }\n    }\n    return [ 0, 0, 0, 1 ]\n  })\n\n  //Tick marks and bounds\n  var nextTicks\n  var ticksUpdate   = false\n  var boundsChanged = false\n  if('bounds' in options) {\n    var bounds = options.bounds\ni_loop:\n    for(var i=0; i<2; ++i) {\n      for(var j=0; j<3; ++j) {\n        if(bounds[i][j] !== this.bounds[i][j]) {\n          boundsChanged = true\n        }\n        this.bounds[i][j] = bounds[i][j]\n      }\n    }\n  }\n  if('ticks' in options) {\n    nextTicks      = options.ticks\n    ticksUpdate    = true\n    this.autoTicks = false\n    for(var i=0; i<3; ++i) {\n      this.tickSpacing[i] = 0.0\n    }\n  } else if(NUMBER('tickSpacing')) {\n    this.autoTicks  = true\n    boundsChanged   = true\n  }\n\n  if(this._firstInit) {\n    if(!('ticks' in options || 'tickSpacing' in options)) {\n      this.autoTicks = true\n    }\n\n    //Force tick recomputation on first update\n    boundsChanged   = true\n    ticksUpdate     = true\n    this._firstInit = false\n  }\n\n  if(boundsChanged && this.autoTicks) {\n    nextTicks = Ticks.create(this.bounds, this.tickSpacing)\n    ticksUpdate = true\n  }\n\n  //Compare next ticks to previous ticks, only update if needed\n  if(ticksUpdate) {\n    for(var i=0; i<3; ++i) {\n      nextTicks[i].sort(function(a,b) {\n        return a.x-b.x\n      })\n    }\n    if(Ticks.equal(nextTicks, this.ticks)) {\n      ticksUpdate = false\n    } else {\n      this.ticks = nextTicks\n    }\n  }\n\n  //Parse tick properties\n  BOOLEAN('tickEnable')\n  if(STRING('tickFont')) {\n    ticksUpdate = true  //If font changes, must rebuild vbo\n  }\n  NUMBER('tickSize')\n  NUMBER('tickAngle')\n  NUMBER('tickPad')\n  COLOR('tickColor')\n\n  //Axis labels\n  var labelUpdate = STRING('labels')\n  if(STRING('labelFont')) {\n    labelUpdate = true\n  }\n  BOOLEAN('labelEnable')\n  NUMBER('labelSize')\n  NUMBER('labelPad')\n  COLOR('labelColor')\n\n  //Axis lines\n  BOOLEAN('lineEnable')\n  BOOLEAN('lineMirror')\n  NUMBER('lineWidth')\n  COLOR('lineColor')\n\n  //Axis line ticks\n  BOOLEAN('lineTickEnable')\n  BOOLEAN('lineTickMirror')\n  NUMBER('lineTickLength')\n  NUMBER('lineTickWidth')\n  COLOR('lineTickColor')\n\n  //Grid lines\n  BOOLEAN('gridEnable')\n  NUMBER('gridWidth')\n  COLOR('gridColor')\n\n  //Zero line\n  BOOLEAN('zeroEnable')\n  COLOR('zeroLineColor')\n  NUMBER('zeroLineWidth')\n\n  //Background\n  BOOLEAN('backgroundEnable')\n  COLOR('backgroundColor')\n\n  //Update text if necessary\n  if(!this._text) {\n    this._text = createText(\n      this.gl,\n      this.bounds,\n      this.labels,\n      this.labelFont,\n      this.ticks,\n      this.tickFont)\n  } else if(this._text && (labelUpdate || ticksUpdate)) {\n    this._text.update(\n      this.bounds,\n      this.labels,\n      this.labelFont,\n      this.ticks,\n      this.tickFont)\n  }\n\n  //Update lines if necessary\n  if(this._lines && ticksUpdate) {\n    this._lines.dispose()\n    this._lines = null\n  }\n  if(!this._lines) {\n    this._lines = createLines(this.gl, this.bounds, this.ticks)\n  }\n}\n\nfunction OffsetInfo() {\n  this.primalOffset = [0,0,0]\n  this.primalMinor  = [0,0,0]\n  this.mirrorOffset = [0,0,0]\n  this.mirrorMinor  = [0,0,0]\n}\n\nvar LINE_OFFSET = [ new OffsetInfo(), new OffsetInfo(), new OffsetInfo() ]\n\nfunction computeLineOffset(result, i, bounds, cubeEdges, cubeAxis) {\n  var primalOffset = result.primalOffset\n  var primalMinor  = result.primalMinor\n  var dualOffset   = result.mirrorOffset\n  var dualMinor    = result.mirrorMinor\n  var e = cubeEdges[i]\n\n  //Calculate offsets\n  for(var j=0; j<3; ++j) {\n    if(i === j) {\n      continue\n    }\n    var a = primalOffset,\n        b = dualOffset,\n        c = primalMinor,\n        d = dualMinor\n    if(e & (1<<j)) {\n      a = dualOffset\n      b = primalOffset\n      c = dualMinor\n      d = primalMinor\n    }\n    a[j] = bounds[0][j]\n    b[j] = bounds[1][j]\n    if(cubeAxis[j] > 0) {\n      c[j] = -1\n      d[j] = 0\n    } else {\n      c[j] = 0\n      d[j] = +1\n    }\n  }\n}\n\nvar CUBE_ENABLE = [0,0,0]\nvar DEFAULT_PARAMS = {\n  model:      identity,\n  view:       identity,\n  projection: identity,\n  _ortho:      false\n}\n\nproto.isOpaque = function() {\n  return true\n}\n\nproto.isTransparent = function() {\n  return false\n}\n\nproto.drawTransparent = function(params) {}\n\nvar ALIGN_OPTION_AUTO = 0 // i.e. as defined in the shader the text would rotate to stay upwards range: [-90,90]\n\nvar PRIMAL_MINOR  = [0,0,0]\nvar MIRROR_MINOR  = [0,0,0]\nvar PRIMAL_OFFSET = [0,0,0]\n\nproto.draw = function(params) {\n  params = params || DEFAULT_PARAMS\n\n  var gl = this.gl\n\n  //Geometry for camera and axes\n  var model       = params.model || identity\n  var view        = params.view || identity\n  var projection  = params.projection || identity\n  var bounds      = this.bounds\n  var isOrtho     = params._ortho || false\n\n  //Unpack axis info\n  var cubeParams  = getCubeProperties(model, view, projection, bounds, isOrtho)\n  var cubeEdges   = cubeParams.cubeEdges\n  var cubeAxis    = cubeParams.axis\n\n  var cx = view[12]\n  var cy = view[13]\n  var cz = view[14]\n  var cw = view[15]\n\n  var orthoFix = (isOrtho) ? 2 : 1 // double up padding for orthographic ticks & labels\n  var pixelScaleF = orthoFix * this.pixelRatio * (projection[3]*cx + projection[7]*cy + projection[11]*cz + projection[15]*cw) / gl.drawingBufferHeight\n\n  for(var i=0; i<3; ++i) {\n    this.lastCubeProps.cubeEdges[i] = cubeEdges[i]\n    this.lastCubeProps.axis[i] = cubeAxis[i]\n  }\n\n  //Compute axis info\n  var lineOffset  = LINE_OFFSET\n  for(var i=0; i<3; ++i) {\n    computeLineOffset(\n      LINE_OFFSET[i],\n      i,\n      this.bounds,\n      cubeEdges,\n      cubeAxis)\n  }\n\n  //Set up state parameters\n  var gl = this.gl\n\n  //Draw background first\n  var cubeEnable = CUBE_ENABLE\n  for(var i=0; i<3; ++i) {\n    if(this.backgroundEnable[i]) {\n      cubeEnable[i] = cubeAxis[i]\n    } else {\n      cubeEnable[i] = 0\n    }\n  }\n\n  this._background.draw(\n    model,\n    view,\n    projection,\n    bounds,\n    cubeEnable,\n    this.backgroundColor)\n\n  //Draw lines\n  this._lines.bind(\n    model,\n    view,\n    projection,\n    this)\n\n  //First draw grid lines and zero lines\n  for(var i=0; i<3; ++i) {\n    var x = [0,0,0]\n    if(cubeAxis[i] > 0) {\n      x[i] = bounds[1][i]\n    } else {\n      x[i] = bounds[0][i]\n    }\n\n    //Draw grid lines\n    for(var j=0; j<2; ++j) {\n      var u = (i + 1 + j) % 3\n      var v = (i + 1 + (j^1)) % 3\n      if(this.gridEnable[u]) {\n        this._lines.drawGrid(u, v, this.bounds, x, this.gridColor[u], this.gridWidth[u]*this.pixelRatio)\n      }\n    }\n\n    //Draw zero lines (need to do this AFTER all grid lines are drawn)\n    for(var j=0; j<2; ++j) {\n      var u = (i + 1 + j) % 3\n      var v = (i + 1 + (j^1)) % 3\n      if(this.zeroEnable[v]) {\n        //Check if zero line in bounds\n        if(Math.min(bounds[0][v], bounds[1][v]) <= 0 && Math.max(bounds[0][v], bounds[1][v]) >= 0) {\n          this._lines.drawZero(u, v, this.bounds, x, this.zeroLineColor[v], this.zeroLineWidth[v]*this.pixelRatio)\n        }\n      }\n    }\n  }\n\n  //Then draw axis lines and tick marks\n  for(var i=0; i<3; ++i) {\n\n    //Draw axis lines\n    if(this.lineEnable[i]) {\n      this._lines.drawAxisLine(i, this.bounds, lineOffset[i].primalOffset, this.lineColor[i], this.lineWidth[i]*this.pixelRatio)\n    }\n    if(this.lineMirror[i]) {\n      this._lines.drawAxisLine(i, this.bounds, lineOffset[i].mirrorOffset, this.lineColor[i], this.lineWidth[i]*this.pixelRatio)\n    }\n\n    //Compute minor axes\n    var primalMinor = copyVec3(PRIMAL_MINOR, lineOffset[i].primalMinor)\n    var mirrorMinor = copyVec3(MIRROR_MINOR, lineOffset[i].mirrorMinor)\n    var tickLength  = this.lineTickLength\n    for(var j=0; j<3; ++j) {\n      var scaleFactor = pixelScaleF / model[5*j]\n      primalMinor[j] *= tickLength[j] * scaleFactor\n      mirrorMinor[j] *= tickLength[j] * scaleFactor\n    }\n\n\n\n    //Draw axis line ticks\n    if(this.lineTickEnable[i]) {\n      this._lines.drawAxisTicks(i, lineOffset[i].primalOffset, primalMinor, this.lineTickColor[i], this.lineTickWidth[i]*this.pixelRatio)\n    }\n    if(this.lineTickMirror[i]) {\n      this._lines.drawAxisTicks(i, lineOffset[i].mirrorOffset, mirrorMinor, this.lineTickColor[i], this.lineTickWidth[i]*this.pixelRatio)\n    }\n  }\n  this._lines.unbind()\n\n  //Draw text sprites\n  this._text.bind(\n    model,\n    view,\n    projection,\n    this.pixelRatio)\n\n  var alignOpt // options in shader are from this list {-1, 0, 1, 2, 3, ..., n}\n  // -1: backward compatible\n  //  0: raw data\n  //  1: auto align, free angles\n  //  2: auto align, horizontal or vertical\n  //3-n: auto align, round to n directions e.g. 12 -> round to angles with 30-degree steps\n\n  var hv_ratio = 0.5 // can have an effect on the ratio between horizontals and verticals when using option 2\n\n  var enableAlign\n  var alignDir\n\n  function alignTo(i) {\n    alignDir = [0,0,0]\n    alignDir[i] = 1\n  }\n\n  function solveTickAlignments(i, minor, major) {\n\n    var i1 = (i + 1) % 3\n    var i2 = (i + 2) % 3\n\n    var A = minor[i1]\n    var B = minor[i2]\n    var C = major[i1]\n    var D = major[i2]\n\n         if ((A > 0) && (D > 0)) { alignTo(i1); return; }\n    else if ((A > 0) && (D < 0)) { alignTo(i1); return; }\n    else if ((A < 0) && (D > 0)) { alignTo(i1); return; }\n    else if ((A < 0) && (D < 0)) { alignTo(i1); return; }\n    else if ((B > 0) && (C > 0)) { alignTo(i2); return; }\n    else if ((B > 0) && (C < 0)) { alignTo(i2); return; }\n    else if ((B < 0) && (C > 0)) { alignTo(i2); return; }\n    else if ((B < 0) && (C < 0)) { alignTo(i2); return; }\n  }\n\n  for(var i=0; i<3; ++i) {\n\n    var minor      = lineOffset[i].primalMinor\n    var major      = lineOffset[i].mirrorMinor\n\n    var offset     = copyVec3(PRIMAL_OFFSET, lineOffset[i].primalOffset)\n\n    for(var j=0; j<3; ++j) {\n      if(this.lineTickEnable[i]) {\n        offset[j] += pixelScaleF * minor[j] * Math.max(this.lineTickLength[j], 0)  / model[5*j]\n      }\n    }\n\n    var axis = [0,0,0]\n    axis[i] = 1\n\n    //Draw tick text\n    if(this.tickEnable[i]) {\n\n      if(this.tickAngle[i] === -3600) {\n        this.tickAngle[i] = 0\n        this.tickAlign[i] = 'auto'\n      } else {\n        this.tickAlign[i] = -1\n      }\n\n      enableAlign = 1;\n\n      alignOpt = [this.tickAlign[i], hv_ratio, enableAlign]\n      if(alignOpt[0] === 'auto') alignOpt[0] = ALIGN_OPTION_AUTO\n      else alignOpt[0] = parseInt('' + alignOpt[0])\n\n      alignDir = [0,0,0]\n      solveTickAlignments(i, minor, major)\n\n      //Add tick padding\n      for(var j=0; j<3; ++j) {\n        offset[j] += pixelScaleF * minor[j] * this.tickPad[j] / model[5*j]\n      }\n\n      //Draw axis\n      this._text.drawTicks(\n        i,\n        this.tickSize[i],\n        this.tickAngle[i],\n        offset,\n        this.tickColor[i],\n        axis,\n        alignDir,\n        alignOpt)\n    }\n\n    //Draw labels\n    if(this.labelEnable[i]) {\n\n      enableAlign = 0\n      alignDir = [0,0,0]\n      if(this.labels[i].length > 4) { // for large label axis enable alignDir to axis\n        alignTo(i)\n        enableAlign = 1\n      }\n\n      alignOpt = [this.labelAlign[i], hv_ratio, enableAlign]\n      if(alignOpt[0] === 'auto') alignOpt[0] = ALIGN_OPTION_AUTO\n      else alignOpt[0] = parseInt('' + alignOpt[0])\n\n      //Add label padding\n      for(var j=0; j<3; ++j) {\n        offset[j] += pixelScaleF * minor[j] * this.labelPad[j] / model[5*j]\n      }\n      offset[i] += 0.5 * (bounds[0][i] + bounds[1][i])\n\n      //Draw axis\n      this._text.drawLabel(\n        i,\n        this.labelSize[i],\n        this.labelAngle[i],\n        offset,\n        this.labelColor[i],\n        [0,0,0],\n        alignDir,\n        alignOpt)\n    }\n  }\n\n  this._text.unbind()\n}\n\nproto.dispose = function() {\n  this._text.dispose()\n  this._lines.dispose()\n  this._background.dispose()\n  this._lines = null\n  this._text = null\n  this._background = null\n  this.gl = null\n}\n\nfunction createAxes(gl, options) {\n  var axes = new Axes(gl)\n  axes.update(options)\n  return axes\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}