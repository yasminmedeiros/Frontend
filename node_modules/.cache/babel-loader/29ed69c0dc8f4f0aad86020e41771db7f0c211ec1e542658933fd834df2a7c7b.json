{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar createGeo = require('./geo');\nvar getSubplotCalcData = require('../../plots/get_data').getSubplotCalcData;\nvar counterRegex = require('../../lib').counterRegex;\nvar GEO = 'geo';\nexports.name = GEO;\nexports.attr = GEO;\nexports.idRoot = GEO;\nexports.idRegex = exports.attrRegex = counterRegex(GEO);\nexports.attributes = require('./layout/attributes');\nexports.layoutAttributes = require('./layout/layout_attributes');\nexports.supplyLayoutDefaults = require('./layout/defaults');\nexports.plot = function plotGeo(gd) {\n  var fullLayout = gd._fullLayout;\n  var calcData = gd.calcdata;\n  var geoIds = fullLayout._subplots[GEO];\n\n  /**\n   * If 'plotly-geo-assets.js' is not included,\n   * initialize object to keep reference to every loaded topojson\n   */\n  if (window.PlotlyGeoAssets === undefined) {\n    window.PlotlyGeoAssets = {\n      topojson: {}\n    };\n  }\n  for (var i = 0; i < geoIds.length; i++) {\n    var geoId = geoIds[i];\n    var geoCalcData = getSubplotCalcData(calcData, GEO, geoId);\n    var geoLayout = fullLayout[geoId];\n    var geo = geoLayout._subplot;\n    if (!geo) {\n      geo = createGeo({\n        id: geoId,\n        graphDiv: gd,\n        container: fullLayout._geolayer.node(),\n        topojsonURL: gd._context.topojsonURL,\n        staticPlot: gd._context.staticPlot\n      });\n      fullLayout[geoId]._subplot = geo;\n    }\n    geo.plot(geoCalcData, fullLayout, gd._promises);\n  }\n};\nexports.clean = function (newFullData, newFullLayout, oldFullData, oldFullLayout) {\n  var oldGeoKeys = oldFullLayout._subplots[GEO] || [];\n  for (var i = 0; i < oldGeoKeys.length; i++) {\n    var oldGeoKey = oldGeoKeys[i];\n    var oldGeo = oldFullLayout[oldGeoKey]._subplot;\n    if (!newFullLayout[oldGeoKey] && !!oldGeo) {\n      oldGeo.framework.remove();\n      oldGeo.clipDef.remove();\n    }\n  }\n};\nexports.updateFx = function (gd) {\n  var fullLayout = gd._fullLayout;\n  var subplotIds = fullLayout._subplots[GEO];\n  for (var i = 0; i < subplotIds.length; i++) {\n    var subplotLayout = fullLayout[subplotIds[i]];\n    var subplotObj = subplotLayout._subplot;\n    subplotObj.updateFx(fullLayout, subplotLayout);\n  }\n};","map":{"version":3,"names":["createGeo","require","getSubplotCalcData","counterRegex","GEO","exports","name","attr","idRoot","idRegex","attrRegex","attributes","layoutAttributes","supplyLayoutDefaults","plot","plotGeo","gd","fullLayout","_fullLayout","calcData","calcdata","geoIds","_subplots","window","PlotlyGeoAssets","undefined","topojson","i","length","geoId","geoCalcData","geoLayout","geo","_subplot","id","graphDiv","container","_geolayer","node","topojsonURL","_context","staticPlot","_promises","clean","newFullData","newFullLayout","oldFullData","oldFullLayout","oldGeoKeys","oldGeoKey","oldGeo","framework","remove","clipDef","updateFx","subplotIds","subplotLayout","subplotObj"],"sources":["/home/yasmin/Ãrea de Trabalho/Frontend/node_modules/plotly.js/src/plots/geo/index.js"],"sourcesContent":["/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n\n'use strict';\n\nvar createGeo = require('./geo');\nvar getSubplotCalcData = require('../../plots/get_data').getSubplotCalcData;\nvar counterRegex = require('../../lib').counterRegex;\n\nvar GEO = 'geo';\n\nexports.name = GEO;\n\nexports.attr = GEO;\n\nexports.idRoot = GEO;\n\nexports.idRegex = exports.attrRegex = counterRegex(GEO);\n\nexports.attributes = require('./layout/attributes');\n\nexports.layoutAttributes = require('./layout/layout_attributes');\n\nexports.supplyLayoutDefaults = require('./layout/defaults');\n\nexports.plot = function plotGeo(gd) {\n    var fullLayout = gd._fullLayout;\n    var calcData = gd.calcdata;\n    var geoIds = fullLayout._subplots[GEO];\n\n    /**\n     * If 'plotly-geo-assets.js' is not included,\n     * initialize object to keep reference to every loaded topojson\n     */\n    if(window.PlotlyGeoAssets === undefined) {\n        window.PlotlyGeoAssets = {topojson: {}};\n    }\n\n    for(var i = 0; i < geoIds.length; i++) {\n        var geoId = geoIds[i];\n        var geoCalcData = getSubplotCalcData(calcData, GEO, geoId);\n        var geoLayout = fullLayout[geoId];\n        var geo = geoLayout._subplot;\n\n        if(!geo) {\n            geo = createGeo({\n                id: geoId,\n                graphDiv: gd,\n                container: fullLayout._geolayer.node(),\n                topojsonURL: gd._context.topojsonURL,\n                staticPlot: gd._context.staticPlot\n            });\n\n            fullLayout[geoId]._subplot = geo;\n        }\n\n        geo.plot(geoCalcData, fullLayout, gd._promises);\n    }\n};\n\nexports.clean = function(newFullData, newFullLayout, oldFullData, oldFullLayout) {\n    var oldGeoKeys = oldFullLayout._subplots[GEO] || [];\n\n    for(var i = 0; i < oldGeoKeys.length; i++) {\n        var oldGeoKey = oldGeoKeys[i];\n        var oldGeo = oldFullLayout[oldGeoKey]._subplot;\n\n        if(!newFullLayout[oldGeoKey] && !!oldGeo) {\n            oldGeo.framework.remove();\n            oldGeo.clipDef.remove();\n        }\n    }\n};\n\nexports.updateFx = function(gd) {\n    var fullLayout = gd._fullLayout;\n    var subplotIds = fullLayout._subplots[GEO];\n\n    for(var i = 0; i < subplotIds.length; i++) {\n        var subplotLayout = fullLayout[subplotIds[i]];\n        var subplotObj = subplotLayout._subplot;\n        subplotObj.updateFx(fullLayout, subplotLayout);\n    }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}