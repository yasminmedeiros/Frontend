{"ast":null,"code":"'use strict';\n\nvar _toConsumableArray = require(\"/home/yasmin/\\xC1rea de Trabalho/Frontend/node_modules/@babel/runtime/helpers/toConsumableArray.js\").default;\nvar rgba = require('color-normalize');\nvar getBounds = require('array-bounds');\nvar extend = require('object-assign');\nvar glslify = require('glslify');\nvar pick = require('pick-by-alias');\nvar flatten = require('flatten-vertex-data');\nvar triangulate = require('earcut');\nvar normalize = require('array-normalize');\nvar _require = require('to-float32'),\n  float32 = _require.float32,\n  fract32 = _require.fract32;\nvar WeakMap = require('es6-weak-map');\nvar parseRect = require('parse-rect');\nmodule.exports = Line2D;\n\n/** @constructor */\nfunction Line2D(regl, options) {\n  if (!(this instanceof Line2D)) return new Line2D(regl, options);\n  if (typeof regl === 'function') {\n    if (!options) options = {};\n    options.regl = regl;\n  } else {\n    options = regl;\n  }\n  if (options.length) options.positions = options;\n  regl = options.regl;\n  if (!regl.hasExtension('ANGLE_instanced_arrays')) {\n    throw Error('regl-error2d: `ANGLE_instanced_arrays` extension should be enabled');\n  }\n\n  // persistent variables\n  this.gl = regl._gl;\n  this.regl = regl;\n\n  // list of options for lines\n  this.passes = [];\n\n  // cached shaders instance\n  this.shaders = Line2D.shaders.has(regl) ? Line2D.shaders.get(regl) : Line2D.shaders.set(regl, Line2D.createShaders(regl)).get(regl);\n\n  // init defaults\n  this.update(options);\n}\nLine2D.dashMult = 2;\nLine2D.maxPatternLength = 256;\nLine2D.precisionThreshold = 3e6;\nLine2D.maxPoints = 1e4;\nLine2D.maxLines = 2048;\n\n// cache of created draw calls per-regl instance\nLine2D.shaders = new WeakMap();\n\n// create static shaders once\nLine2D.createShaders = function (regl) {\n  var offsetBuffer = regl.buffer({\n    usage: 'static',\n    type: 'float',\n    data: [0, 1, 0, 0, 1, 1, 1, 0]\n  });\n  var shaderOptions = {\n    primitive: 'triangle strip',\n    instances: regl.prop('count'),\n    count: 4,\n    offset: 0,\n    uniforms: {\n      miterMode: function miterMode(ctx, prop) {\n        return prop.join === 'round' ? 2 : 1;\n      },\n      miterLimit: regl.prop('miterLimit'),\n      scale: regl.prop('scale'),\n      scaleFract: regl.prop('scaleFract'),\n      translateFract: regl.prop('translateFract'),\n      translate: regl.prop('translate'),\n      thickness: regl.prop('thickness'),\n      dashPattern: regl.prop('dashTexture'),\n      opacity: regl.prop('opacity'),\n      pixelRatio: regl.context('pixelRatio'),\n      id: regl.prop('id'),\n      dashSize: regl.prop('dashLength'),\n      viewport: function viewport(c, p) {\n        return [p.viewport.x, p.viewport.y, c.viewportWidth, c.viewportHeight];\n      },\n      depth: regl.prop('depth')\n    },\n    blend: {\n      enable: true,\n      color: [0, 0, 0, 0],\n      equation: {\n        rgb: 'add',\n        alpha: 'add'\n      },\n      func: {\n        srcRGB: 'src alpha',\n        dstRGB: 'one minus src alpha',\n        srcAlpha: 'one minus dst alpha',\n        dstAlpha: 'one'\n      }\n    },\n    depth: {\n      enable: function enable(c, p) {\n        return !p.overlay;\n      }\n    },\n    stencil: {\n      enable: false\n    },\n    scissor: {\n      enable: true,\n      box: regl.prop('viewport')\n    },\n    viewport: regl.prop('viewport')\n  };\n\n  // simplified rectangular line shader\n  var drawRectLine = regl(extend({\n    vert: glslify('./rect-vert.glsl'),\n    frag: glslify('./rect-frag.glsl'),\n    attributes: {\n      // if point is at the end of segment\n      lineEnd: {\n        buffer: offsetBuffer,\n        divisor: 0,\n        stride: 8,\n        offset: 0\n      },\n      // if point is at the top of segment\n      lineTop: {\n        buffer: offsetBuffer,\n        divisor: 0,\n        stride: 8,\n        offset: 4\n      },\n      // beginning of line coordinate\n      aCoord: {\n        buffer: regl.prop('positionBuffer'),\n        stride: 8,\n        offset: 8,\n        divisor: 1\n      },\n      // end of line coordinate\n      bCoord: {\n        buffer: regl.prop('positionBuffer'),\n        stride: 8,\n        offset: 16,\n        divisor: 1\n      },\n      aCoordFract: {\n        buffer: regl.prop('positionFractBuffer'),\n        stride: 8,\n        offset: 8,\n        divisor: 1\n      },\n      bCoordFract: {\n        buffer: regl.prop('positionFractBuffer'),\n        stride: 8,\n        offset: 16,\n        divisor: 1\n      },\n      color: {\n        buffer: regl.prop('colorBuffer'),\n        stride: 4,\n        offset: 0,\n        divisor: 1\n      }\n    }\n  }, shaderOptions));\n\n  // create regl draw\n  var drawMiterLine;\n  try {\n    drawMiterLine = regl(extend({\n      // culling removes polygon creasing\n      cull: {\n        enable: true,\n        face: 'back'\n      },\n      vert: glslify('./miter-vert.glsl'),\n      frag: glslify('./miter-frag.glsl'),\n      attributes: {\n        // is line end\n        lineEnd: {\n          buffer: offsetBuffer,\n          divisor: 0,\n          stride: 8,\n          offset: 0\n        },\n        // is line top\n        lineTop: {\n          buffer: offsetBuffer,\n          divisor: 0,\n          stride: 8,\n          offset: 4\n        },\n        // left color\n        aColor: {\n          buffer: regl.prop('colorBuffer'),\n          stride: 4,\n          offset: 0,\n          divisor: 1\n        },\n        // right color\n        bColor: {\n          buffer: regl.prop('colorBuffer'),\n          stride: 4,\n          offset: 4,\n          divisor: 1\n        },\n        prevCoord: {\n          buffer: regl.prop('positionBuffer'),\n          stride: 8,\n          offset: 0,\n          divisor: 1\n        },\n        aCoord: {\n          buffer: regl.prop('positionBuffer'),\n          stride: 8,\n          offset: 8,\n          divisor: 1\n        },\n        bCoord: {\n          buffer: regl.prop('positionBuffer'),\n          stride: 8,\n          offset: 16,\n          divisor: 1\n        },\n        nextCoord: {\n          buffer: regl.prop('positionBuffer'),\n          stride: 8,\n          offset: 24,\n          divisor: 1\n        }\n      }\n    }, shaderOptions));\n  } catch (e) {\n    // IE/bad Webkit fallback\n    drawMiterLine = drawRectLine;\n  }\n\n  // fill shader\n  var drawFill = regl({\n    primitive: 'triangle',\n    elements: function elements(ctx, prop) {\n      return prop.triangles;\n    },\n    offset: 0,\n    vert: glslify('./fill-vert.glsl'),\n    frag: glslify('./fill-frag.glsl'),\n    uniforms: {\n      scale: regl.prop('scale'),\n      color: regl.prop('fill'),\n      scaleFract: regl.prop('scaleFract'),\n      translateFract: regl.prop('translateFract'),\n      translate: regl.prop('translate'),\n      opacity: regl.prop('opacity'),\n      pixelRatio: regl.context('pixelRatio'),\n      id: regl.prop('id'),\n      viewport: function viewport(ctx, prop) {\n        return [prop.viewport.x, prop.viewport.y, ctx.viewportWidth, ctx.viewportHeight];\n      }\n    },\n    attributes: {\n      position: {\n        buffer: regl.prop('positionBuffer'),\n        stride: 8,\n        offset: 8\n      },\n      positionFract: {\n        buffer: regl.prop('positionFractBuffer'),\n        stride: 8,\n        offset: 8\n      }\n    },\n    blend: shaderOptions.blend,\n    depth: {\n      enable: false\n    },\n    scissor: shaderOptions.scissor,\n    stencil: shaderOptions.stencil,\n    viewport: shaderOptions.viewport\n  });\n  return {\n    fill: drawFill,\n    rect: drawRectLine,\n    miter: drawMiterLine\n  };\n};\n\n// used to for new lines instances\nLine2D.defaults = {\n  dashes: null,\n  join: 'miter',\n  miterLimit: 1,\n  thickness: 10,\n  cap: 'square',\n  color: 'black',\n  opacity: 1,\n  overlay: false,\n  viewport: null,\n  range: null,\n  close: false,\n  fill: null\n};\nLine2D.prototype.render = function () {\n  if (arguments.length) {\n    this.update.apply(this, arguments);\n  }\n  this.draw();\n};\nLine2D.prototype.draw = function () {\n  var _this = this;\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  // render multiple polylines via regl batch\n  (args.length ? args : this.passes).forEach(function (s, i) {\n    // render array pass as a list of passes\n    if (s && Array.isArray(s)) return _this.draw.apply(_this, _toConsumableArray(s));\n    if (typeof s === 'number') s = _this.passes[s];\n    if (!(s && s.count > 1 && s.opacity)) return;\n    _this.regl._refresh();\n    if (s.fill && s.triangles && s.triangles.length > 2) {\n      _this.shaders.fill(s);\n    }\n    if (!s.thickness) return;\n\n    // high scale is only available for rect mode with precision\n    if (s.scale[0] * s.viewport.width > Line2D.precisionThreshold || s.scale[1] * s.viewport.height > Line2D.precisionThreshold) {\n      _this.shaders.rect(s);\n    }\n\n    // thin this.passes or too many points are rendered as simplified rect shader\n    else if (s.join === 'rect' || !s.join && (s.thickness <= 2 || s.count >= Line2D.maxPoints)) {\n      _this.shaders.rect(s);\n    } else {\n      _this.shaders.miter(s);\n    }\n  });\n  return this;\n};\nLine2D.prototype.update = function (options) {\n  var _this2 = this;\n  if (!options) return;\n  if (options.length != null) {\n    if (typeof options[0] === 'number') options = [{\n      positions: options\n    }];\n  }\n\n  // make options a batch\n  else if (!Array.isArray(options)) options = [options];\n  var regl = this.regl,\n    gl = this.gl;\n\n  // process per-line settings\n  options.forEach(function (o, i) {\n    var state = _this2.passes[i];\n    if (o === undefined) return;\n\n    // null-argument removes pass\n    if (o === null) {\n      _this2.passes[i] = null;\n      return;\n    }\n    if (typeof o[0] === 'number') o = {\n      positions: o\n    };\n\n    // handle aliases\n    o = pick(o, {\n      positions: 'positions points data coords',\n      thickness: 'thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth',\n      join: 'lineJoin linejoin join type mode',\n      miterLimit: 'miterlimit miterLimit',\n      dashes: 'dash dashes dasharray dash-array dashArray',\n      color: 'color colour stroke colors colours stroke-color strokeColor',\n      fill: 'fill fill-color fillColor',\n      opacity: 'alpha opacity',\n      overlay: 'overlay crease overlap intersect',\n      close: 'closed close closed-path closePath',\n      range: 'range dataBox',\n      viewport: 'viewport viewBox',\n      hole: 'holes hole hollow'\n    });\n\n    // init state\n    if (!state) {\n      _this2.passes[i] = state = {\n        id: i,\n        scale: null,\n        scaleFract: null,\n        translate: null,\n        translateFract: null,\n        count: 0,\n        hole: [],\n        depth: 0,\n        dashLength: 1,\n        dashTexture: regl.texture({\n          channels: 1,\n          data: new Uint8Array([255]),\n          width: 1,\n          height: 1,\n          mag: 'linear',\n          min: 'linear'\n        }),\n        colorBuffer: regl.buffer({\n          usage: 'dynamic',\n          type: 'uint8',\n          data: new Uint8Array()\n        }),\n        positionBuffer: regl.buffer({\n          usage: 'dynamic',\n          type: 'float',\n          data: new Uint8Array()\n        }),\n        positionFractBuffer: regl.buffer({\n          usage: 'dynamic',\n          type: 'float',\n          data: new Uint8Array()\n        })\n      };\n      o = extend({}, Line2D.defaults, o);\n    }\n    if (o.thickness != null) state.thickness = parseFloat(o.thickness);\n    if (o.opacity != null) state.opacity = parseFloat(o.opacity);\n    if (o.miterLimit != null) state.miterLimit = parseFloat(o.miterLimit);\n    if (o.overlay != null) {\n      state.overlay = !!o.overlay;\n      if (i < Line2D.maxLines) {\n        state.depth = 2 * (Line2D.maxLines - 1 - i % Line2D.maxLines) / Line2D.maxLines - 1.;\n      }\n    }\n    if (o.join != null) state.join = o.join;\n    if (o.hole != null) state.hole = o.hole;\n    if (o.fill != null) state.fill = !o.fill ? null : rgba(o.fill, 'uint8');\n    if (o.viewport != null) state.viewport = parseRect(o.viewport);\n    if (!state.viewport) {\n      state.viewport = parseRect([gl.drawingBufferWidth, gl.drawingBufferHeight]);\n    }\n    if (o.close != null) state.close = o.close;\n\n    // reset positions\n    if (o.positions === null) o.positions = [];\n    if (o.positions) {\n      var positions, count;\n\n      // if positions are an object with x/y\n      if (o.positions.x && o.positions.y) {\n        var xPos = o.positions.x;\n        var yPos = o.positions.y;\n        count = state.count = Math.max(xPos.length, yPos.length);\n        positions = new Float64Array(count * 2);\n        for (var _i = 0; _i < count; _i++) {\n          positions[_i * 2] = xPos[_i];\n          positions[_i * 2 + 1] = yPos[_i];\n        }\n      } else {\n        positions = flatten(o.positions, 'float64');\n        count = state.count = Math.floor(positions.length / 2);\n      }\n      var bounds = state.bounds = getBounds(positions, 2);\n\n      // create fill positions\n      // FIXME: fill positions can be set only along with positions\n      if (state.fill) {\n        var pos = [];\n\n        // filter bad vertices and remap triangles to ensure shape\n        var ids = {};\n        var lastId = 0;\n        for (var _i2 = 0, ptr = 0, l = state.count; _i2 < l; _i2++) {\n          var x = positions[_i2 * 2];\n          var y = positions[_i2 * 2 + 1];\n          if (isNaN(x) || isNaN(y) || x == null || y == null) {\n            x = positions[lastId * 2];\n            y = positions[lastId * 2 + 1];\n            ids[_i2] = lastId;\n          } else {\n            lastId = _i2;\n          }\n          pos[ptr++] = x;\n          pos[ptr++] = y;\n        }\n        var triangles = triangulate(pos, state.hole || []);\n        for (var _i3 = 0, _l = triangles.length; _i3 < _l; _i3++) {\n          if (ids[triangles[_i3]] != null) triangles[_i3] = ids[triangles[_i3]];\n        }\n        state.triangles = triangles;\n      }\n\n      // update position buffers\n      var npos = new Float64Array(positions);\n      normalize(npos, 2, bounds);\n      var positionData = new Float64Array(count * 2 + 6);\n\n      // rotate first segment join\n      if (state.close) {\n        if (positions[0] === positions[count * 2 - 2] && positions[1] === positions[count * 2 - 1]) {\n          positionData[0] = npos[count * 2 - 4];\n          positionData[1] = npos[count * 2 - 3];\n        } else {\n          positionData[0] = npos[count * 2 - 2];\n          positionData[1] = npos[count * 2 - 1];\n        }\n      } else {\n        positionData[0] = npos[0];\n        positionData[1] = npos[1];\n      }\n      positionData.set(npos, 2);\n\n      // add last segment\n      if (state.close) {\n        // ignore coinciding start/end\n        if (positions[0] === positions[count * 2 - 2] && positions[1] === positions[count * 2 - 1]) {\n          positionData[count * 2 + 2] = npos[2];\n          positionData[count * 2 + 3] = npos[3];\n          state.count -= 1;\n        } else {\n          positionData[count * 2 + 2] = npos[0];\n          positionData[count * 2 + 3] = npos[1];\n          positionData[count * 2 + 4] = npos[2];\n          positionData[count * 2 + 5] = npos[3];\n        }\n      }\n      // add stub\n      else {\n        positionData[count * 2 + 2] = npos[count * 2 - 2];\n        positionData[count * 2 + 3] = npos[count * 2 - 1];\n        positionData[count * 2 + 4] = npos[count * 2 - 2];\n        positionData[count * 2 + 5] = npos[count * 2 - 1];\n      }\n      state.positionBuffer(float32(positionData));\n      state.positionFractBuffer(fract32(positionData));\n    }\n    if (o.range) {\n      state.range = o.range;\n    } else if (!state.range) {\n      state.range = state.bounds;\n    }\n    if ((o.range || o.positions) && state.count) {\n      var _bounds = state.bounds;\n      var boundsW = _bounds[2] - _bounds[0],\n        boundsH = _bounds[3] - _bounds[1];\n      var rangeW = state.range[2] - state.range[0],\n        rangeH = state.range[3] - state.range[1];\n      state.scale = [boundsW / rangeW, boundsH / rangeH];\n      state.translate = [-state.range[0] / rangeW + _bounds[0] / rangeW || 0, -state.range[1] / rangeH + _bounds[1] / rangeH || 0];\n      state.scaleFract = fract32(state.scale);\n      state.translateFract = fract32(state.translate);\n    }\n    if (o.dashes) {\n      var dashLength = 0.,\n        dashData;\n      if (!o.dashes || o.dashes.length < 2) {\n        dashLength = 1.;\n        dashData = new Uint8Array([255, 255, 255, 255, 255, 255, 255, 255]);\n      } else {\n        dashLength = 0.;\n        for (var _i4 = 0; _i4 < o.dashes.length; ++_i4) {\n          dashLength += o.dashes[_i4];\n        }\n        dashData = new Uint8Array(dashLength * Line2D.dashMult);\n        var _ptr = 0;\n        var fillColor = 255;\n\n        // repeat texture two times to provide smooth 0-step\n        for (var k = 0; k < 2; k++) {\n          for (var _i5 = 0; _i5 < o.dashes.length; ++_i5) {\n            for (var j = 0, _l2 = o.dashes[_i5] * Line2D.dashMult * .5; j < _l2; ++j) {\n              dashData[_ptr++] = fillColor;\n            }\n            fillColor ^= 255;\n          }\n        }\n      }\n      state.dashLength = dashLength;\n      state.dashTexture({\n        channels: 1,\n        data: dashData,\n        width: dashData.length,\n        height: 1,\n        mag: 'linear',\n        min: 'linear'\n      }, 0, 0);\n    }\n    if (o.color) {\n      var _count = state.count;\n      var colors = o.color;\n      if (!colors) colors = 'transparent';\n      var colorData = new Uint8Array(_count * 4 + 4);\n\n      // convert colors to typed arrays\n      if (!Array.isArray(colors) || typeof colors[0] === 'number') {\n        var c = rgba(colors, 'uint8');\n        for (var _i6 = 0; _i6 < _count + 1; _i6++) {\n          colorData.set(c, _i6 * 4);\n        }\n      } else {\n        for (var _i7 = 0; _i7 < _count; _i7++) {\n          var _c = rgba(colors[_i7], 'uint8');\n          colorData.set(_c, _i7 * 4);\n        }\n        colorData.set(rgba(colors[0], 'uint8'), _count * 4);\n      }\n      state.colorBuffer({\n        usage: 'dynamic',\n        type: 'uint8',\n        data: colorData\n      });\n    }\n  });\n\n  // remove unmentioned passes\n  if (options.length < this.passes.length) {\n    for (var i = options.length; i < this.passes.length; i++) {\n      var pass = this.passes[i];\n      if (!pass) continue;\n      pass.colorBuffer.destroy();\n      pass.positionBuffer.destroy();\n      pass.dashTexture.destroy();\n    }\n    this.passes.length = options.length;\n  }\n\n  // remove null items\n  var passes = [];\n  for (var _i8 = 0; _i8 < this.passes.length; _i8++) {\n    if (this.passes[_i8] !== null) passes.push(this.passes[_i8]);\n  }\n  this.passes = passes;\n  return this;\n};\nLine2D.prototype.destroy = function () {\n  this.passes.forEach(function (pass) {\n    pass.colorBuffer.destroy();\n    pass.positionBuffer.destroy();\n    pass.dashTexture.destroy();\n  });\n  this.passes.length = 0;\n  return this;\n};","map":{"version":3,"names":["rgba","require","getBounds","extend","glslify","pick","flatten","triangulate","normalize","float32","fract32","WeakMap","parseRect","module","exports","Line2D","regl","options","length","positions","hasExtension","Error","gl","_gl","passes","shaders","has","get","set","createShaders","update","dashMult","maxPatternLength","precisionThreshold","maxPoints","maxLines","offsetBuffer","buffer","usage","type","data","shaderOptions","primitive","instances","prop","count","offset","uniforms","miterMode","ctx","join","miterLimit","scale","scaleFract","translateFract","translate","thickness","dashPattern","opacity","pixelRatio","context","id","dashSize","viewport","c","p","x","y","viewportWidth","viewportHeight","depth","blend","enable","color","equation","rgb","alpha","func","srcRGB","dstRGB","srcAlpha","dstAlpha","overlay","stencil","scissor","box","drawRectLine","vert","frag","attributes","lineEnd","divisor","stride","lineTop","aCoord","bCoord","aCoordFract","bCoordFract","drawMiterLine","cull","face","aColor","bColor","prevCoord","nextCoord","e","drawFill","elements","triangles","position","positionFract","fill","rect","miter","defaults","dashes","cap","range","close","prototype","render","draw","args","forEach","s","i","Array","isArray","_refresh","width","height","o","state","undefined","hole","dashLength","dashTexture","texture","channels","Uint8Array","mag","min","colorBuffer","positionBuffer","positionFractBuffer","parseFloat","drawingBufferWidth","drawingBufferHeight","xPos","yPos","Math","max","Float64Array","floor","bounds","pos","ids","lastId","ptr","l","isNaN","npos","positionData","boundsW","boundsH","rangeW","rangeH","dashData","fillColor","k","j","colors","colorData","pass","destroy","push"],"sources":["/home/yasmin/Área de Trabalho/Frontend/node_modules/regl-line2d/index.js"],"sourcesContent":["'use strict'\n\n\nconst rgba = require('color-normalize')\nconst getBounds = require('array-bounds')\nconst extend = require('object-assign')\nconst glslify = require('glslify')\nconst pick = require('pick-by-alias')\nconst flatten = require('flatten-vertex-data')\nconst triangulate = require('earcut')\nconst normalize = require('array-normalize')\nconst { float32, fract32 } = require('to-float32')\nconst WeakMap = require('es6-weak-map')\nconst parseRect = require('parse-rect')\n\n\nmodule.exports = Line2D\n\n\n/** @constructor */\nfunction Line2D (regl, options) {\n\tif (!(this instanceof Line2D)) return new Line2D(regl, options)\n\n\tif (typeof regl === 'function') {\n\t\tif (!options) options = {}\n\t\toptions.regl = regl\n\t}\n\telse {\n\t\toptions = regl\n\t}\n\tif (options.length) options.positions = options\n\tregl = options.regl\n\n\tif (!regl.hasExtension('ANGLE_instanced_arrays')) {\n\t\tthrow Error('regl-error2d: `ANGLE_instanced_arrays` extension should be enabled');\n\t}\n\n\t// persistent variables\n\tthis.gl = regl._gl\n\tthis.regl = regl\n\n\t// list of options for lines\n\tthis.passes = []\n\n\t// cached shaders instance\n\tthis.shaders = Line2D.shaders.has(regl) ? Line2D.shaders.get(regl) : Line2D.shaders.set(regl, Line2D.createShaders(regl)).get(regl)\n\n\n\t// init defaults\n\tthis.update(options)\n}\n\n\nLine2D.dashMult = 2\nLine2D.maxPatternLength = 256\nLine2D.precisionThreshold = 3e6\nLine2D.maxPoints = 1e4\nLine2D.maxLines = 2048\n\n\n// cache of created draw calls per-regl instance\nLine2D.shaders = new WeakMap()\n\n\n// create static shaders once\nLine2D.createShaders = function (regl) {\n\tlet offsetBuffer = regl.buffer({\n\t\tusage: 'static',\n\t\ttype: 'float',\n\t\tdata: [0,1, 0,0, 1,1, 1,0]\n\t})\n\n\tlet shaderOptions = {\n\t\tprimitive: 'triangle strip',\n\t\tinstances: regl.prop('count'),\n\t\tcount: 4,\n\t\toffset: 0,\n\n\t\tuniforms: {\n\t\t\tmiterMode: (ctx, prop) => prop.join === 'round' ? 2 : 1,\n\t\t\tmiterLimit: regl.prop('miterLimit'),\n\t\t\tscale: regl.prop('scale'),\n\t\t\tscaleFract: regl.prop('scaleFract'),\n\t\t\ttranslateFract: regl.prop('translateFract'),\n\t\t\ttranslate: regl.prop('translate'),\n\t\t\tthickness: regl.prop('thickness'),\n\t\t\tdashPattern: regl.prop('dashTexture'),\n\t\t\topacity: regl.prop('opacity'),\n\t\t\tpixelRatio: regl.context('pixelRatio'),\n\t\t\tid: regl.prop('id'),\n\t\t\tdashSize: regl.prop('dashLength'),\n\t\t\tviewport: (c, p) => [p.viewport.x, p.viewport.y, c.viewportWidth, c.viewportHeight],\n\t\t\tdepth: regl.prop('depth')\n\t\t},\n\n\t\tblend: {\n\t\t\tenable: true,\n\t\t\tcolor: [0,0,0,0],\n\t\t\tequation: {\n\t\t\t\trgb: 'add',\n\t\t\t\talpha: 'add'\n\t\t\t},\n\t\t\tfunc: {\n\t\t\t\tsrcRGB: 'src alpha',\n\t\t\t\tdstRGB: 'one minus src alpha',\n\t\t\t\tsrcAlpha: 'one minus dst alpha',\n\t\t\t\tdstAlpha: 'one'\n\t\t\t}\n\t\t},\n\t\tdepth: {\n\t\t\tenable: (c, p) => {\n\t\t\t\treturn !p.overlay\n\t\t\t}\n\t\t},\n\t\tstencil: {enable: false},\n\t\tscissor: {\n\t\t\tenable: true,\n\t\t\tbox: regl.prop('viewport')\n\t\t},\n\t\tviewport: regl.prop('viewport')\n\t}\n\n\n\t// simplified rectangular line shader\n\tlet drawRectLine = regl(extend({\n\t\tvert: glslify('./rect-vert.glsl'),\n\t\tfrag: glslify('./rect-frag.glsl'),\n\n\t\tattributes: {\n\t\t\t// if point is at the end of segment\n\t\t\tlineEnd: {\n\t\t\t\tbuffer: offsetBuffer,\n\t\t\t\tdivisor: 0,\n\t\t\t\tstride: 8,\n\t\t\t\toffset: 0\n\t\t\t},\n\t\t\t// if point is at the top of segment\n\t\t\tlineTop: {\n\t\t\t\tbuffer: offsetBuffer,\n\t\t\t\tdivisor: 0,\n\t\t\t\tstride: 8,\n\t\t\t\toffset: 4\n\t\t\t},\n\t\t\t// beginning of line coordinate\n\t\t\taCoord: {\n\t\t\t\tbuffer: regl.prop('positionBuffer'),\n\t\t\t\tstride: 8,\n\t\t\t\toffset: 8,\n\t\t\t\tdivisor: 1\n\t\t\t},\n\t\t\t// end of line coordinate\n\t\t\tbCoord: {\n\t\t\t\tbuffer: regl.prop('positionBuffer'),\n\t\t\t\tstride: 8,\n\t\t\t\toffset: 16,\n\t\t\t\tdivisor: 1\n\t\t\t},\n\t\t\taCoordFract: {\n\t\t\t\tbuffer: regl.prop('positionFractBuffer'),\n\t\t\t\tstride: 8,\n\t\t\t\toffset: 8,\n\t\t\t\tdivisor: 1\n\t\t\t},\n\t\t\tbCoordFract: {\n\t\t\t\tbuffer: regl.prop('positionFractBuffer'),\n\t\t\t\tstride: 8,\n\t\t\t\toffset: 16,\n\t\t\t\tdivisor: 1\n\t\t\t},\n\t\t\tcolor: {\n\t\t\t\tbuffer: regl.prop('colorBuffer'),\n\t\t\t\tstride: 4,\n\t\t\t\toffset: 0,\n\t\t\t\tdivisor: 1\n\t\t\t}\n\t\t}\n\t}, shaderOptions))\n\n\t// create regl draw\n\tlet drawMiterLine\n\n\ttry {\n\t\tdrawMiterLine = regl(extend({\n\t\t\t// culling removes polygon creasing\n\t\t\tcull: {\n\t\t\t\tenable: true,\n\t\t\t\tface: 'back'\n\t\t\t},\n\n\t\t\tvert: glslify('./miter-vert.glsl'),\n\t\t\tfrag: glslify('./miter-frag.glsl'),\n\n\t\t\tattributes: {\n\t\t\t\t// is line end\n\t\t\t\tlineEnd: {\n\t\t\t\t\tbuffer: offsetBuffer,\n\t\t\t\t\tdivisor: 0,\n\t\t\t\t\tstride: 8,\n\t\t\t\t\toffset: 0\n\t\t\t\t},\n\t\t\t\t// is line top\n\t\t\t\tlineTop: {\n\t\t\t\t\tbuffer: offsetBuffer,\n\t\t\t\t\tdivisor: 0,\n\t\t\t\t\tstride: 8,\n\t\t\t\t\toffset: 4\n\t\t\t\t},\n\t\t\t\t// left color\n\t\t\t\taColor: {\n\t\t\t\t\tbuffer: regl.prop('colorBuffer'),\n\t\t\t\t\tstride: 4,\n\t\t\t\t\toffset: 0,\n\t\t\t\t\tdivisor: 1\n\t\t\t\t},\n\t\t\t\t// right color\n\t\t\t\tbColor: {\n\t\t\t\t\tbuffer: regl.prop('colorBuffer'),\n\t\t\t\t\tstride: 4,\n\t\t\t\t\toffset: 4,\n\t\t\t\t\tdivisor: 1\n\t\t\t\t},\n\t\t\t\tprevCoord: {\n\t\t\t\t\tbuffer: regl.prop('positionBuffer'),\n\t\t\t\t\tstride: 8,\n\t\t\t\t\toffset: 0,\n\t\t\t\t\tdivisor: 1\n\t\t\t\t},\n\t\t\t\taCoord: {\n\t\t\t\t\tbuffer: regl.prop('positionBuffer'),\n\t\t\t\t\tstride: 8,\n\t\t\t\t\toffset: 8,\n\t\t\t\t\tdivisor: 1\n\t\t\t\t},\n\t\t\t\tbCoord: {\n\t\t\t\t\tbuffer: regl.prop('positionBuffer'),\n\t\t\t\t\tstride: 8,\n\t\t\t\t\toffset: 16,\n\t\t\t\t\tdivisor: 1\n\t\t\t\t},\n\t\t\t\tnextCoord: {\n\t\t\t\t\tbuffer: regl.prop('positionBuffer'),\n\t\t\t\t\tstride: 8,\n\t\t\t\t\toffset: 24,\n\t\t\t\t\tdivisor: 1\n\t\t\t\t}\n\t\t\t}\n\t\t}, shaderOptions))\n\t} catch (e) {\n\t\t// IE/bad Webkit fallback\n\t\tdrawMiterLine = drawRectLine\n\t}\n\n\t// fill shader\n\tlet drawFill = regl({\n\t\tprimitive: 'triangle',\n\t\telements: (ctx, prop) => prop.triangles,\n\t\toffset: 0,\n\n\t\tvert: glslify('./fill-vert.glsl'),\n\t\tfrag: glslify('./fill-frag.glsl'),\n\n\t\tuniforms: {\n\t\t\tscale: regl.prop('scale'),\n\t\t\tcolor: regl.prop('fill'),\n\t\t\tscaleFract: regl.prop('scaleFract'),\n\t\t\ttranslateFract: regl.prop('translateFract'),\n\t\t\ttranslate: regl.prop('translate'),\n\t\t\topacity: regl.prop('opacity'),\n\t\t\tpixelRatio: regl.context('pixelRatio'),\n\t\t\tid: regl.prop('id'),\n\t\t\tviewport: (ctx, prop) => [prop.viewport.x, prop.viewport.y, ctx.viewportWidth, ctx.viewportHeight]\n\t\t},\n\n\t\tattributes: {\n\t\t\tposition: {\n\t\t\t\tbuffer: regl.prop('positionBuffer'),\n\t\t\t\tstride: 8,\n\t\t\t\toffset: 8\n\t\t\t},\n\t\t\tpositionFract: {\n\t\t\t\tbuffer: regl.prop('positionFractBuffer'),\n\t\t\t\tstride: 8,\n\t\t\t\toffset: 8\n\t\t\t}\n\t\t},\n\n\t\tblend: shaderOptions.blend,\n\n\t\tdepth: { enable: false },\n\t\tscissor: shaderOptions.scissor,\n\t\tstencil: shaderOptions.stencil,\n\t\tviewport: shaderOptions.viewport\n\t})\n\n\treturn {\n\t\tfill: drawFill, rect: drawRectLine, miter: drawMiterLine\n\t}\n}\n\n\n// used to for new lines instances\nLine2D.defaults = {\n\tdashes: null,\n\tjoin: 'miter',\n\tmiterLimit: 1,\n\tthickness: 10,\n\tcap: 'square',\n\tcolor: 'black',\n\topacity: 1,\n\toverlay: false,\n\tviewport: null,\n\trange: null,\n\tclose: false,\n\tfill: null\n}\n\n\nLine2D.prototype.render = function (...args) {\n\tif (args.length) {\n\t\tthis.update(...args)\n\t}\n\n\tthis.draw()\n}\n\n\nLine2D.prototype.draw = function (...args) {\n\t// render multiple polylines via regl batch\n\t(args.length ? args : this.passes).forEach((s, i) => {\n\t\t// render array pass as a list of passes\n\t\tif (s && Array.isArray(s)) return this.draw(...s)\n\n\t\tif (typeof s === 'number') s = this.passes[s]\n\n\t\tif (!(s && s.count > 1 && s.opacity)) return\n\n\t\tthis.regl._refresh()\n\n\t\tif (s.fill && s.triangles && s.triangles.length > 2) {\n\t\t\tthis.shaders.fill(s)\n\t\t}\n\n\t\tif (!s.thickness) return\n\n\t\t// high scale is only available for rect mode with precision\n\t\tif (s.scale[0] * s.viewport.width > Line2D.precisionThreshold || s.scale[1] * s.viewport.height > Line2D.precisionThreshold) {\n\t\t\tthis.shaders.rect(s)\n\t\t}\n\n\t\t// thin this.passes or too many points are rendered as simplified rect shader\n\t\telse if (s.join === 'rect' || (!s.join && (s.thickness <= 2 || s.count >= Line2D.maxPoints))) {\n\t\t\tthis.shaders.rect(s)\n\t\t}\n\t\telse {\n\t\t\tthis.shaders.miter(s)\n\t\t}\n\t})\n\n\treturn this\n}\n\nLine2D.prototype.update = function (options) {\n\tif (!options) return\n\n\tif (options.length != null) {\n\t\tif (typeof options[0] === 'number') options = [{positions: options}]\n\t}\n\n\t// make options a batch\n\telse if (!Array.isArray(options)) options = [options]\n\n\tlet { regl, gl } = this\n\n\t// process per-line settings\n\toptions.forEach((o, i) => {\n\t\tlet state = this.passes[i]\n\n\t\tif (o === undefined) return\n\n\t\t// null-argument removes pass\n\t\tif (o === null) {\n\t\t\tthis.passes[i] = null\n\t\t\treturn\n\t\t}\n\n\t\tif (typeof o[0] === 'number') o = {positions: o}\n\n\t\t// handle aliases\n\t\to = pick(o, {\n\t\t\tpositions: 'positions points data coords',\n\t\t\tthickness: 'thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth',\n\t\t\tjoin: 'lineJoin linejoin join type mode',\n\t\t\tmiterLimit: 'miterlimit miterLimit',\n\t\t\tdashes: 'dash dashes dasharray dash-array dashArray',\n\t\t\tcolor: 'color colour stroke colors colours stroke-color strokeColor',\n\t\t\tfill: 'fill fill-color fillColor',\n\t\t\topacity: 'alpha opacity',\n\t\t\toverlay: 'overlay crease overlap intersect',\n\t\t\tclose: 'closed close closed-path closePath',\n\t\t\trange: 'range dataBox',\n\t\t\tviewport: 'viewport viewBox',\n\t\t\thole: 'holes hole hollow'\n\t\t})\n\n\t\t// init state\n\t\tif (!state) {\n\t\t\tthis.passes[i] = state = {\n\t\t\t\tid: i,\n\t\t\t\tscale: null,\n\t\t\t\tscaleFract: null,\n\t\t\t\ttranslate: null,\n\t\t\t\ttranslateFract: null,\n\t\t\t\tcount: 0,\n\t\t\t\thole: [],\n\t\t\t\tdepth: 0,\n\n\t\t\t\tdashLength: 1,\n\t\t\t\tdashTexture: regl.texture({\n\t\t\t\t\tchannels: 1,\n\t\t\t\t\tdata: new Uint8Array([255]),\n\t\t\t\t\twidth: 1,\n\t\t\t\t\theight: 1,\n\t\t\t\t\tmag: 'linear',\n\t\t\t\t\tmin: 'linear'\n\t\t\t\t}),\n\n\t\t\t\tcolorBuffer: regl.buffer({\n\t\t\t\t\tusage: 'dynamic',\n\t\t\t\t\ttype: 'uint8',\n\t\t\t\t\tdata: new Uint8Array()\n\t\t\t\t}),\n\t\t\t\tpositionBuffer: regl.buffer({\n\t\t\t\t\tusage: 'dynamic',\n\t\t\t\t\ttype: 'float',\n\t\t\t\t\tdata: new Uint8Array()\n\t\t\t\t}),\n\t\t\t\tpositionFractBuffer: regl.buffer({\n\t\t\t\t\tusage: 'dynamic',\n\t\t\t\t\ttype: 'float',\n\t\t\t\t\tdata: new Uint8Array()\n\t\t\t\t})\n\t\t\t}\n\n\t\t\to = extend({}, Line2D.defaults, o)\n\t\t}\n\t\tif (o.thickness != null) state.thickness = parseFloat(o.thickness)\n\t\tif (o.opacity != null) state.opacity = parseFloat(o.opacity)\n\t\tif (o.miterLimit != null) state.miterLimit = parseFloat(o.miterLimit)\n\t\tif (o.overlay != null) {\n\t\t\tstate.overlay = !!o.overlay\n\t\t\tif (i < Line2D.maxLines) {\n\t\t\t\tstate.depth = 2 * (Line2D.maxLines - 1 - i % Line2D.maxLines) / Line2D.maxLines - 1.;\n\t\t\t}\n\t\t}\n\t\tif (o.join != null) state.join = o.join\n\t\tif (o.hole != null) state.hole = o.hole\n\t\tif (o.fill != null) state.fill = !o.fill ? null : rgba(o.fill, 'uint8')\n\t\tif (o.viewport != null) state.viewport = parseRect(o.viewport)\n\n\t\tif (!state.viewport) {\n\t\t\tstate.viewport = parseRect([\n\t\t\t\tgl.drawingBufferWidth,\n\t\t\t\tgl.drawingBufferHeight\n\t\t\t])\n\t\t}\n\n\t\tif (o.close != null) state.close = o.close\n\n\t\t// reset positions\n\t\tif (o.positions === null) o.positions = []\n\t\tif (o.positions) {\n\t\t\tlet positions, count\n\n\t\t\t// if positions are an object with x/y\n\t\t\tif (o.positions.x && o.positions.y) {\n\t\t\t\tlet xPos = o.positions.x\n\t\t\t\tlet yPos = o.positions.y\n\t\t\t\tcount = state.count = Math.max(\n\t\t\t\t\txPos.length,\n\t\t\t\t\tyPos.length\n\t\t\t\t)\n\t\t\t\tpositions = new Float64Array(count * 2)\n\t\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\t\tpositions[i * 2] = xPos[i]\n\t\t\t\t\tpositions[i * 2 + 1] = yPos[i]\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpositions = flatten(o.positions, 'float64')\n\t\t\t\tcount = state.count = Math.floor(positions.length / 2)\n\t\t\t}\n\n\t\t\tlet bounds = state.bounds = getBounds(positions, 2)\n\n\t\t\t// create fill positions\n\t\t\t// FIXME: fill positions can be set only along with positions\n\t\t\tif (state.fill) {\n\t\t\t\tlet pos = []\n\n\t\t\t\t// filter bad vertices and remap triangles to ensure shape\n\t\t\t\tlet ids = {}\n\t\t\t\tlet lastId = 0\n\n\t\t\t\tfor (let i = 0, ptr = 0, l = state.count; i < l; i++) {\n\t\t\t\t\tlet x = positions[i*2]\n\t\t\t\t\tlet y = positions[i*2 + 1]\n\t\t\t\t\tif (isNaN(x) || isNaN(y) || x == null || y == null) {\n\t\t\t\t\t\tx = positions[lastId*2]\n\t\t\t\t\t\ty = positions[lastId*2 + 1]\n\t\t\t\t\t\tids[i] = lastId\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tlastId = i\n\t\t\t\t\t}\n\t\t\t\t\tpos[ptr++] = x\n\t\t\t\t\tpos[ptr++] = y\n\t\t\t\t}\n\n\t\t\t\tlet triangles = triangulate(pos, state.hole || [])\n\n\t\t\t\tfor (let i = 0, l = triangles.length; i < l; i++) {\n\t\t\t\t\tif (ids[triangles[i]] != null) triangles[i] = ids[triangles[i]]\n\t\t\t\t}\n\n\t\t\t\tstate.triangles = triangles\n\t\t\t}\n\n\t\t\t// update position buffers\n\t\t\tlet npos = new Float64Array(positions)\n\t\t\tnormalize(npos, 2, bounds)\n\n\t\t\tlet positionData = new Float64Array(count * 2 + 6)\n\n\t\t\t// rotate first segment join\n\t\t\tif (state.close) {\n\t\t\t\tif (positions[0] === positions[count*2 - 2] &&\n\t\t\t\t\tpositions[1] === positions[count*2 - 1]) {\n\t\t\t\t\tpositionData[0] = npos[count*2 - 4]\n\t\t\t\t\tpositionData[1] = npos[count*2 - 3]\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tpositionData[0] = npos[count*2 - 2]\n\t\t\t\t\tpositionData[1] = npos[count*2 - 1]\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpositionData[0] = npos[0]\n\t\t\t\tpositionData[1] = npos[1]\n\t\t\t}\n\n\t\t\tpositionData.set(npos, 2)\n\n\t\t\t// add last segment\n\t\t\tif (state.close) {\n\t\t\t\t// ignore coinciding start/end\n\t\t\t\tif (positions[0] === positions[count*2 - 2] &&\n\t\t\t\t\tpositions[1] === positions[count*2 - 1]) {\n\t\t\t\t\tpositionData[count*2 + 2] = npos[2]\n\t\t\t\t\tpositionData[count*2 + 3] = npos[3]\n\t\t\t\t\tstate.count -= 1\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tpositionData[count*2 + 2] = npos[0]\n\t\t\t\t\tpositionData[count*2 + 3] = npos[1]\n\t\t\t\t\tpositionData[count*2 + 4] = npos[2]\n\t\t\t\t\tpositionData[count*2 + 5] = npos[3]\n\t\t\t\t}\n\t\t\t}\n\t\t\t// add stub\n\t\t\telse {\n\t\t\t\tpositionData[count*2 + 2] = npos[count*2 - 2]\n\t\t\t\tpositionData[count*2 + 3] = npos[count*2 - 1]\n\t\t\t\tpositionData[count*2 + 4] = npos[count*2 - 2]\n\t\t\t\tpositionData[count*2 + 5] = npos[count*2 - 1]\n\t\t\t}\n\n\t\t\tstate.positionBuffer(float32(positionData))\n\t\t\tstate.positionFractBuffer(fract32(positionData))\n\t\t}\n\n\t\tif (o.range) {\n\t\t\tstate.range = o.range\n\t\t} else if (!state.range) {\n\t\t\tstate.range = state.bounds\n\t\t}\n\n\t\tif ((o.range || o.positions) && state.count) {\n\t\t\tlet bounds = state.bounds\n\n\t\t\tlet boundsW = bounds[2] - bounds[0],\n\t\t\t\tboundsH = bounds[3] - bounds[1]\n\n\t\t\tlet rangeW = state.range[2] - state.range[0],\n\t\t\t\trangeH = state.range[3] - state.range[1]\n\n\t\t\tstate.scale = [\n\t\t\t\tboundsW / rangeW,\n\t\t\t\tboundsH / rangeH\n\t\t\t]\n\t\t\tstate.translate = [\n\t\t\t\t-state.range[0] / rangeW + bounds[0] / rangeW || 0,\n\t\t\t\t-state.range[1] / rangeH + bounds[1] / rangeH || 0\n\t\t\t]\n\n\t\t\tstate.scaleFract = fract32(state.scale)\n\t\t\tstate.translateFract = fract32(state.translate)\n\t\t}\n\n\t\tif (o.dashes) {\n\t\t\tlet dashLength = 0., dashData\n\n\t\t\tif (!o.dashes || o.dashes.length < 2) {\n\t\t\t\tdashLength = 1.\n\t\t\t\tdashData = new Uint8Array([255, 255, 255, 255, 255, 255, 255, 255])\n\t\t\t}\n\n\t\t\telse {\n\t\t\t\tdashLength = 0.;\n\t\t\t\tfor(let i = 0; i < o.dashes.length; ++i) {\n\t\t\t\t\tdashLength += o.dashes[i]\n\t\t\t\t}\n\t\t\t\tdashData = new Uint8Array(dashLength * Line2D.dashMult)\n\t\t\t\tlet ptr = 0\n\t\t\t\tlet fillColor = 255\n\n\t\t\t\t// repeat texture two times to provide smooth 0-step\n\t\t\t\tfor (let k = 0; k < 2; k++) {\n\t\t\t\t\tfor(let i = 0; i < o.dashes.length; ++i) {\n\t\t\t\t\t\tfor(let j = 0, l = o.dashes[i] * Line2D.dashMult * .5; j < l; ++j) {\n\t\t\t\t\t\t\tdashData[ptr++] = fillColor\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfillColor ^= 255\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tstate.dashLength = dashLength\n\t\t\tstate.dashTexture({\n\t\t\t\tchannels: 1,\n\t\t\t\tdata: dashData,\n\t\t\t\twidth: dashData.length,\n\t\t\t\theight: 1,\n\t\t\t\tmag: 'linear',\n\t\t\t\tmin: 'linear'\n\t\t\t}, 0, 0)\n\t\t}\n\n\t\tif (o.color) {\n\t\t\tlet count = state.count\n\t\t\tlet colors = o.color\n\n\t\t\tif (!colors) colors = 'transparent'\n\n\t\t\tlet colorData = new Uint8Array(count * 4 + 4)\n\n\t\t\t// convert colors to typed arrays\n\t\t\tif (!Array.isArray(colors) || typeof colors[0] === 'number') {\n\t\t\t\tlet c = rgba(colors, 'uint8')\n\n\t\t\t\tfor (let i = 0; i < count + 1; i++) {\n\t\t\t\t\tcolorData.set(c, i * 4)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\t\tlet c = rgba(colors[i], 'uint8')\n\t\t\t\t\tcolorData.set(c, i * 4)\n\t\t\t\t}\n\t\t\t\tcolorData.set(rgba(colors[0], 'uint8'), count * 4)\n\t\t\t}\n\n\t\t\tstate.colorBuffer({\n\t\t\t\tusage: 'dynamic',\n\t\t\t\ttype: 'uint8',\n\t\t\t\tdata: colorData\n\t\t\t})\n\t\t}\n\t})\n\n\t// remove unmentioned passes\n\tif (options.length < this.passes.length) {\n\t\tfor (let i = options.length; i < this.passes.length; i++) {\n\t\t\tlet pass = this.passes[i]\n\t\t\tif (!pass) continue\n\t\t\tpass.colorBuffer.destroy()\n\t\t\tpass.positionBuffer.destroy()\n\t\t\tpass.dashTexture.destroy()\n\t\t}\n\t\tthis.passes.length = options.length\n\t}\n\n\t// remove null items\n\tlet passes = []\n\tfor (let i = 0; i < this.passes.length; i++) {\n\t\tif (this.passes[i] !== null) passes.push(this.passes[i])\n\t}\n\tthis.passes = passes\n\n\treturn this\n}\n\nLine2D.prototype.destroy = function () {\n\tthis.passes.forEach(pass => {\n\t\tpass.colorBuffer.destroy()\n\t\tpass.positionBuffer.destroy()\n\t\tpass.dashTexture.destroy()\n\t})\n\n\tthis.passes.length = 0\n\n\treturn this\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}