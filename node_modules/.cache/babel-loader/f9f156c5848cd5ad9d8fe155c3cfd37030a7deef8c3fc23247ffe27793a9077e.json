{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar Lib = require('../../lib');\nvar Axes = require('../../plots/cartesian/axes');\nvar boxHoverPoints = require('../box/hover');\nvar helpers = require('./helpers');\nmodule.exports = function hoverPoints(pointData, xval, yval, hovermode, hoverLayer) {\n  var cd = pointData.cd;\n  var trace = cd[0].trace;\n  var hoveron = trace.hoveron;\n  var hasHoveronViolins = hoveron.indexOf('violins') !== -1;\n  var hasHoveronKDE = hoveron.indexOf('kde') !== -1;\n  var closeData = [];\n  var closePtData;\n  var violinLineAttrs;\n  if (hasHoveronViolins || hasHoveronKDE) {\n    var closeBoxData = boxHoverPoints.hoverOnBoxes(pointData, xval, yval, hovermode);\n    if (hasHoveronViolins) {\n      closeData = closeData.concat(closeBoxData);\n    }\n    if (hasHoveronKDE && closeBoxData.length > 0) {\n      var xa = pointData.xa;\n      var ya = pointData.ya;\n      var pLetter, vLetter, pAxis, vAxis, vVal;\n      if (trace.orientation === 'h') {\n        vVal = xval;\n        pLetter = 'y';\n        pAxis = ya;\n        vLetter = 'x';\n        vAxis = xa;\n      } else {\n        vVal = yval;\n        pLetter = 'x';\n        pAxis = xa;\n        vLetter = 'y';\n        vAxis = ya;\n      }\n      var di = cd[pointData.index];\n      if (vVal >= di.span[0] && vVal <= di.span[1]) {\n        var kdePointData = Lib.extendFlat({}, pointData);\n        var vValPx = vAxis.c2p(vVal, true);\n        var kdeVal = helpers.getKdeValue(di, trace, vVal);\n        var pOnPath = helpers.getPositionOnKdePath(di, trace, vValPx);\n        var paOffset = pAxis._offset;\n        var paLength = pAxis._length;\n        kdePointData[pLetter + '0'] = pOnPath[0];\n        kdePointData[pLetter + '1'] = pOnPath[1];\n        kdePointData[vLetter + '0'] = kdePointData[vLetter + '1'] = vValPx;\n        kdePointData[vLetter + 'Label'] = vLetter + ': ' + Axes.hoverLabelText(vAxis, vVal) + ', ' + cd[0].t.labels.kde + ' ' + kdeVal.toFixed(3);\n\n        // move the spike to the KDE point\n        kdePointData.spikeDistance = closeBoxData[0].spikeDistance;\n        var spikePosAttr = pLetter + 'Spike';\n        kdePointData[spikePosAttr] = closeBoxData[0][spikePosAttr];\n        closeBoxData[0].spikeDistance = undefined;\n        closeBoxData[0][spikePosAttr] = undefined;\n        closeData.push(kdePointData);\n        violinLineAttrs = {\n          stroke: pointData.color\n        };\n        violinLineAttrs[pLetter + '1'] = Lib.constrain(paOffset + pOnPath[0], paOffset, paOffset + paLength);\n        violinLineAttrs[pLetter + '2'] = Lib.constrain(paOffset + pOnPath[1], paOffset, paOffset + paLength);\n        violinLineAttrs[vLetter + '1'] = violinLineAttrs[vLetter + '2'] = vAxis._offset + vValPx;\n      }\n    }\n  }\n  if (hoveron.indexOf('points') !== -1) {\n    closePtData = boxHoverPoints.hoverOnPoints(pointData, xval, yval);\n  }\n\n  // update violin line (if any)\n  var violinLine = hoverLayer.selectAll('.violinline-' + trace.uid).data(violinLineAttrs ? [0] : []);\n  violinLine.enter().append('line').classed('violinline-' + trace.uid, true).attr('stroke-width', 1.5);\n  violinLine.exit().remove();\n  violinLine.attr(violinLineAttrs);\n\n  // same combine logic as box hoverPoints\n  if (hovermode === 'closest') {\n    if (closePtData) return [closePtData];\n    return closeData;\n  }\n  if (closePtData) {\n    closeData.push(closePtData);\n    return closeData;\n  }\n  return closeData;\n};","map":{"version":3,"names":["Lib","require","Axes","boxHoverPoints","helpers","module","exports","hoverPoints","pointData","xval","yval","hovermode","hoverLayer","cd","trace","hoveron","hasHoveronViolins","indexOf","hasHoveronKDE","closeData","closePtData","violinLineAttrs","closeBoxData","hoverOnBoxes","concat","length","xa","ya","pLetter","vLetter","pAxis","vAxis","vVal","orientation","di","index","span","kdePointData","extendFlat","vValPx","c2p","kdeVal","getKdeValue","pOnPath","getPositionOnKdePath","paOffset","_offset","paLength","_length","hoverLabelText","t","labels","kde","toFixed","spikeDistance","spikePosAttr","undefined","push","stroke","color","constrain","hoverOnPoints","violinLine","selectAll","uid","data","enter","append","classed","attr","exit","remove"],"sources":["/home/yasmin/Ãrea de Trabalho/Frontend/node_modules/plotly.js/src/traces/violin/hover.js"],"sourcesContent":["/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar Lib = require('../../lib');\nvar Axes = require('../../plots/cartesian/axes');\nvar boxHoverPoints = require('../box/hover');\nvar helpers = require('./helpers');\n\nmodule.exports = function hoverPoints(pointData, xval, yval, hovermode, hoverLayer) {\n    var cd = pointData.cd;\n    var trace = cd[0].trace;\n    var hoveron = trace.hoveron;\n    var hasHoveronViolins = hoveron.indexOf('violins') !== -1;\n    var hasHoveronKDE = hoveron.indexOf('kde') !== -1;\n    var closeData = [];\n    var closePtData;\n    var violinLineAttrs;\n\n    if(hasHoveronViolins || hasHoveronKDE) {\n        var closeBoxData = boxHoverPoints.hoverOnBoxes(pointData, xval, yval, hovermode);\n\n        if(hasHoveronViolins) {\n            closeData = closeData.concat(closeBoxData);\n        }\n\n        if(hasHoveronKDE && closeBoxData.length > 0) {\n            var xa = pointData.xa;\n            var ya = pointData.ya;\n            var pLetter, vLetter, pAxis, vAxis, vVal;\n\n            if(trace.orientation === 'h') {\n                vVal = xval;\n                pLetter = 'y';\n                pAxis = ya;\n                vLetter = 'x';\n                vAxis = xa;\n            } else {\n                vVal = yval;\n                pLetter = 'x';\n                pAxis = xa;\n                vLetter = 'y';\n                vAxis = ya;\n            }\n\n            var di = cd[pointData.index];\n\n            if(vVal >= di.span[0] && vVal <= di.span[1]) {\n                var kdePointData = Lib.extendFlat({}, pointData);\n                var vValPx = vAxis.c2p(vVal, true);\n                var kdeVal = helpers.getKdeValue(di, trace, vVal);\n                var pOnPath = helpers.getPositionOnKdePath(di, trace, vValPx);\n                var paOffset = pAxis._offset;\n                var paLength = pAxis._length;\n\n                kdePointData[pLetter + '0'] = pOnPath[0];\n                kdePointData[pLetter + '1'] = pOnPath[1];\n                kdePointData[vLetter + '0'] = kdePointData[vLetter + '1'] = vValPx;\n                kdePointData[vLetter + 'Label'] = vLetter + ': ' + Axes.hoverLabelText(vAxis, vVal) + ', ' + cd[0].t.labels.kde + ' ' + kdeVal.toFixed(3);\n\n                // move the spike to the KDE point\n                kdePointData.spikeDistance = closeBoxData[0].spikeDistance;\n                var spikePosAttr = pLetter + 'Spike';\n                kdePointData[spikePosAttr] = closeBoxData[0][spikePosAttr];\n                closeBoxData[0].spikeDistance = undefined;\n                closeBoxData[0][spikePosAttr] = undefined;\n\n                closeData.push(kdePointData);\n\n                violinLineAttrs = {stroke: pointData.color};\n                violinLineAttrs[pLetter + '1'] = Lib.constrain(paOffset + pOnPath[0], paOffset, paOffset + paLength);\n                violinLineAttrs[pLetter + '2'] = Lib.constrain(paOffset + pOnPath[1], paOffset, paOffset + paLength);\n                violinLineAttrs[vLetter + '1'] = violinLineAttrs[vLetter + '2'] = vAxis._offset + vValPx;\n            }\n        }\n    }\n\n    if(hoveron.indexOf('points') !== -1) {\n        closePtData = boxHoverPoints.hoverOnPoints(pointData, xval, yval);\n    }\n\n    // update violin line (if any)\n    var violinLine = hoverLayer.selectAll('.violinline-' + trace.uid)\n        .data(violinLineAttrs ? [0] : []);\n    violinLine.enter().append('line')\n        .classed('violinline-' + trace.uid, true)\n        .attr('stroke-width', 1.5);\n    violinLine.exit().remove();\n    violinLine.attr(violinLineAttrs);\n\n    // same combine logic as box hoverPoints\n    if(hovermode === 'closest') {\n        if(closePtData) return [closePtData];\n        return closeData;\n    }\n    if(closePtData) {\n        closeData.push(closePtData);\n        return closeData;\n    }\n    return closeData;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}