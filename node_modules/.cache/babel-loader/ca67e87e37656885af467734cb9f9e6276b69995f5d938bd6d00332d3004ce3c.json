{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar conePlot = require('gl-cone3d');\nvar createConeMesh = require('gl-cone3d').createConeMesh;\nvar simpleMap = require('../../lib').simpleMap;\nvar parseColorScale = require('../../lib/gl_format_color').parseColorScale;\nvar zip3 = require('../../plots/gl3d/zip3');\nfunction Cone(scene, uid) {\n  this.scene = scene;\n  this.uid = uid;\n  this.mesh = null;\n  this.data = null;\n}\nvar proto = Cone.prototype;\nproto.handlePick = function (selection) {\n  if (selection.object === this.mesh) {\n    var selectIndex = selection.index = selection.data.index;\n    var xx = this.data.x[selectIndex];\n    var yy = this.data.y[selectIndex];\n    var zz = this.data.z[selectIndex];\n    var uu = this.data.u[selectIndex];\n    var vv = this.data.v[selectIndex];\n    var ww = this.data.w[selectIndex];\n    selection.traceCoordinate = [xx, yy, zz, uu, vv, ww, Math.sqrt(uu * uu + vv * vv + ww * ww)];\n    var text = this.data.text;\n    if (Array.isArray(text) && text[selectIndex] !== undefined) {\n      selection.textLabel = text[selectIndex];\n    } else if (text) {\n      selection.textLabel = text;\n    }\n    return true;\n  }\n};\nvar axisName2scaleIndex = {\n  xaxis: 0,\n  yaxis: 1,\n  zaxis: 2\n};\nvar anchor2coneOffset = {\n  tip: 1,\n  tail: 0,\n  cm: 0.25,\n  center: 0.5\n};\nvar anchor2coneSpan = {\n  tip: 1,\n  tail: 1,\n  cm: 0.75,\n  center: 0.5\n};\nfunction convert(scene, trace) {\n  var sceneLayout = scene.fullSceneLayout;\n  var dataScale = scene.dataScale;\n  var coneOpts = {};\n  function toDataCoords(arr, axisName) {\n    var ax = sceneLayout[axisName];\n    var scale = dataScale[axisName2scaleIndex[axisName]];\n    return simpleMap(arr, function (v) {\n      return ax.d2l(v) * scale;\n    });\n  }\n  coneOpts.vectors = zip3(toDataCoords(trace.u, 'xaxis'), toDataCoords(trace.v, 'yaxis'), toDataCoords(trace.w, 'zaxis'), trace._len);\n  coneOpts.positions = zip3(toDataCoords(trace.x, 'xaxis'), toDataCoords(trace.y, 'yaxis'), toDataCoords(trace.z, 'zaxis'), trace._len);\n  coneOpts.colormap = parseColorScale(trace);\n  coneOpts.vertexIntensityBounds = [trace.cmin / trace._normMax, trace.cmax / trace._normMax];\n  coneOpts.coneOffset = anchor2coneOffset[trace.anchor];\n  if (trace.sizemode === 'scaled') {\n    // unitless sizeref\n    coneOpts.coneSize = trace.sizeref || 0.5;\n  } else {\n    // sizeref here has unit of velocity\n    coneOpts.coneSize = trace.sizeref && trace._normMax ? trace.sizeref / trace._normMax : 0.5;\n  }\n  var meshData = conePlot(coneOpts);\n\n  // pass gl-mesh3d lighting attributes\n  var lp = trace.lightposition;\n  meshData.lightPosition = [lp.x, lp.y, lp.z];\n  meshData.ambient = trace.lighting.ambient;\n  meshData.diffuse = trace.lighting.diffuse;\n  meshData.specular = trace.lighting.specular;\n  meshData.roughness = trace.lighting.roughness;\n  meshData.fresnel = trace.lighting.fresnel;\n  meshData.opacity = trace.opacity;\n\n  // stash autorange pad value\n  trace._pad = anchor2coneSpan[trace.anchor] * meshData.vectorScale * meshData.coneScale * trace._normMax;\n  return meshData;\n}\nproto.update = function (data) {\n  this.data = data;\n  var meshData = convert(this.scene, data);\n  this.mesh.update(meshData);\n};\nproto.dispose = function () {\n  this.scene.glplot.remove(this.mesh);\n  this.mesh.dispose();\n};\nfunction createConeTrace(scene, data) {\n  var gl = scene.glplot.gl;\n  var meshData = convert(scene, data);\n  var mesh = createConeMesh(gl, meshData);\n  var cone = new Cone(scene, data.uid);\n  cone.mesh = mesh;\n  cone.data = data;\n  mesh._trace = cone;\n  scene.glplot.add(mesh);\n  return cone;\n}\nmodule.exports = createConeTrace;","map":{"version":3,"names":["conePlot","require","createConeMesh","simpleMap","parseColorScale","zip3","Cone","scene","uid","mesh","data","proto","prototype","handlePick","selection","object","selectIndex","index","xx","x","yy","y","zz","z","uu","u","vv","v","ww","w","traceCoordinate","Math","sqrt","text","Array","isArray","undefined","textLabel","axisName2scaleIndex","xaxis","yaxis","zaxis","anchor2coneOffset","tip","tail","cm","center","anchor2coneSpan","convert","trace","sceneLayout","fullSceneLayout","dataScale","coneOpts","toDataCoords","arr","axisName","ax","scale","d2l","vectors","_len","positions","colormap","vertexIntensityBounds","cmin","_normMax","cmax","coneOffset","anchor","sizemode","coneSize","sizeref","meshData","lp","lightposition","lightPosition","ambient","lighting","diffuse","specular","roughness","fresnel","opacity","_pad","vectorScale","coneScale","update","dispose","glplot","remove","createConeTrace","gl","cone","_trace","add","module","exports"],"sources":["/home/yasmin/√Årea de Trabalho/Frontend/node_modules/plotly.js/src/traces/cone/convert.js"],"sourcesContent":["/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar conePlot = require('gl-cone3d');\nvar createConeMesh = require('gl-cone3d').createConeMesh;\n\nvar simpleMap = require('../../lib').simpleMap;\nvar parseColorScale = require('../../lib/gl_format_color').parseColorScale;\nvar zip3 = require('../../plots/gl3d/zip3');\n\nfunction Cone(scene, uid) {\n    this.scene = scene;\n    this.uid = uid;\n    this.mesh = null;\n    this.data = null;\n}\n\nvar proto = Cone.prototype;\n\nproto.handlePick = function(selection) {\n    if(selection.object === this.mesh) {\n        var selectIndex = selection.index = selection.data.index;\n        var xx = this.data.x[selectIndex];\n        var yy = this.data.y[selectIndex];\n        var zz = this.data.z[selectIndex];\n        var uu = this.data.u[selectIndex];\n        var vv = this.data.v[selectIndex];\n        var ww = this.data.w[selectIndex];\n\n        selection.traceCoordinate = [\n            xx, yy, zz,\n            uu, vv, ww,\n            Math.sqrt(uu * uu + vv * vv + ww * ww)\n        ];\n\n        var text = this.data.text;\n        if(Array.isArray(text) && text[selectIndex] !== undefined) {\n            selection.textLabel = text[selectIndex];\n        } else if(text) {\n            selection.textLabel = text;\n        }\n\n        return true;\n    }\n};\n\nvar axisName2scaleIndex = {xaxis: 0, yaxis: 1, zaxis: 2};\nvar anchor2coneOffset = {tip: 1, tail: 0, cm: 0.25, center: 0.5};\nvar anchor2coneSpan = {tip: 1, tail: 1, cm: 0.75, center: 0.5};\n\nfunction convert(scene, trace) {\n    var sceneLayout = scene.fullSceneLayout;\n    var dataScale = scene.dataScale;\n    var coneOpts = {};\n\n    function toDataCoords(arr, axisName) {\n        var ax = sceneLayout[axisName];\n        var scale = dataScale[axisName2scaleIndex[axisName]];\n        return simpleMap(arr, function(v) { return ax.d2l(v) * scale; });\n    }\n\n    coneOpts.vectors = zip3(\n        toDataCoords(trace.u, 'xaxis'),\n        toDataCoords(trace.v, 'yaxis'),\n        toDataCoords(trace.w, 'zaxis'),\n        trace._len\n    );\n\n    coneOpts.positions = zip3(\n        toDataCoords(trace.x, 'xaxis'),\n        toDataCoords(trace.y, 'yaxis'),\n        toDataCoords(trace.z, 'zaxis'),\n        trace._len\n    );\n\n    coneOpts.colormap = parseColorScale(trace);\n    coneOpts.vertexIntensityBounds = [trace.cmin / trace._normMax, trace.cmax / trace._normMax];\n    coneOpts.coneOffset = anchor2coneOffset[trace.anchor];\n\n    if(trace.sizemode === 'scaled') {\n        // unitless sizeref\n        coneOpts.coneSize = trace.sizeref || 0.5;\n    } else {\n        // sizeref here has unit of velocity\n        coneOpts.coneSize = trace.sizeref && trace._normMax ?\n            trace.sizeref / trace._normMax :\n            0.5;\n    }\n\n    var meshData = conePlot(coneOpts);\n\n    // pass gl-mesh3d lighting attributes\n    var lp = trace.lightposition;\n    meshData.lightPosition = [lp.x, lp.y, lp.z];\n    meshData.ambient = trace.lighting.ambient;\n    meshData.diffuse = trace.lighting.diffuse;\n    meshData.specular = trace.lighting.specular;\n    meshData.roughness = trace.lighting.roughness;\n    meshData.fresnel = trace.lighting.fresnel;\n    meshData.opacity = trace.opacity;\n\n    // stash autorange pad value\n    trace._pad = anchor2coneSpan[trace.anchor] * meshData.vectorScale * meshData.coneScale * trace._normMax;\n\n    return meshData;\n}\n\nproto.update = function(data) {\n    this.data = data;\n\n    var meshData = convert(this.scene, data);\n    this.mesh.update(meshData);\n};\n\nproto.dispose = function() {\n    this.scene.glplot.remove(this.mesh);\n    this.mesh.dispose();\n};\n\nfunction createConeTrace(scene, data) {\n    var gl = scene.glplot.gl;\n\n    var meshData = convert(scene, data);\n    var mesh = createConeMesh(gl, meshData);\n\n    var cone = new Cone(scene, data.uid);\n    cone.mesh = mesh;\n    cone.data = data;\n    mesh._trace = cone;\n\n    scene.glplot.add(mesh);\n\n    return cone;\n}\n\nmodule.exports = createConeTrace;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}