{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar hasColorscale = require('../../components/colorscale/helpers').hasColorscale;\nvar colorscaleCalc = require('../../components/colorscale/calc');\nvar arraysToCalcdata = require('../bar/arrays_to_calcdata');\nvar setGroupPositions = require('../bar/cross_trace_calc').setGroupPositions;\nvar calcSelection = require('../scatter/calc_selection');\nvar traceIs = require('../../registry').traceIs;\nvar extendFlat = require('../../lib').extendFlat;\nfunction calc(gd, trace) {\n  var fullLayout = gd._fullLayout;\n  var subplotId = trace.subplot;\n  var radialAxis = fullLayout[subplotId].radialaxis;\n  var angularAxis = fullLayout[subplotId].angularaxis;\n  var rArray = radialAxis.makeCalcdata(trace, 'r');\n  var thetaArray = angularAxis.makeCalcdata(trace, 'theta');\n  var len = trace._length;\n  var cd = new Array(len);\n\n  // 'size' axis variables\n  var sArray = rArray;\n  // 'pos' axis variables\n  var pArray = thetaArray;\n  for (var i = 0; i < len; i++) {\n    cd[i] = {\n      p: pArray[i],\n      s: sArray[i]\n    };\n  }\n\n  // convert width and offset in 'c' coordinate,\n  // set 'c' value(s) in trace._width and trace._offset,\n  // to make Bar.crossTraceCalc \"just work\"\n  function d2c(attr) {\n    var val = trace[attr];\n    if (val !== undefined) {\n      trace['_' + attr] = Array.isArray(val) ? angularAxis.makeCalcdata(trace, attr) : angularAxis.d2c(val, trace.thetaunit);\n    }\n  }\n  if (angularAxis.type === 'linear') {\n    d2c('width');\n    d2c('offset');\n  }\n  if (hasColorscale(trace, 'marker')) {\n    colorscaleCalc(gd, trace, {\n      vals: trace.marker.color,\n      containerStr: 'marker',\n      cLetter: 'c'\n    });\n  }\n  if (hasColorscale(trace, 'marker.line')) {\n    colorscaleCalc(gd, trace, {\n      vals: trace.marker.line.color,\n      containerStr: 'marker.line',\n      cLetter: 'c'\n    });\n  }\n  arraysToCalcdata(cd, trace);\n  calcSelection(cd, trace);\n  return cd;\n}\nfunction crossTraceCalc(gd, polarLayout, subplotId) {\n  var calcdata = gd.calcdata;\n  var barPolarCd = [];\n  for (var i = 0; i < calcdata.length; i++) {\n    var cdi = calcdata[i];\n    var trace = cdi[0].trace;\n    if (trace.visible === true && traceIs(trace, 'bar') && trace.subplot === subplotId) {\n      barPolarCd.push(cdi);\n    }\n  }\n\n  // to make _extremes is filled in correctly so that\n  // polar._subplot.radialAxis can get auotrange'd\n  // TODO clean up!\n  // I think we want to call getAutorange on polar.radialaxis\n  // NOT on polar._subplot.radialAxis\n  var rAxis = extendFlat({}, polarLayout.radialaxis, {\n    _id: 'x'\n  });\n  var aAxis = polarLayout.angularaxis;\n\n  // 'bargap', 'barmode' are in _fullLayout.polar\n  // TODO clean up setGroupPositions API instead\n  var mockGd = {\n    _fullLayout: polarLayout\n  };\n  setGroupPositions(mockGd, aAxis, rAxis, barPolarCd);\n}\nmodule.exports = {\n  calc: calc,\n  crossTraceCalc: crossTraceCalc\n};","map":{"version":3,"names":["hasColorscale","require","colorscaleCalc","arraysToCalcdata","setGroupPositions","calcSelection","traceIs","extendFlat","calc","gd","trace","fullLayout","_fullLayout","subplotId","subplot","radialAxis","radialaxis","angularAxis","angularaxis","rArray","makeCalcdata","thetaArray","len","_length","cd","Array","sArray","pArray","i","p","s","d2c","attr","val","undefined","isArray","thetaunit","type","vals","marker","color","containerStr","cLetter","line","crossTraceCalc","polarLayout","calcdata","barPolarCd","length","cdi","visible","push","rAxis","_id","aAxis","mockGd","module","exports"],"sources":["/home/yasmin/Área de Trabalho/Frontend/node_modules/plotly.js/src/traces/barpolar/calc.js"],"sourcesContent":["/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar hasColorscale = require('../../components/colorscale/helpers').hasColorscale;\nvar colorscaleCalc = require('../../components/colorscale/calc');\nvar arraysToCalcdata = require('../bar/arrays_to_calcdata');\nvar setGroupPositions = require('../bar/cross_trace_calc').setGroupPositions;\nvar calcSelection = require('../scatter/calc_selection');\nvar traceIs = require('../../registry').traceIs;\nvar extendFlat = require('../../lib').extendFlat;\n\nfunction calc(gd, trace) {\n    var fullLayout = gd._fullLayout;\n    var subplotId = trace.subplot;\n    var radialAxis = fullLayout[subplotId].radialaxis;\n    var angularAxis = fullLayout[subplotId].angularaxis;\n    var rArray = radialAxis.makeCalcdata(trace, 'r');\n    var thetaArray = angularAxis.makeCalcdata(trace, 'theta');\n    var len = trace._length;\n    var cd = new Array(len);\n\n    // 'size' axis variables\n    var sArray = rArray;\n    // 'pos' axis variables\n    var pArray = thetaArray;\n\n    for(var i = 0; i < len; i++) {\n        cd[i] = {p: pArray[i], s: sArray[i]};\n    }\n\n    // convert width and offset in 'c' coordinate,\n    // set 'c' value(s) in trace._width and trace._offset,\n    // to make Bar.crossTraceCalc \"just work\"\n    function d2c(attr) {\n        var val = trace[attr];\n        if(val !== undefined) {\n            trace['_' + attr] = Array.isArray(val) ?\n                angularAxis.makeCalcdata(trace, attr) :\n                angularAxis.d2c(val, trace.thetaunit);\n        }\n    }\n\n    if(angularAxis.type === 'linear') {\n        d2c('width');\n        d2c('offset');\n    }\n\n    if(hasColorscale(trace, 'marker')) {\n        colorscaleCalc(gd, trace, {\n            vals: trace.marker.color,\n            containerStr: 'marker',\n            cLetter: 'c'\n        });\n    }\n    if(hasColorscale(trace, 'marker.line')) {\n        colorscaleCalc(gd, trace, {\n            vals: trace.marker.line.color,\n            containerStr: 'marker.line',\n            cLetter: 'c'\n        });\n    }\n\n    arraysToCalcdata(cd, trace);\n    calcSelection(cd, trace);\n\n    return cd;\n}\n\nfunction crossTraceCalc(gd, polarLayout, subplotId) {\n    var calcdata = gd.calcdata;\n    var barPolarCd = [];\n\n    for(var i = 0; i < calcdata.length; i++) {\n        var cdi = calcdata[i];\n        var trace = cdi[0].trace;\n\n        if(trace.visible === true && traceIs(trace, 'bar') &&\n            trace.subplot === subplotId\n        ) {\n            barPolarCd.push(cdi);\n        }\n    }\n\n    // to make _extremes is filled in correctly so that\n    // polar._subplot.radialAxis can get auotrange'd\n    // TODO clean up!\n    // I think we want to call getAutorange on polar.radialaxis\n    // NOT on polar._subplot.radialAxis\n    var rAxis = extendFlat({}, polarLayout.radialaxis, {_id: 'x'});\n    var aAxis = polarLayout.angularaxis;\n\n    // 'bargap', 'barmode' are in _fullLayout.polar\n    // TODO clean up setGroupPositions API instead\n    var mockGd = {_fullLayout: polarLayout};\n\n    setGroupPositions(mockGd, aAxis, rAxis, barPolarCd);\n}\n\nmodule.exports = {\n    calc: calc,\n    crossTraceCalc: crossTraceCalc\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ,IAAIA,aAAa,GAAGC,OAAO,CAAC,qCAAqC,CAAC,CAACD,aAAa;AAChF,IAAIE,cAAc,GAAGD,OAAO,CAAC,kCAAkC,CAAC;AAChE,IAAIE,gBAAgB,GAAGF,OAAO,CAAC,2BAA2B,CAAC;AAC3D,IAAIG,iBAAiB,GAAGH,OAAO,CAAC,yBAAyB,CAAC,CAACG,iBAAiB;AAC5E,IAAIC,aAAa,GAAGJ,OAAO,CAAC,2BAA2B,CAAC;AACxD,IAAIK,OAAO,GAAGL,OAAO,CAAC,gBAAgB,CAAC,CAACK,OAAO;AAC/C,IAAIC,UAAU,GAAGN,OAAO,CAAC,WAAW,CAAC,CAACM,UAAU;AAEhD,SAASC,IAAI,CAACC,EAAE,EAAEC,KAAK,EAAE;EACrB,IAAIC,UAAU,GAAGF,EAAE,CAACG,WAAW;EAC/B,IAAIC,SAAS,GAAGH,KAAK,CAACI,OAAO;EAC7B,IAAIC,UAAU,GAAGJ,UAAU,CAACE,SAAS,CAAC,CAACG,UAAU;EACjD,IAAIC,WAAW,GAAGN,UAAU,CAACE,SAAS,CAAC,CAACK,WAAW;EACnD,IAAIC,MAAM,GAAGJ,UAAU,CAACK,YAAY,CAACV,KAAK,EAAE,GAAG,CAAC;EAChD,IAAIW,UAAU,GAAGJ,WAAW,CAACG,YAAY,CAACV,KAAK,EAAE,OAAO,CAAC;EACzD,IAAIY,GAAG,GAAGZ,KAAK,CAACa,OAAO;EACvB,IAAIC,EAAE,GAAG,IAAIC,KAAK,CAACH,GAAG,CAAC;;EAEvB;EACA,IAAII,MAAM,GAAGP,MAAM;EACnB;EACA,IAAIQ,MAAM,GAAGN,UAAU;EAEvB,KAAI,IAAIO,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGN,GAAG,EAAEM,CAAC,EAAE,EAAE;IACzBJ,EAAE,CAACI,CAAC,CAAC,GAAG;MAACC,CAAC,EAAEF,MAAM,CAACC,CAAC,CAAC;MAAEE,CAAC,EAAEJ,MAAM,CAACE,CAAC;IAAC,CAAC;EACxC;;EAEA;EACA;EACA;EACA,SAASG,GAAG,CAACC,IAAI,EAAE;IACf,IAAIC,GAAG,GAAGvB,KAAK,CAACsB,IAAI,CAAC;IACrB,IAAGC,GAAG,KAAKC,SAAS,EAAE;MAClBxB,KAAK,CAAC,GAAG,GAAGsB,IAAI,CAAC,GAAGP,KAAK,CAACU,OAAO,CAACF,GAAG,CAAC,GAClChB,WAAW,CAACG,YAAY,CAACV,KAAK,EAAEsB,IAAI,CAAC,GACrCf,WAAW,CAACc,GAAG,CAACE,GAAG,EAAEvB,KAAK,CAAC0B,SAAS,CAAC;IAC7C;EACJ;EAEA,IAAGnB,WAAW,CAACoB,IAAI,KAAK,QAAQ,EAAE;IAC9BN,GAAG,CAAC,OAAO,CAAC;IACZA,GAAG,CAAC,QAAQ,CAAC;EACjB;EAEA,IAAG/B,aAAa,CAACU,KAAK,EAAE,QAAQ,CAAC,EAAE;IAC/BR,cAAc,CAACO,EAAE,EAAEC,KAAK,EAAE;MACtB4B,IAAI,EAAE5B,KAAK,CAAC6B,MAAM,CAACC,KAAK;MACxBC,YAAY,EAAE,QAAQ;MACtBC,OAAO,EAAE;IACb,CAAC,CAAC;EACN;EACA,IAAG1C,aAAa,CAACU,KAAK,EAAE,aAAa,CAAC,EAAE;IACpCR,cAAc,CAACO,EAAE,EAAEC,KAAK,EAAE;MACtB4B,IAAI,EAAE5B,KAAK,CAAC6B,MAAM,CAACI,IAAI,CAACH,KAAK;MAC7BC,YAAY,EAAE,aAAa;MAC3BC,OAAO,EAAE;IACb,CAAC,CAAC;EACN;EAEAvC,gBAAgB,CAACqB,EAAE,EAAEd,KAAK,CAAC;EAC3BL,aAAa,CAACmB,EAAE,EAAEd,KAAK,CAAC;EAExB,OAAOc,EAAE;AACb;AAEA,SAASoB,cAAc,CAACnC,EAAE,EAAEoC,WAAW,EAAEhC,SAAS,EAAE;EAChD,IAAIiC,QAAQ,GAAGrC,EAAE,CAACqC,QAAQ;EAC1B,IAAIC,UAAU,GAAG,EAAE;EAEnB,KAAI,IAAInB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGkB,QAAQ,CAACE,MAAM,EAAEpB,CAAC,EAAE,EAAE;IACrC,IAAIqB,GAAG,GAAGH,QAAQ,CAAClB,CAAC,CAAC;IACrB,IAAIlB,KAAK,GAAGuC,GAAG,CAAC,CAAC,CAAC,CAACvC,KAAK;IAExB,IAAGA,KAAK,CAACwC,OAAO,KAAK,IAAI,IAAI5C,OAAO,CAACI,KAAK,EAAE,KAAK,CAAC,IAC9CA,KAAK,CAACI,OAAO,KAAKD,SAAS,EAC7B;MACEkC,UAAU,CAACI,IAAI,CAACF,GAAG,CAAC;IACxB;EACJ;;EAEA;EACA;EACA;EACA;EACA;EACA,IAAIG,KAAK,GAAG7C,UAAU,CAAC,CAAC,CAAC,EAAEsC,WAAW,CAAC7B,UAAU,EAAE;IAACqC,GAAG,EAAE;EAAG,CAAC,CAAC;EAC9D,IAAIC,KAAK,GAAGT,WAAW,CAAC3B,WAAW;;EAEnC;EACA;EACA,IAAIqC,MAAM,GAAG;IAAC3C,WAAW,EAAEiC;EAAW,CAAC;EAEvCzC,iBAAiB,CAACmD,MAAM,EAAED,KAAK,EAAEF,KAAK,EAAEL,UAAU,CAAC;AACvD;AAEAS,MAAM,CAACC,OAAO,GAAG;EACbjD,IAAI,EAAEA,IAAI;EACVoC,cAAc,EAAEA;AACpB,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}